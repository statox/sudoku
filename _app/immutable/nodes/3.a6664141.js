import{s as pt,e as vt,i as H,G as dt,d as N,f as p,a as x,l as nt,g as C,h as B,H as D,c as S,m as lt,j as F,J as et,I as c,y as J,K as Wt,C as Qt,D as Xt,E as Yt}from"../chunks/scheduler.cf09a957.js";import{S as Bt,i as Gt,t as _t,c as Zt,a as ht,b as Tt,d as Vt,m as qt,e as Et,g as te}from"../chunks/index.afa9592b.js";import{a as jt}from"../chunks/store.f1fd27f6.js";import{g as Jt,a as Pt,b as ee,c as oe,S as se,u as ne,s as Dt,d as gt}from"../chunks/Sudoku.557724ab.js";const Ft=(t,o,e)=>{const{col:s,row:n}=o;if(t[n][s].value!==void 0)return!1;const l=Math.floor(s/3),a=Math.floor(n/3);for(let u=0;u<9;u++){if(t[n][u].value===e||t[u][s].value===e)return!1;const r=Math.floor(u/3),v=u%3;if(t[3*a+r][3*l+v].value===e)return!1}return!0},le=t=>{const o=JSON.parse(JSON.stringify(t));return zt(o),o},zt=t=>{for(let o=0;o<9;o++)for(let e=0;e<9;e++)if(t[o][e].value===void 0){for(let s=1;s<=9;s++)if(Ft(t,{row:o,col:e},s)){if(t[o][e].value=s,zt(t))return!0;t[o][e].value=void 0}return!1}return!0},At=t=>{if(Jt(t))return Pt(t)?"unique":"none";const o=JSON.parse(JSON.stringify(t));let e=0;for(let n=0;n<9;n++)for(let l=0;l<9;l++)t[n][l].value!==void 0&&e++;const s=[];return Kt(o,s,e),s.length===0?"none":s.length===1?"unique":"notUnique"},Kt=(t,o,e)=>{for(let s=0;s<9;s++)for(let n=0;n<9;n++)if(t[s][n].value===void 0){for(let l=1;l<=9;l++)if(Ft(t,{row:s,col:n},l)){if(t[s][n].value=l,Kt(t,o,e+1)&&(e===80&&o.push(JSON.parse(JSON.stringify(t))),o.length>=2))return!0;t[s][n].value=void 0}return!1}return!0},Rt=()=>{const t=ee(),o=[];for(let e=0;e<9;e++)for(let s=0;s<9;s++)o.push({row:e,col:s});for(;o.length;){const e=Math.floor(Math.random()*o.length),{row:s,col:n}=o[e];o.splice(e,1);const l=t[s][n].value;t[s][n].value=void 0,t[s][n].notes=[],t[s][n].fixed=!1,At(t)!=="unique"&&(t[s][n].value=l)}for(let e=0;e<9;e++)for(let s=0;s<9;s++)t[e][s].value&&(t[e][s].fixed=!0);return t},Nt=(t,o,e,s)=>{if(!s||t[o][e].value)return!1;const n=t[o][e].notes.indexOf(s);return n===-1?!1:(t[o][e].notes.splice(n,1),!0)},re=t=>{for(let o=0;o<9;o++)for(let e=0;e<9;e++)t[o][e].notes=[]},Lt=(t,o)=>{const{row:e,col:s}=o;if(t[e][s].value){t[e][s].notes=[];return}t[e][s].notes=[1,2,3,4,5,6,7,8,9];const n=Math.floor(s/3),l=Math.floor(e/3);for(let a=0;a<9;a++){const u=t[a][s].value;Nt(t,e,s,u);const r=t[e][a].value;Nt(t,e,s,r);const v=Math.floor(a/3),O=a%3,f=t[3*l+v][3*n+O].value;Nt(t,e,s,f)}return t[e][s].notes},ce=t=>{for(let o=0;o<9;o++)for(let e=0;e<9;e++)Lt(t,{row:o,col:e})},ae=t=>{const o=[];for(let e=0;e<9;e++){const s={},n={},l={},a=3*Math.floor(e/3),u=3*(e%3);for(let r=0;r<9;r++){if(t[e][r].value===void 0){const _=t[e][r].notes;for(const h of _)s[h]||(s[h]=[]),s[h].push({row:e,col:r})}if(t[r][e].value===void 0){const _=t[r][e].notes;for(const h of _)n[h]||(n[h]=[]),n[h].push({row:r,col:e})}const v=Math.floor(r/3),O=r%3,f=a+v,m=u+O;if(t[f][m].value===void 0){const _=t[f][m].notes;for(const h of _)l[h]||(l[h]=[]),l[h].push({row:f,col:m})}}for(const r of Object.keys(s)){const v=Number(r);if(s[v].length===1){const{row:O,col:f}=s[v][0];o.push({type:"hidden_single_row",cause:[{row:O,col:f,notes:[v]}]})}}for(const r of Object.keys(n)){const v=Number(r);if(n[v].length===1){const{row:O,col:f}=n[v][0];o.push({type:"hidden_single_col",cause:[{row:O,col:f,notes:[v]}]})}}for(const r of Object.keys(l)){const v=Number(r);if(l[v].length===1){const{row:O,col:f}=l[v][0];o.push({type:"hidden_single_square",cause:[{row:O,col:f,notes:[v]}]})}}}return o},ie=t=>{const o=[];for(let e=0;e<9;e++)for(let s=0;s<9;s++)t[e][s].value===void 0&&t[e][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:e,col:s,notes:[t[e][s].notes[0]]}]});return o},ue=t=>{const o=[];for(let e=0;e<9;e++){const s={},n={},l={},a=3*Math.floor(e/3),u=3*(e%3);for(let r=0;r<9;r++){if(t[e][r].value===void 0&&t[e][r].notes.length===2){const _=t[e][r].notes.join(",");if(!s[_])s[_]={row:e,col:r};else{const h={row:e,col:r,notes:[...t[e][r].notes]},V={row:s[_].row,col:s[_].col,notes:[...t[e][r].notes]},j=[];for(let b=0;b<9;b++)t[e][b].value!==void 0||t[e][b].notes.join(",")===_||j.push({row:e,col:b,notes:[...t[e][r].notes]});o.push({type:"naked_pair",cause:[h,V],effect:j})}}if(t[r][e].value===void 0&&t[r][e].notes.length===2){const _=t[r][e].notes.join(",");if(!n[_])n[_]={row:r,col:e};else{const h={row:r,col:e,notes:[...t[r][e].notes]},V={row:n[_].row,col:n[_].col,notes:[...t[r][e].notes]},j=[];for(let b=0;b<9;b++)t[b][e].value!==void 0||t[b][e].notes.join(",")===_||j.push({row:b,col:e,notes:[...t[r][e].notes]});o.push({type:"naked_pair",cause:[h,V],effect:j})}}const v=Math.floor(r/3),O=r%3,f=a+v,m=u+O;if(t[f][m].value===void 0&&t[f][m].notes.length===2){const _=t[f][m].notes.join(",");if(!l[_])l[_]={row:f,col:m};else{const h={row:f,col:m,notes:[...t[f][m].notes]},V={row:l[_].row,col:l[_].col,notes:[...t[f][m].notes]},j=[];for(let b=0;b<9;b++){const T=Math.floor(b/3),z=b%3,$=a+T,q=u+z;t[$][q].value!==void 0||t[$][q].notes.join(",")===_||j.push({row:$,col:q,notes:[...t[f][m].notes]})}o.push({type:"naked_pair",cause:[h,V],effect:j})}}}}return o};function $t(t){let o,e,s="grid has errors",n,l,a="grid is filled",u,r,v="grid is valid",O,f,m="grid has solutions",_,h,V=t[1]?"Has errors":"No errors",j,b,T,z=t[2]?"Is filled":"Not filled",$,q,g,d=t[3]?"Is valid":"Not valid",E,y,R,X;return{c(){o=p("div"),e=p("div"),e.textContent=s,n=x(),l=p("div"),l.textContent=a,u=x(),r=p("div"),r.textContent=v,O=x(),f=p("div"),f.textContent=m,_=x(),h=p("div"),j=nt(V),b=x(),T=p("div"),$=nt(z),q=x(),g=p("div"),E=nt(d),y=x(),R=p("div"),X=nt(t[4]),this.h()},l(P){o=C(P,"DIV",{class:!0});var w=B(o);e=C(w,"DIV",{"data-svelte-h":!0}),D(e)!=="svelte-1hlqbal"&&(e.textContent=s),n=S(w),l=C(w,"DIV",{"data-svelte-h":!0}),D(l)!=="svelte-ekf37s"&&(l.textContent=a),u=S(w),r=C(w,"DIV",{"data-svelte-h":!0}),D(r)!=="svelte-16e0vl8"&&(r.textContent=v),O=S(w),f=C(w,"DIV",{"data-svelte-h":!0}),D(f)!=="svelte-1tjrozg"&&(f.textContent=m),_=S(w),h=C(w,"DIV",{class:!0});var ot=B(h);j=lt(ot,V),ot.forEach(N),b=S(w),T=C(w,"DIV",{class:!0});var Y=B(T);$=lt(Y,z),Y.forEach(N),q=S(w),g=C(w,"DIV",{class:!0});var G=B(g);E=lt(G,d),G.forEach(N),y=S(w),R=C(w,"DIV",{class:!0});var st=B(R);X=lt(st,t[4]),st.forEach(N),w.forEach(N),this.h()},h(){F(h,"class","status svelte-1csoeu4"),et(h,"red",t[1]),F(T,"class","status svelte-1csoeu4"),et(T,"red",!t[2]),F(g,"class","status svelte-1csoeu4"),et(g,"red",!t[3]),F(R,"class","status svelte-1csoeu4"),et(R,"red",t[4]!=="unique"),F(o,"class","grid-status svelte-1csoeu4")},m(P,w){H(P,o,w),c(o,e),c(o,n),c(o,l),c(o,u),c(o,r),c(o,O),c(o,f),c(o,_),c(o,h),c(h,j),c(o,b),c(o,T),c(T,$),c(o,q),c(o,g),c(g,E),c(o,y),c(o,R),c(R,X)},p:dt,d(P){P&&N(o)}}}function fe(t){let o=t[0],e,s=$t(t);return{c(){s.c(),e=vt()},l(n){s.l(n),e=vt()},m(n,l){s.m(n,l),H(n,e,l)},p(n,[l]){l&1&&pt(o,o=n[0])?(s.d(1),s=$t(n),s.c(),s.m(e.parentNode,e)):s.p(n,l)},i:dt,o:dt,d(n){n&&N(e),s.d(n)}}}function ve(t,o,e){let{grid:s}=o,n=oe(s),l=Jt(s),a=Pt(s),u=At(s);return t.$$set=r=>{"grid"in r&&e(0,s=r.grid)},[s,n,l,a,u]}class de extends Bt{constructor(o){super(),Gt(this,o,ve,fe,pt,{grid:0})}}function Ht(t,o,e){const s=t.slice();return s[20]=o[e],s}function Mt(t){let o,e,s,n;function l(){return t[19](t[20])}return{c(){o=p("button"),e=nt(t[20]),this.h()},l(a){o=C(a,"BUTTON",{class:!0});var u=B(o);e=lt(u,t[20]),u.forEach(N),this.h()},h(){F(o,"class","svelte-1jeisuy"),et(o,"selected",t[1]===t[20])},m(a,u){H(a,o,u),c(o,e),s||(n=J(o,"click",l),s=!0)},p(a,u){t=a,u&2&&et(o,"selected",t[1]===t[20])},d(a){a&&N(o),s=!1,n()}}}function Ut(t){let o,e,s,n;return o=new se({props:{grid:t[0]}}),o.$on("cellUpdate",t[3]),o.$on("computeCellNotes",t[4]),s=new de({props:{grid:t[0]}}),{c(){Tt(o.$$.fragment),e=x(),Tt(s.$$.fragment)},l(l){Vt(o.$$.fragment,l),e=S(l),Vt(s.$$.fragment,l)},m(l,a){qt(o,l,a),H(l,e,a),qt(s,l,a),n=!0},p(l,a){const u={};a&1&&(u.grid=l[0]),o.$set(u);const r={};a&1&&(r.grid=l[0]),s.$set(r)},i(l){n||(ht(o.$$.fragment,l),ht(s.$$.fragment,l),n=!0)},o(l){_t(o.$$.fragment,l),_t(s.$$.fragment,l),n=!1},d(l){l&&N(e),Et(o,l),Et(s,l)}}}function _e(t){let o,e,s="Grid controls",n,l,a,u="Prev",r,v,O="New Grid",f,m,_="Solve grid",h,V,j="Reset grid",b,T,z="Remove fixed",$,q,g,d="Notes controls",E,y,R,X="Compute notes",P,w,ot="Remove notes",Y,G,st="Display hints",Ct,L,yt="Hide hints",rt,A,Z,xt="Highlights controls",kt,W,ct,at,it,St=t[0],tt,ut,mt,Ot,wt=jt([1,2,3,4,5,6,7,8,9]),M=[];for(let i=0;i<9;i+=1)M[i]=Mt(Ht(t,wt,i));let U=Ut(t);return{c(){o=p("div"),e=p("h4"),e.textContent=s,n=x(),l=p("div"),a=p("button"),a.textContent=u,r=x(),v=p("button"),v.textContent=O,f=x(),m=p("button"),m.textContent=_,h=x(),V=p("button"),V.textContent=j,b=x(),T=p("button"),T.textContent=z,$=x(),q=p("div"),g=p("h4"),g.textContent=d,E=x(),y=p("div"),R=p("button"),R.textContent=X,P=x(),w=p("button"),w.textContent=ot,Y=x(),G=p("button"),G.textContent=st,Ct=x(),L=p("button"),L.textContent=yt,rt=x(),A=p("div"),Z=p("h4"),Z.textContent=xt,kt=x(),W=p("div");for(let i=0;i<9;i+=1)M[i].c();ct=x(),at=p("br"),it=x(),U.c(),tt=vt(),this.h()},l(i){o=C(i,"DIV",{});var I=B(o);e=C(I,"H4",{"data-svelte-h":!0}),D(e)!=="svelte-1h8cvtc"&&(e.textContent=s),n=S(I),l=C(I,"DIV",{class:!0});var k=B(l);a=C(k,"BUTTON",{"data-svelte-h":!0}),D(a)!=="svelte-bivxk4"&&(a.textContent=u),r=S(k),v=C(k,"BUTTON",{"data-svelte-h":!0}),D(v)!=="svelte-1oh0e6u"&&(v.textContent=O),f=S(k),m=C(k,"BUTTON",{"data-svelte-h":!0}),D(m)!=="svelte-1wjgins"&&(m.textContent=_),h=S(k),V=C(k,"BUTTON",{"data-svelte-h":!0}),D(V)!=="svelte-69m1bk"&&(V.textContent=j),b=S(k),T=C(k,"BUTTON",{"data-svelte-h":!0}),D(T)!=="svelte-g7g4he"&&(T.textContent=z),k.forEach(N),I.forEach(N),$=S(i),q=C(i,"DIV",{});var Q=B(q);g=C(Q,"H4",{"data-svelte-h":!0}),D(g)!=="svelte-8gx0az"&&(g.textContent=d),E=S(Q),y=C(Q,"DIV",{class:!0});var K=B(y);R=C(K,"BUTTON",{"data-svelte-h":!0}),D(R)!=="svelte-12olw78"&&(R.textContent=X),P=S(K),w=C(K,"BUTTON",{"data-svelte-h":!0}),D(w)!=="svelte-16z5c15"&&(w.textContent=ot),Y=S(K),G=C(K,"BUTTON",{"data-svelte-h":!0}),D(G)!=="svelte-mp8c3v"&&(G.textContent=st),Ct=S(K),L=C(K,"BUTTON",{"data-svelte-h":!0}),D(L)!=="svelte-eks63j"&&(L.textContent=yt),K.forEach(N),Q.forEach(N),rt=S(i),A=C(i,"DIV",{});var ft=B(A);Z=C(ft,"H4",{"data-svelte-h":!0}),D(Z)!=="svelte-hclwgd"&&(Z.textContent=xt),kt=S(ft),W=C(ft,"DIV",{class:!0});var It=B(W);for(let bt=0;bt<9;bt+=1)M[bt].l(It);It.forEach(N),ft.forEach(N),ct=S(i),at=C(i,"BR",{}),it=S(i),U.l(i),tt=vt(),this.h()},h(){F(l,"class","grid-controls svelte-1jeisuy"),F(y,"class","notes-controls svelte-1jeisuy"),F(W,"class","highlights-controls")},m(i,I){H(i,o,I),c(o,e),c(o,n),c(o,l),c(l,a),c(l,r),c(l,v),c(l,f),c(l,m),c(l,h),c(l,V),c(l,b),c(l,T),H(i,$,I),H(i,q,I),c(q,g),c(q,E),c(q,y),c(y,R),c(y,P),c(y,w),c(y,Y),c(y,G),c(y,Ct),c(y,L),H(i,rt,I),H(i,A,I),c(A,Z),c(A,kt),c(A,W);for(let k=0;k<9;k+=1)M[k]&&M[k].m(W,null);H(i,ct,I),H(i,at,I),H(i,it,I),U.m(i,I),H(i,tt,I),ut=!0,mt||(Ot=[J(a,"click",t[10]),J(v,"click",t[11]),J(m,"click",t[12]),J(V,"click",t[13]),J(T,"click",t[14]),J(R,"click",t[15]),J(w,"click",t[16]),J(G,"click",t[17]),J(L,"click",t[18])],mt=!0)},p(i,[I]){if(I&2){wt=jt([1,2,3,4,5,6,7,8,9]);let k;for(k=0;k<9;k+=1){const Q=Ht(i,wt,k);M[k]?M[k].p(Q,I):(M[k]=Mt(Q),M[k].c(),M[k].m(W,null))}for(;k<9;k+=1)M[k].d(1)}I&1&&pt(St,St=i[0])?(te(),_t(U,1,1,dt),Zt(),U=Ut(i),U.c(),ht(U,1),U.m(tt.parentNode,tt)):U.p(i,I)},i(i){ut||(ht(U),ut=!0)},o(i){_t(U),ut=!1},d(i){i&&(N(o),N($),N(q),N(rt),N(A),N(ct),N(at),N(it),N(tt)),Wt(M,i),U.d(i),mt=!1,Qt(Ot)}}}function he(t,o,e){let s;Xt(t,gt,d=>e(1,s=d));let n=Rt();const l=[JSON.parse(JSON.stringify(n))],a=d=>{ne(d.detail.cell,d.detail.update),r()},u=d=>{Lt(n,d.detail.position),r()},r=d=>{e(0,n),!(d!=null&&d.noHistory)&&l.push(JSON.parse(JSON.stringify(n)))},v=d=>{for(let E=0;E<9;E++)for(let y=0;y<9;y++)d[E][y].fixed||(d[E][y].value=void 0,d[E][y].notes=[])},O=()=>{const d=le(n);e(0,n=d),r()},f=()=>{for(let d=0;d<9;d++)for(let E=0;E<9;E++)e(0,n[d][E].fixed=!1,n)},m=d=>{Dt.set([...ie(d),...ae(d),...ue(d)])};return[n,s,l,a,u,r,v,O,f,m,()=>{e(0,n=l.pop()),r({noHistory:!0})},()=>{e(0,n=Rt()),r()},()=>{O(),r()},()=>{v(n),r()},()=>{f(),r()},()=>{ce(n),r()},()=>{re(n),r()},()=>{m(n),r()},()=>{Dt.set([]),r()},d=>{Yt(gt,s=s===d?void 0:d,s)}]}class we extends Bt{constructor(o){super(),Gt(this,o,he,_e,pt,{})}}export{we as component};
