import{s as pt,f as d,a as C,l as W,e as ot,g as v,h as j,H as G,c as g,d as h,m as J,j as nt,i as y,I as p,y as B,n as lt,C as ht,G as _t}from"../chunks/scheduler.71239b2e.js";import{S as dt,i as vt,t as F,c as Ct,a as V,b as rt,d as at,m as ut,e as ft,g as gt}from"../chunks/index.8ab45ecd.js";import{c as X,a as Y,d as K,f as bt,b as yt,g as it,S as kt,G as xt,u as Nt}from"../chunks/GridStatus.a50308e0.js";const Tt=(o,n)=>{if(X(o)||Y(o))return o;const t=K(o);bt(t);const l=[t];for(;l.length;){const s=l.pop();if(n.push(K(s)),X(s))continue;if(Y(s)){if(yt(s))return s;continue}const e=wt(s);if(!e.length)continue;const f=Math.floor(Math.random()*e.length),a=e[f],i=K(s);i[a.row][a.col].notes=i[a.row][a.col].notes.filter(k=>k!==a.value),l.push(i),Mt(s,a),mt(s),l.push(s)}return t},Q=(o,n,t,l)=>{if(o[n][t].value)return!1;const s=o[n][t].notes.indexOf(l);return s===-1?!1:(o[n][t].notes.splice(s,1),o[n][t].notes.length===1?(o[n][t].value=o[n][t].notes.pop(),!0):!1)},mt=o=>{if(Y(o)||X(o))return;let n=!1;for(let t=0;t<9;t++)for(let l=0;l<9;l++){const{value:s}=o[t][l];if(!s)continue;for(let a=0;a<9;a++)n=n||Q(o,a,l,s),n=n||Q(o,t,a,s);const e=Math.floor(l/3),f=Math.floor(t/3);for(let a=0;a<3;a++)for(let i=0;i<3;i++)n=n||Q(o,3*f+a,3*e+i,s)}n&&mt(o)},Ht=(o,n)=>{const{row:t,col:l,value:s}=n;return!(o[t][l].value||!o[t][l].notes.includes(s))},Mt=(o,n)=>{if(!Ht(o,n))return;const{row:t,col:l,value:s}=n;o[t][l].value=s,o[t][l].notes=[]},wt=o=>{let n=[],t=9;for(let l=0;l<9;l++)for(let s=0;s<9;s++){if(o[l][s].value!==void 0)continue;const{notes:e}=o[l][s];if(e.length<t&&(t=e.length,n=[]),e.length===t)for(const f of o[l][s].notes)n.push({row:l,col:s,value:f})}return n};function ct(o){let n,t,l,s;return n=new kt({props:{grid:o[0]}}),n.$on("cellUpdate",o[3]),l=new xt({props:{grid:o[0]}}),{c(){rt(n.$$.fragment),t=C(),rt(l.$$.fragment)},l(e){at(n.$$.fragment,e),t=g(e),at(l.$$.fragment,e)},m(e,f){ut(n,e,f),y(e,t,f),ut(l,e,f),s=!0},p(e,f){const a={};f&1&&(a.grid=e[0]),n.$set(a);const i={};f&1&&(i.grid=e[0]),l.$set(i)},i(e){s||(V(n.$$.fragment,e),V(l.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),F(l.$$.fragment,e),s=!1},d(e){e&&h(t),ft(n,e),ft(l,e)}}}function Ut(o){let n,t,l="Reset grid",s,e,f="Fill grid",a,i,k,c,b,z="First step",M,x,Z="Prev step",R,N,$="Next step",q,T,tt="Last step",A,H,I,L,O=Math.max(o[1].length-1,0)+"",P,S,et=o[0],w,U,D,st,m=ct(o);return{c(){n=d("div"),t=d("button"),t.textContent=l,s=C(),e=d("button"),e.textContent=f,a=C(),i=d("br"),k=C(),c=d("div"),b=d("button"),b.textContent=z,M=C(),x=d("button"),x.textContent=Z,R=C(),N=d("button"),N.textContent=$,q=C(),T=d("button"),T.textContent=tt,A=C(),H=d("span"),I=W(o[2]),L=W(" / "),P=W(O),S=C(),m.c(),w=ot(),this.h()},l(r){n=v(r,"DIV",{class:!0});var u=j(n);t=v(u,"BUTTON",{"data-svelte-h":!0}),G(t)!=="svelte-hdh8ow"&&(t.textContent=l),s=g(u),e=v(u,"BUTTON",{"data-svelte-h":!0}),G(e)!=="svelte-1f9w2t4"&&(e.textContent=f),u.forEach(h),a=g(r),i=v(r,"BR",{}),k=g(r),c=v(r,"DIV",{class:!0});var _=j(c);b=v(_,"BUTTON",{"data-svelte-h":!0}),G(b)!=="svelte-1f64wvg"&&(b.textContent=z),M=g(_),x=v(_,"BUTTON",{"data-svelte-h":!0}),G(x)!=="svelte-gs2lf6"&&(x.textContent=Z),R=g(_),N=v(_,"BUTTON",{"data-svelte-h":!0}),G(N)!=="svelte-67enom"&&(N.textContent=$),q=g(_),T=v(_,"BUTTON",{"data-svelte-h":!0}),G(T)!=="svelte-ul0sbo"&&(T.textContent=tt),A=g(_),H=v(_,"SPAN",{});var E=j(H);I=J(E,o[2]),L=J(E," / "),P=J(E,O),E.forEach(h),_.forEach(h),S=g(r),m.l(r),w=ot(),this.h()},h(){nt(n,"class","grid-controls svelte-1vzpge2"),nt(c,"class","history-controls svelte-1vzpge2")},m(r,u){y(r,n,u),p(n,t),p(n,s),p(n,e),y(r,a,u),y(r,i,u),y(r,k,u),y(r,c,u),p(c,b),p(c,M),p(c,x),p(c,R),p(c,N),p(c,q),p(c,T),p(c,A),p(c,H),p(H,I),p(H,L),p(H,P),y(r,S,u),m.m(r,u),y(r,w,u),U=!0,D||(st=[B(t,"click",o[4]),B(e,"click",o[5]),B(b,"click",o[6]),B(x,"click",o[9]),B(N,"click",o[8]),B(T,"click",o[7])],D=!0)},p(r,[u]){(!U||u&4)&&lt(I,r[2]),(!U||u&2)&&O!==(O=Math.max(r[1].length-1,0)+"")&&lt(P,O),u&1&&pt(et,et=r[0])?(gt(),F(m,1,1,_t),Ct(),m=ct(r),m.c(),V(m,1),m.m(w.parentNode,w)):m.p(r,u)},i(r){U||(V(m),U=!0)},o(r){F(m),U=!1},d(r){r&&(h(n),h(a),h(i),h(k),h(c),h(S),h(w)),m.d(r),D=!1,ht(st)}}}function Gt(o,n,t){let l=it(),s=[],e=0;return[l,s,e,M=>{Nt(M.detail.cell,M.detail.update),t(0,l)},()=>{t(0,l=it())},()=>{t(1,s=[]),t(2,e=0),Tt(l,s),t(2,e=s.length-1),t(0,l=s[e])},()=>{t(2,e=0),t(0,l=s[e])},()=>{t(2,e=s.length-1),t(0,l=s[e])},()=>{t(2,e=Math.min(e+1,s.length-1)),t(0,l=s[e])},()=>{t(2,e=Math.max(e-1,0)),t(0,l=s[e])}]}class Pt extends dt{constructor(n){super(),vt(this,n,Gt,Ut,pt,{})}}export{Pt as component};
