import{s as it,e as nt,i as q,G as ot,d as m,f as v,a as C,l as et,g as f,h as H,H as y,c as p,m as lt,j as P,J as st,I as o,y as B,C as Vt}from"../chunks/scheduler.a9a47073.js";import{S as Nt,i as yt,t as rt,c as $t,a as at,b as ht,d as Ct,m as pt,e as mt,g as St}from"../chunks/index.4654634b.js";import{m as Ot,g as wt,a as Dt,b as Et,c as Ut,d as kt,S as Gt,u as Bt,s as xt}from"../chunks/Sudoku.4f131c1e.js";const Ht=s=>{const t=JSON.parse(JSON.stringify(s));return It(t),t},It=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)if(s[t][l].value===void 0){for(let e=1;e<=9;e++)if(Ot(s,{row:t,col:l},e)){if(s[t][l].value=e,It(s))return!0;s[t][l].value=void 0}return!1}return!0},dt=(s,t,l,e)=>{if(!e||s[t][l].value)return!1;const r=s[t][l].notes.indexOf(e);return r===-1?!1:(s[t][l].notes.splice(r,1),!0)},Rt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)s[t][l].notes=[]},Tt=(s,t)=>{const{row:l,col:e}=t;if(s[l][e].value){s[l][e].notes=[];return}s[l][e].notes=[1,2,3,4,5,6,7,8,9];const r=Math.floor(e/3),n=Math.floor(l/3);for(let i=0;i<9;i++){const c=s[i][e].value;dt(s,l,e,c);const _=s[l][i].value;dt(s,l,e,_);const g=Math.floor(i/3),$=i%3,b=s[3*n+g][3*r+$].value;dt(s,l,e,b)}return s[l][e].notes},Jt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)Tt(s,{row:t,col:l})},qt=s=>{const t=[];for(let l=0;l<9;l++)for(let e=0;e<9;e++)s[l][e].value===void 0&&s[l][e].notes.length===1&&t.push({type:"lone_singles",cause:[{row:l,col:e,notes:[s[l][e].notes[0]]}]});return t};function gt(s){let t,l,e="grid has errors",r,n,i="grid is filled",c,_,g="grid is valid",$,b,S="grid has solutions",j,T,O=s[1]?"Has errors":"No errors",F,R,k,A=s[2]?"Is filled":"Not filled",U,a,u,w=s[3]?"Is valid":"Not valid",z,x,N,L;return{c(){t=v("div"),l=v("div"),l.textContent=e,r=C(),n=v("div"),n.textContent=i,c=C(),_=v("div"),_.textContent=g,$=C(),b=v("div"),b.textContent=S,j=C(),T=v("div"),F=et(O),R=C(),k=v("div"),U=et(A),a=C(),u=v("div"),z=et(w),x=C(),N=v("div"),L=et(s[4]),this.h()},l(G){t=f(G,"DIV",{class:!0});var d=H(t);l=f(d,"DIV",{"data-svelte-h":!0}),y(l)!=="svelte-1hlqbal"&&(l.textContent=e),r=p(d),n=f(d,"DIV",{"data-svelte-h":!0}),y(n)!=="svelte-ekf37s"&&(n.textContent=i),c=p(d),_=f(d,"DIV",{"data-svelte-h":!0}),y(_)!=="svelte-16e0vl8"&&(_.textContent=g),$=p(d),b=f(d,"DIV",{"data-svelte-h":!0}),y(b)!=="svelte-1tjrozg"&&(b.textContent=S),j=p(d),T=f(d,"DIV",{class:!0});var W=H(T);F=lt(W,O),W.forEach(m),R=p(d),k=f(d,"DIV",{class:!0});var K=H(k);U=lt(K,A),K.forEach(m),a=p(d),u=f(d,"DIV",{class:!0});var D=H(u);z=lt(D,w),D.forEach(m),x=p(d),N=f(d,"DIV",{class:!0});var X=H(N);L=lt(X,s[4]),X.forEach(m),d.forEach(m),this.h()},h(){P(T,"class","status svelte-1csoeu4"),st(T,"red",s[1]),P(k,"class","status svelte-1csoeu4"),st(k,"red",!s[2]),P(u,"class","status svelte-1csoeu4"),st(u,"red",!s[3]),P(N,"class","status svelte-1csoeu4"),st(N,"red",s[4]!=="unique"),P(t,"class","grid-status svelte-1csoeu4")},m(G,d){q(G,t,d),o(t,l),o(t,r),o(t,n),o(t,c),o(t,_),o(t,$),o(t,b),o(t,j),o(t,T),o(T,F),o(t,R),o(t,k),o(k,U),o(t,a),o(t,u),o(u,z),o(t,x),o(t,N),o(N,L)},p:ot,d(G){G&&m(t)}}}function jt(s){let t=s[0],l,e=gt(s);return{c(){e.c(),l=nt()},l(r){e.l(r),l=nt()},m(r,n){e.m(r,n),q(r,l,n)},p(r,[n]){n&1&&it(t,t=r[0])?(e.d(1),e=gt(r),e.c(),e.m(l.parentNode,l)):e.p(r,n)},i:ot,o:ot,d(r){r&&m(l),e.d(r)}}}function Ft(s,t,l){let{grid:e}=t,r=wt(e),n=Dt(e),i=Et(e),c=Ut(e);return s.$$set=_=>{"grid"in _&&l(0,e=_.grid)},[e,r,n,i,c]}class zt extends Nt{constructor(t){super(),yt(this,t,Ft,jt,it,{grid:0})}}function bt(s){let t,l,e,r;return t=new Gt({props:{grid:s[0]}}),t.$on("cellUpdate",s[2]),t.$on("computeCellNotes",s[3]),e=new zt({props:{grid:s[0]}}),{c(){ht(t.$$.fragment),l=C(),ht(e.$$.fragment)},l(n){Ct(t.$$.fragment,n),l=p(n),Ct(e.$$.fragment,n)},m(n,i){pt(t,n,i),q(n,l,i),pt(e,n,i),r=!0},p(n,i){const c={};i&1&&(c.grid=n[0]),t.$set(c);const _={};i&1&&(_.grid=n[0]),e.$set(_)},i(n){r||(at(t.$$.fragment,n),at(e.$$.fragment,n),r=!0)},o(n){rt(t.$$.fragment,n),rt(e.$$.fragment,n),r=!1},d(n){n&&m(l),mt(t,n),mt(e,n)}}}function Mt(s){let t,l,e="Grid controls",r,n,i,c="Prev",_,g,$="New Grid",b,S,j="Solve grid",T,O,F="Reset grid",R,k,A="Remove fixed",U,a,u,w="Notes controls",z,x,N,L="Compute notes",G,d,W="Remove notes",K,D,X="Display hints",ct,M,vt="Hide hints",Y,ft=s[0],Q,Z,ut,_t,V=bt(s);return{c(){t=v("div"),l=v("h4"),l.textContent=e,r=C(),n=v("div"),i=v("button"),i.textContent=c,_=C(),g=v("button"),g.textContent=$,b=C(),S=v("button"),S.textContent=j,T=C(),O=v("button"),O.textContent=F,R=C(),k=v("button"),k.textContent=A,U=C(),a=v("div"),u=v("h4"),u.textContent=w,z=C(),x=v("div"),N=v("button"),N.textContent=L,G=C(),d=v("button"),d.textContent=W,K=C(),D=v("button"),D.textContent=X,ct=C(),M=v("button"),M.textContent=vt,Y=C(),V.c(),Q=nt(),this.h()},l(h){t=f(h,"DIV",{});var I=H(t);l=f(I,"H4",{"data-svelte-h":!0}),y(l)!=="svelte-1h8cvtc"&&(l.textContent=e),r=p(I),n=f(I,"DIV",{class:!0});var E=H(n);i=f(E,"BUTTON",{"data-svelte-h":!0}),y(i)!=="svelte-bivxk4"&&(i.textContent=c),_=p(E),g=f(E,"BUTTON",{"data-svelte-h":!0}),y(g)!=="svelte-1oh0e6u"&&(g.textContent=$),b=p(E),S=f(E,"BUTTON",{"data-svelte-h":!0}),y(S)!=="svelte-1wjgins"&&(S.textContent=j),T=p(E),O=f(E,"BUTTON",{"data-svelte-h":!0}),y(O)!=="svelte-69m1bk"&&(O.textContent=F),R=p(E),k=f(E,"BUTTON",{"data-svelte-h":!0}),y(k)!=="svelte-g7g4he"&&(k.textContent=A),E.forEach(m),I.forEach(m),U=p(h),a=f(h,"DIV",{});var tt=H(a);u=f(tt,"H4",{"data-svelte-h":!0}),y(u)!=="svelte-8gx0az"&&(u.textContent=w),z=p(tt),x=f(tt,"DIV",{class:!0});var J=H(x);N=f(J,"BUTTON",{"data-svelte-h":!0}),y(N)!=="svelte-12olw78"&&(N.textContent=L),G=p(J),d=f(J,"BUTTON",{"data-svelte-h":!0}),y(d)!=="svelte-16z5c15"&&(d.textContent=W),K=p(J),D=f(J,"BUTTON",{"data-svelte-h":!0}),y(D)!=="svelte-mp8c3v"&&(D.textContent=X),ct=p(J),M=f(J,"BUTTON",{"data-svelte-h":!0}),y(M)!=="svelte-eks63j"&&(M.textContent=vt),J.forEach(m),tt.forEach(m),Y=p(h),V.l(h),Q=nt(),this.h()},h(){P(n,"class","grid-controls svelte-17fx0fn"),P(x,"class","notes-controls svelte-17fx0fn")},m(h,I){q(h,t,I),o(t,l),o(t,r),o(t,n),o(n,i),o(n,_),o(n,g),o(n,b),o(n,S),o(n,T),o(n,O),o(n,R),o(n,k),q(h,U,I),q(h,a,I),o(a,u),o(a,z),o(a,x),o(x,N),o(x,G),o(x,d),o(x,K),o(x,D),o(x,ct),o(x,M),q(h,Y,I),V.m(h,I),q(h,Q,I),Z=!0,ut||(_t=[B(i,"click",s[9]),B(g,"click",s[10]),B(S,"click",s[11]),B(O,"click",s[12]),B(k,"click",s[13]),B(N,"click",s[14]),B(d,"click",s[15]),B(D,"click",s[16]),B(M,"click",s[17])],ut=!0)},p(h,[I]){I&1&&it(ft,ft=h[0])?(St(),rt(V,1,1,ot),$t(),V=bt(h),V.c(),at(V,1),V.m(Q.parentNode,Q)):V.p(h,I)},i(h){Z||(at(V),Z=!0)},o(h){rt(V),Z=!1},d(h){h&&(m(t),m(U),m(a),m(Y),m(Q)),V.d(h),ut=!1,Vt(_t)}}}function Pt(s,t,l){let e=kt();const r=[JSON.parse(JSON.stringify(e))],n=a=>{Bt(a.detail.cell,a.detail.update),c()},i=a=>{Tt(e,a.detail.position),c()},c=a=>{l(0,e),!(a!=null&&a.noHistory)&&r.push(JSON.parse(JSON.stringify(e)))},_=a=>{for(let u=0;u<9;u++)for(let w=0;w<9;w++)a[u][w].fixed||(a[u][w].value=void 0,a[u][w].notes=[])},g=()=>{const a=Ht(e);l(0,e=a),c()},$=()=>{for(let a=0;a<9;a++)for(let u=0;u<9;u++)l(0,e[a][u].fixed=!1,e)},b=a=>{const u=qt(a);xt.set(u)};return[e,r,n,i,c,_,g,$,b,()=>{l(0,e=r.pop()),c({noHistory:!0})},()=>{l(0,e=kt()),c()},()=>{g(),c()},()=>{_(e),c()},()=>{$(),c()},()=>{Jt(e),c()},()=>{Rt(e),c()},()=>{b(e),c()},()=>{xt.set([]),c()}]}class Qt extends Nt{constructor(t){super(),yt(this,t,Pt,Mt,it,{})}}export{Qt as component};
