import{s as ut,e as ct,i as B,G as rt,d as I,f as k,a as y,l as st,g as m,h as M,H as E,c as x,m as nt,j as A,J as lt,I as r,y as H,C as Vt}from"../chunks/scheduler.cf09a957.js";import{S as It,i as Ot,t as at,c as $t,a as it,b as Ct,d as kt,m as mt,e as wt,g as jt}from"../chunks/index.afa9592b.js";import{m as Et,g as qt,a as Dt,b as Rt,c as Ut,d as bt,S as gt,u as Bt,s as Nt}from"../chunks/Sudoku.a740b1fa.js";const Gt=e=>{const o=JSON.parse(JSON.stringify(e));return St(o),o},St=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Et(e,{row:o,col:t},s)){if(e[o][t].value=s,St(e))return!0;e[o][t].value=void 0}return!1}return!0},dt=(e,o,t,s)=>{if(!s||e[o][t].value)return!1;const c=e[o][t].notes.indexOf(s);return c===-1?!1:(e[o][t].notes.splice(c,1),!0)},Ht=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)e[o][t].notes=[]},Tt=(e,o)=>{const{row:t,col:s}=o;if(e[t][s].value){e[t][s].notes=[];return}e[t][s].notes=[1,2,3,4,5,6,7,8,9];const c=Math.floor(s/3),n=Math.floor(t/3);for(let u=0;u<9;u++){const f=e[u][s].value;dt(e,t,s,f);const l=e[t][u].value;dt(e,t,s,l);const v=Math.floor(u/3),N=u%3,i=e[3*n+v][3*c+N].value;dt(e,t,s,i)}return e[t][s].notes},Mt=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)Tt(e,{row:o,col:t})},Jt=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},n={},u=3*Math.floor(t/3),f=3*(t%3);for(let l=0;l<9;l++){if(e[t][l].value===void 0){const d=e[t][l].notes;for(const _ of d)s[_]||(s[_]=[]),s[_].push({row:t,col:l})}if(e[l][t].value===void 0){const d=e[l][t].notes;for(const _ of d)c[_]||(c[_]=[]),c[_].push({row:l,col:t})}const v=Math.floor(l/3),N=l%3,i=u+v,w=f+N;if(e[i][w].value===void 0){const d=e[i][w].notes;for(const _ of d)n[_]||(n[_]=[]),n[_].push({row:i,col:w})}}for(const l of Object.keys(s)){const v=Number(l);if(s[v].length===1){const{row:N,col:i}=s[v][0];o.push({type:"hidden_single_row",cause:[{row:N,col:i,notes:[v]}]})}}for(const l of Object.keys(c)){const v=Number(l);if(c[v].length===1){const{row:N,col:i}=c[v][0];o.push({type:"hidden_single_col",cause:[{row:N,col:i,notes:[v]}]})}}for(const l of Object.keys(n)){const v=Number(l);if(n[v].length===1){const{row:N,col:i}=n[v][0];o.push({type:"hidden_single_square",cause:[{row:N,col:i,notes:[v]}]})}}}return o},Pt=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},Ft=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},n={},u=3*Math.floor(t/3),f=3*(t%3);for(let l=0;l<9;l++){if(e[t][l].value===void 0&&e[t][l].notes.length===2){const d=e[t][l].notes.join(",");if(!s[d])s[d]={row:t,col:l};else{const _={row:t,col:l,notes:[...e[t][l].notes]},S={row:s[d].row,col:s[d].col,notes:[...e[t][l].notes]},T=[];for(let p=0;p<9;p++)e[t][p].value!==void 0||e[t][p].notes.join(",")===d||T.push({row:t,col:p,notes:[...e[t][l].notes]});o.push({type:"naked_pair",cause:[_,S],effect:T})}}if(e[l][t].value===void 0&&e[l][t].notes.length===2){const d=e[l][t].notes.join(",");if(!c[d])c[d]={row:l,col:t};else{const _={row:l,col:t,notes:[...e[l][t].notes]},S={row:c[d].row,col:c[d].col,notes:[...e[l][t].notes]},T=[];for(let p=0;p<9;p++)e[p][t].value!==void 0||e[p][t].notes.join(",")===d||T.push({row:p,col:t,notes:[...e[l][t].notes]});o.push({type:"naked_pair",cause:[_,S],effect:T})}}const v=Math.floor(l/3),N=l%3,i=u+v,w=f+N;if(e[i][w].value===void 0&&e[i][w].notes.length===2){const d=e[i][w].notes.join(",");if(!n[d])n[d]={row:i,col:w};else{const _={row:i,col:w,notes:[...e[i][w].notes]},S={row:n[d].row,col:n[d].col,notes:[...e[i][w].notes]},T=[];for(let p=0;p<9;p++){const O=Math.floor(p/3),J=p%3,q=u+O,a=f+J;e[q][a].value!==void 0||e[q][a].notes.join(",")===d||T.push({row:q,col:a,notes:[...e[i][w].notes]})}o.push({type:"naked_pair",cause:[_,S],effect:T})}}}}return o};function yt(e){let o,t,s="grid has errors",c,n,u="grid is filled",f,l,v="grid is valid",N,i,w="grid has solutions",d,_,S=e[1]?"Has errors":"No errors",T,p,O,J=e[2]?"Is filled":"Not filled",q,a,b,R=e[3]?"Is valid":"Not valid",F,V,j,L;return{c(){o=k("div"),t=k("div"),t.textContent=s,c=y(),n=k("div"),n.textContent=u,f=y(),l=k("div"),l.textContent=v,N=y(),i=k("div"),i.textContent=w,d=y(),_=k("div"),T=st(S),p=y(),O=k("div"),q=st(J),a=y(),b=k("div"),F=st(R),V=y(),j=k("div"),L=st(e[4]),this.h()},l(G){o=m(G,"DIV",{class:!0});var h=M(o);t=m(h,"DIV",{"data-svelte-h":!0}),E(t)!=="svelte-1hlqbal"&&(t.textContent=s),c=x(h),n=m(h,"DIV",{"data-svelte-h":!0}),E(n)!=="svelte-ekf37s"&&(n.textContent=u),f=x(h),l=m(h,"DIV",{"data-svelte-h":!0}),E(l)!=="svelte-16e0vl8"&&(l.textContent=v),N=x(h),i=m(h,"DIV",{"data-svelte-h":!0}),E(i)!=="svelte-1tjrozg"&&(i.textContent=w),d=x(h),_=m(h,"DIV",{class:!0});var W=M(_);T=nt(W,S),W.forEach(I),p=x(h),O=m(h,"DIV",{class:!0});var K=M(O);q=nt(K,J),K.forEach(I),a=x(h),b=m(h,"DIV",{class:!0});var U=M(b);F=nt(U,R),U.forEach(I),V=x(h),j=m(h,"DIV",{class:!0});var X=M(j);L=nt(X,e[4]),X.forEach(I),h.forEach(I),this.h()},h(){A(_,"class","status svelte-1csoeu4"),lt(_,"red",e[1]),A(O,"class","status svelte-1csoeu4"),lt(O,"red",!e[2]),A(b,"class","status svelte-1csoeu4"),lt(b,"red",!e[3]),A(j,"class","status svelte-1csoeu4"),lt(j,"red",e[4]!=="unique"),A(o,"class","grid-status svelte-1csoeu4")},m(G,h){B(G,o,h),r(o,t),r(o,c),r(o,n),r(o,f),r(o,l),r(o,N),r(o,i),r(o,d),r(o,_),r(_,T),r(o,p),r(o,O),r(O,q),r(o,a),r(o,b),r(b,F),r(o,V),r(o,j),r(j,L)},p:rt,d(G){G&&I(o)}}}function zt(e){let o=e[0],t,s=yt(e);return{c(){s.c(),t=ct()},l(c){s.l(c),t=ct()},m(c,n){s.m(c,n),B(c,t,n)},p(c,[n]){n&1&&ut(o,o=c[0])?(s.d(1),s=yt(c),s.c(),s.m(t.parentNode,t)):s.p(c,n)},i:rt,o:rt,d(c){c&&I(t),s.d(c)}}}function At(e,o,t){let{grid:s}=o,c=qt(s),n=Dt(s),u=Rt(s),f=Ut(s);return e.$$set=l=>{"grid"in l&&t(0,s=l.grid)},[s,c,n,u,f]}class Lt extends It{constructor(o){super(),Ot(this,o,At,zt,ut,{grid:0})}}function xt(e){let o,t,s,c;return o=new gt({props:{grid:e[0]}}),o.$on("cellUpdate",e[2]),o.$on("computeCellNotes",e[3]),s=new Lt({props:{grid:e[0]}}),{c(){Ct(o.$$.fragment),t=y(),Ct(s.$$.fragment)},l(n){kt(o.$$.fragment,n),t=x(n),kt(s.$$.fragment,n)},m(n,u){mt(o,n,u),B(n,t,u),mt(s,n,u),c=!0},p(n,u){const f={};u&1&&(f.grid=n[0]),o.$set(f);const l={};u&1&&(l.grid=n[0]),s.$set(l)},i(n){c||(it(o.$$.fragment,n),it(s.$$.fragment,n),c=!0)},o(n){at(o.$$.fragment,n),at(s.$$.fragment,n),c=!1},d(n){n&&I(t),wt(o,n),wt(s,n)}}}function Kt(e){let o,t,s="Grid controls",c,n,u,f="Prev",l,v,N="New Grid",i,w,d="Solve grid",_,S,T="Reset grid",p,O,J="Remove fixed",q,a,b,R="Notes controls",F,V,j,L="Compute notes",G,h,W="Remove notes",K,U,X="Display hints",ft,z,_t="Hide hints",Y,Z,tt,ht=e[0],Q,et,vt,pt,D=xt(e);return{c(){o=k("div"),t=k("h4"),t.textContent=s,c=y(),n=k("div"),u=k("button"),u.textContent=f,l=y(),v=k("button"),v.textContent=N,i=y(),w=k("button"),w.textContent=d,_=y(),S=k("button"),S.textContent=T,p=y(),O=k("button"),O.textContent=J,q=y(),a=k("div"),b=k("h4"),b.textContent=R,F=y(),V=k("div"),j=k("button"),j.textContent=L,G=y(),h=k("button"),h.textContent=W,K=y(),U=k("button"),U.textContent=X,ft=y(),z=k("button"),z.textContent=_t,Y=y(),Z=k("br"),tt=y(),D.c(),Q=ct(),this.h()},l(C){o=m(C,"DIV",{});var $=M(o);t=m($,"H4",{"data-svelte-h":!0}),E(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=x($),n=m($,"DIV",{class:!0});var g=M(n);u=m(g,"BUTTON",{"data-svelte-h":!0}),E(u)!=="svelte-bivxk4"&&(u.textContent=f),l=x(g),v=m(g,"BUTTON",{"data-svelte-h":!0}),E(v)!=="svelte-1oh0e6u"&&(v.textContent=N),i=x(g),w=m(g,"BUTTON",{"data-svelte-h":!0}),E(w)!=="svelte-1wjgins"&&(w.textContent=d),_=x(g),S=m(g,"BUTTON",{"data-svelte-h":!0}),E(S)!=="svelte-69m1bk"&&(S.textContent=T),p=x(g),O=m(g,"BUTTON",{"data-svelte-h":!0}),E(O)!=="svelte-g7g4he"&&(O.textContent=J),g.forEach(I),$.forEach(I),q=x(C),a=m(C,"DIV",{});var ot=M(a);b=m(ot,"H4",{"data-svelte-h":!0}),E(b)!=="svelte-8gx0az"&&(b.textContent=R),F=x(ot),V=m(ot,"DIV",{class:!0});var P=M(V);j=m(P,"BUTTON",{"data-svelte-h":!0}),E(j)!=="svelte-12olw78"&&(j.textContent=L),G=x(P),h=m(P,"BUTTON",{"data-svelte-h":!0}),E(h)!=="svelte-16z5c15"&&(h.textContent=W),K=x(P),U=m(P,"BUTTON",{"data-svelte-h":!0}),E(U)!=="svelte-mp8c3v"&&(U.textContent=X),ft=x(P),z=m(P,"BUTTON",{"data-svelte-h":!0}),E(z)!=="svelte-eks63j"&&(z.textContent=_t),P.forEach(I),ot.forEach(I),Y=x(C),Z=m(C,"BR",{}),tt=x(C),D.l(C),Q=ct(),this.h()},h(){A(n,"class","grid-controls svelte-17fx0fn"),A(V,"class","notes-controls svelte-17fx0fn")},m(C,$){B(C,o,$),r(o,t),r(o,c),r(o,n),r(n,u),r(n,l),r(n,v),r(n,i),r(n,w),r(n,_),r(n,S),r(n,p),r(n,O),B(C,q,$),B(C,a,$),r(a,b),r(a,F),r(a,V),r(V,j),r(V,G),r(V,h),r(V,K),r(V,U),r(V,ft),r(V,z),B(C,Y,$),B(C,Z,$),B(C,tt,$),D.m(C,$),B(C,Q,$),et=!0,vt||(pt=[H(u,"click",e[9]),H(v,"click",e[10]),H(w,"click",e[11]),H(S,"click",e[12]),H(O,"click",e[13]),H(j,"click",e[14]),H(h,"click",e[15]),H(U,"click",e[16]),H(z,"click",e[17])],vt=!0)},p(C,[$]){$&1&&ut(ht,ht=C[0])?(jt(),at(D,1,1,rt),$t(),D=xt(C),D.c(),it(D,1),D.m(Q.parentNode,Q)):D.p(C,$)},i(C){et||(it(D),et=!0)},o(C){at(D),et=!1},d(C){C&&(I(o),I(q),I(a),I(Y),I(Z),I(tt),I(Q)),D.d(C),vt=!1,Vt(pt)}}}function Qt(e,o,t){let s=bt();const c=[JSON.parse(JSON.stringify(s))],n=a=>{Bt(a.detail.cell,a.detail.update),f()},u=a=>{Tt(s,a.detail.position),f()},f=a=>{t(0,s),!(a!=null&&a.noHistory)&&c.push(JSON.parse(JSON.stringify(s)))},l=a=>{for(let b=0;b<9;b++)for(let R=0;R<9;R++)a[b][R].fixed||(a[b][R].value=void 0,a[b][R].notes=[])},v=()=>{const a=Gt(s);t(0,s=a),f()},N=()=>{for(let a=0;a<9;a++)for(let b=0;b<9;b++)t(0,s[a][b].fixed=!1,s)},i=a=>{Nt.set([...Pt(a),...Jt(a),...Ft(a)])};return[s,c,n,u,f,l,v,N,i,()=>{t(0,s=c.pop()),f({noHistory:!0})},()=>{t(0,s=bt()),f()},()=>{v(),f()},()=>{l(s),f()},()=>{N(),f()},()=>{Mt(s),f()},()=>{Ht(s),f()},()=>{i(s),f()},()=>{Nt.set([]),f()}]}class Zt extends It{constructor(o){super(),Ot(this,o,Qt,Kt,ut,{})}}export{Zt as component};
