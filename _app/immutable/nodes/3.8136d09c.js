import{s as Bt,f as C,a as T,e as bt,g as w,h as K,H as U,c as g,d as N,j as st,i as B,I as h,y as H,J as Ht,C as qt,D as It,l as Dt,m as Jt,K as yt,G as Mt,E as Pt}from"../chunks/scheduler.71239b2e.js";import{S as Vt,i as Ft,t as nt,c as zt,a as lt,b as Nt,d as xt,m as Tt,e as gt,g as At}from"../chunks/index.8ab45ecd.js";import{a as Ot}from"../chunks/store.fe58922c.js";import{m as Kt,g as Lt,c as Wt,S as Qt,G as Xt,u as Yt,r as Zt,s as jt,a as te,b as ee,d as St}from"../chunks/GridStatus.420984b8.js";const oe=e=>{const o=JSON.parse(JSON.stringify(e));return Gt(o),o},Gt=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Kt(e,{row:o,col:t},s)){if(e[o][t].value=s,Gt(e))return!0;e[o][t].value=void 0}return!1}return!0},Rt=()=>{const e=Lt(),o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)o.push({row:t,col:s});for(;o.length;){const t=Math.floor(Math.random()*o.length),{row:s,col:c}=o[t];o.splice(t,1);const l=e[s][c].value;e[s][c].value=void 0,e[s][c].notes=[],e[s][c].fixed=!1,Wt(e)!=="unique"&&(e[s][c].value=l)}for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value&&(e[t][s].fixed=!0);return e},se=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0){const f=e[t][n].notes;for(const p of f)s[p]||(s[p]=[]),s[p].push({row:t,col:n})}if(e[n][t].value===void 0){const f=e[n][t].notes;for(const p of f)c[p]||(c[p]=[]),c[p].push({row:n,col:t})}const _=Math.floor(n/3),x=n%3,d=a+_,v=b+x;if(e[d][v].value===void 0){const f=e[d][v].notes;for(const p of f)l[p]||(l[p]=[]),l[p].push({row:d,col:v})}}for(const n of Object.keys(s)){const _=Number(n);if(s[_].length===1){const{row:x,col:d}=s[_][0];o.push({type:"hidden_single_row",cause:[{row:x,col:d,notes:[_]}]})}}for(const n of Object.keys(c)){const _=Number(n);if(c[_].length===1){const{row:x,col:d}=c[_][0];o.push({type:"hidden_single_col",cause:[{row:x,col:d,notes:[_]}]})}}for(const n of Object.keys(l)){const _=Number(n);if(l[_].length===1){const{row:x,col:d}=l[_][0];o.push({type:"hidden_single_square",cause:[{row:x,col:d,notes:[_]}]})}}}return o},ne=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},le=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0&&e[t][n].notes.length===2){const f=e[t][n].notes.join(",");if(!s[f])s[f]={row:t,col:n};else{const p={row:t,col:n,notes:[...e[t][n].notes]},O={row:s[f].row,col:s[f].col,notes:[...e[t][n].notes]},R=[];for(let k=0;k<9;k++)e[t][k].value!==void 0||e[t][k].notes.join(",")===f||R.push({row:t,col:k,notes:[...e[t][n].notes]});o.push({type:"naked_pair",cause:[p,O],effect:R})}}if(e[n][t].value===void 0&&e[n][t].notes.length===2){const f=e[n][t].notes.join(",");if(!c[f])c[f]={row:n,col:t};else{const p={row:n,col:t,notes:[...e[n][t].notes]},O={row:c[f].row,col:c[f].col,notes:[...e[n][t].notes]},R=[];for(let k=0;k<9;k++)e[k][t].value!==void 0||e[k][t].notes.join(",")===f||R.push({row:k,col:t,notes:[...e[n][t].notes]});o.push({type:"naked_pair",cause:[p,O],effect:R})}}const _=Math.floor(n/3),x=n%3,d=a+_,v=b+x;if(e[d][v].value===void 0&&e[d][v].notes.length===2){const f=e[d][v].notes.join(",");if(!l[f])l[f]={row:d,col:v};else{const p={row:d,col:v,notes:[...e[d][v].notes]},O={row:l[f].row,col:l[f].col,notes:[...e[d][v].notes]},R=[];for(let k=0;k<9;k++){const G=Math.floor(k/3),Q=k%3,q=a+G,j=b+Q;e[q][j].value!==void 0||e[q][j].notes.join(",")===f||R.push({row:q,col:j,notes:[...e[d][v].notes]})}o.push({type:"naked_pair",cause:[p,O],effect:R})}}}}return o};function $t(e,o,t){const s=e.slice();return s[20]=o[t],s}function Et(e){let o,t,s,c;function l(){return e[19](e[20])}return{c(){o=C("button"),t=Dt(e[20]),this.h()},l(a){o=w(a,"BUTTON",{class:!0});var b=K(o);t=Jt(b,e[20]),b.forEach(N),this.h()},h(){st(o,"class","svelte-1jeisuy"),yt(o,"selected",e[1]===e[20])},m(a,b){B(a,o,b),h(o,t),s||(c=H(o,"click",l),s=!0)},p(a,b){e=a,b&2&&yt(o,"selected",e[1]===e[20])},d(a){a&&N(o),s=!1,c()}}}function Ut(e){let o,t,s,c;return o=new Qt({props:{grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),s=new Xt({props:{grid:e[0]}}),{c(){Nt(o.$$.fragment),t=T(),Nt(s.$$.fragment)},l(l){xt(o.$$.fragment,l),t=g(l),xt(s.$$.fragment,l)},m(l,a){Tt(o,l,a),B(l,t,a),Tt(s,l,a),c=!0},p(l,a){const b={};a&1&&(b.grid=l[0]),o.$set(b);const n={};a&1&&(n.grid=l[0]),s.$set(n)},i(l){c||(lt(o.$$.fragment,l),lt(s.$$.fragment,l),c=!0)},o(l){nt(o.$$.fragment,l),nt(s.$$.fragment,l),c=!1},d(l){l&&N(t),gt(o,l),gt(s,l)}}}function ce(e){let o,t,s="Grid controls",c,l,a,b="Prev",n,_,x="New Grid",d,v,f="Solve grid",p,O,R="Reset grid",k,G,Q="Remove fixed",q,j,J,i="Notes controls",S,y,M,ht="Compute notes",ct,P,dt="Remove notes",rt,V,vt="Display hints",at,F,pt="Hide hints",X,I,L,kt="Highlights controls",it,z,Y,Z,tt,mt=e[0],W,et,ut,Ct,ft=Ot([1,2,3,4,5,6,7,8,9]),$=[];for(let r=0;r<9;r+=1)$[r]=Et($t(e,ft,r));let E=Ut(e);return{c(){o=C("div"),t=C("h4"),t.textContent=s,c=T(),l=C("div"),a=C("button"),a.textContent=b,n=T(),_=C("button"),_.textContent=x,d=T(),v=C("button"),v.textContent=f,p=T(),O=C("button"),O.textContent=R,k=T(),G=C("button"),G.textContent=Q,q=T(),j=C("div"),J=C("h4"),J.textContent=i,S=T(),y=C("div"),M=C("button"),M.textContent=ht,ct=T(),P=C("button"),P.textContent=dt,rt=T(),V=C("button"),V.textContent=vt,at=T(),F=C("button"),F.textContent=pt,X=T(),I=C("div"),L=C("h4"),L.textContent=kt,it=T(),z=C("div");for(let r=0;r<9;r+=1)$[r].c();Y=T(),Z=C("br"),tt=T(),E.c(),W=bt(),this.h()},l(r){o=w(r,"DIV",{});var m=K(o);t=w(m,"H4",{"data-svelte-h":!0}),U(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=g(m),l=w(m,"DIV",{class:!0});var u=K(l);a=w(u,"BUTTON",{"data-svelte-h":!0}),U(a)!=="svelte-bivxk4"&&(a.textContent=b),n=g(u),_=w(u,"BUTTON",{"data-svelte-h":!0}),U(_)!=="svelte-1oh0e6u"&&(_.textContent=x),d=g(u),v=w(u,"BUTTON",{"data-svelte-h":!0}),U(v)!=="svelte-1wjgins"&&(v.textContent=f),p=g(u),O=w(u,"BUTTON",{"data-svelte-h":!0}),U(O)!=="svelte-69m1bk"&&(O.textContent=R),k=g(u),G=w(u,"BUTTON",{"data-svelte-h":!0}),U(G)!=="svelte-g7g4he"&&(G.textContent=Q),u.forEach(N),m.forEach(N),q=g(r),j=w(r,"DIV",{});var A=K(j);J=w(A,"H4",{"data-svelte-h":!0}),U(J)!=="svelte-8gx0az"&&(J.textContent=i),S=g(A),y=w(A,"DIV",{class:!0});var D=K(y);M=w(D,"BUTTON",{"data-svelte-h":!0}),U(M)!=="svelte-12olw78"&&(M.textContent=ht),ct=g(D),P=w(D,"BUTTON",{"data-svelte-h":!0}),U(P)!=="svelte-16z5c15"&&(P.textContent=dt),rt=g(D),V=w(D,"BUTTON",{"data-svelte-h":!0}),U(V)!=="svelte-mp8c3v"&&(V.textContent=vt),at=g(D),F=w(D,"BUTTON",{"data-svelte-h":!0}),U(F)!=="svelte-eks63j"&&(F.textContent=pt),D.forEach(N),A.forEach(N),X=g(r),I=w(r,"DIV",{});var ot=K(I);L=w(ot,"H4",{"data-svelte-h":!0}),U(L)!=="svelte-hclwgd"&&(L.textContent=kt),it=g(ot),z=w(ot,"DIV",{class:!0});var wt=K(z);for(let _t=0;_t<9;_t+=1)$[_t].l(wt);wt.forEach(N),ot.forEach(N),Y=g(r),Z=w(r,"BR",{}),tt=g(r),E.l(r),W=bt(),this.h()},h(){st(l,"class","grid-controls svelte-1jeisuy"),st(y,"class","notes-controls svelte-1jeisuy"),st(z,"class","highlights-controls")},m(r,m){B(r,o,m),h(o,t),h(o,c),h(o,l),h(l,a),h(l,n),h(l,_),h(l,d),h(l,v),h(l,p),h(l,O),h(l,k),h(l,G),B(r,q,m),B(r,j,m),h(j,J),h(j,S),h(j,y),h(y,M),h(y,ct),h(y,P),h(y,rt),h(y,V),h(y,at),h(y,F),B(r,X,m),B(r,I,m),h(I,L),h(I,it),h(I,z);for(let u=0;u<9;u+=1)$[u]&&$[u].m(z,null);B(r,Y,m),B(r,Z,m),B(r,tt,m),E.m(r,m),B(r,W,m),et=!0,ut||(Ct=[H(a,"click",e[10]),H(_,"click",e[11]),H(v,"click",e[12]),H(O,"click",e[13]),H(G,"click",e[14]),H(M,"click",e[15]),H(P,"click",e[16]),H(V,"click",e[17]),H(F,"click",e[18])],ut=!0)},p(r,[m]){if(m&2){ft=Ot([1,2,3,4,5,6,7,8,9]);let u;for(u=0;u<9;u+=1){const A=$t(r,ft,u);$[u]?$[u].p(A,m):($[u]=Et(A),$[u].c(),$[u].m(z,null))}for(;u<9;u+=1)$[u].d(1)}m&1&&Bt(mt,mt=r[0])?(At(),nt(E,1,1,Mt),zt(),E=Ut(r),E.c(),lt(E,1),E.m(W.parentNode,W)):E.p(r,m)},i(r){et||(lt(E),et=!0)},o(r){nt(E),et=!1},d(r){r&&(N(o),N(q),N(j),N(X),N(I),N(Y),N(Z),N(tt),N(W)),Ht($,r),E.d(r),ut=!1,qt(Ct)}}}function re(e,o,t){let s;It(e,St,i=>t(1,s=i));let c=Rt();const l=[JSON.parse(JSON.stringify(c))],a=i=>{Yt(i.detail.cell,i.detail.update),n()},b=i=>{Zt(c,i.detail.position),n()},n=i=>{t(0,c),!(i!=null&&i.noHistory)&&l.push(JSON.parse(JSON.stringify(c)))},_=i=>{for(let S=0;S<9;S++)for(let y=0;y<9;y++)i[S][y].fixed||(i[S][y].value=void 0,i[S][y].notes=[])},x=()=>{const i=oe(c);t(0,c=i),n()},d=()=>{for(let i=0;i<9;i++)for(let S=0;S<9;S++)t(0,c[i][S].fixed=!1,c)},v=i=>{jt.set([...ne(i),...se(i),...le(i)])};return[c,s,l,a,b,n,_,x,d,v,()=>{t(0,c=l.pop()),n({noHistory:!0})},()=>{t(0,c=Rt()),n()},()=>{x(),n()},()=>{_(c),n()},()=>{d(),n()},()=>{te(c),n()},()=>{ee(c),n()},()=>{v(c),n()},()=>{jt.set([]),n()},i=>{Pt(St,s=s===i?void 0:i,s)}]}class _e extends Vt{constructor(o){super(),Ft(this,o,re,ce,Bt,{})}}export{_e as component};
