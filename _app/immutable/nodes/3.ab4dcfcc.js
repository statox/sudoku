import{s as Ht,f as w,a as x,e as yt,g as b,h as z,H as $,c as g,d as y,j as ot,i as S,I as h,y as B,J as It,C as Dt,D as Pt,l as Mt,m as Vt,K as Nt,G as At,E as Ft}from"../chunks/scheduler.71239b2e.js";import{S as zt,i as Wt,t as st,c as Jt,a as nt,b as xt,d as gt,m as Tt,e as jt,g as Kt}from"../chunks/index.8ab45ecd.js";import{a as Et}from"../chunks/store.fe58922c.js";import{d as ht,m as Lt,g as Qt,a as Xt,c as Yt,S as Zt,b as Gt,G as te,u as ee,r as oe,s as Ot,e as se,f as ne,h as le,i as Rt}from"../chunks/GridStatus.a5ae0323.js";const ce=e=>{const o=ht(e);return qt(o),o},qt=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Lt(e,{row:o,col:t},s)){if(e[o][t].value=s,qt(e))return!0;e[o][t].value=void 0}return!1}return!0},$t=()=>{const e=Qt(Xt()),o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)o.push({row:t,col:s});for(;o.length;){const t=Math.floor(Math.random()*o.length),{row:s,col:c}=o[t];o.splice(t,1);const l=e[s][c].value;e[s][c].value=void 0,e[s][c].notes=[],e[s][c].fixed=!1,Yt(e)!=="unique"&&(e[s][c].value=l)}for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value&&(e[t][s].fixed=!0);return e},re=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),m=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0){const f=e[t][n].notes;for(const v of f)s[v]||(s[v]=[]),s[v].push({row:t,col:n})}if(e[n][t].value===void 0){const f=e[n][t].notes;for(const v of f)c[v]||(c[v]=[]),c[v].push({row:n,col:t})}const _=Math.floor(n/3),N=n%3,d=a+_,p=m+N;if(e[d][p].value===void 0){const f=e[d][p].notes;for(const v of f)l[v]||(l[v]=[]),l[v].push({row:d,col:p})}}for(const n of Object.keys(s)){const _=Number(n);if(s[_].length===1){const{row:N,col:d}=s[_][0];o.push({type:"hidden_single_row",cause:[{row:N,col:d,notes:[_]}]})}}for(const n of Object.keys(c)){const _=Number(n);if(c[_].length===1){const{row:N,col:d}=c[_][0];o.push({type:"hidden_single_col",cause:[{row:N,col:d,notes:[_]}]})}}for(const n of Object.keys(l)){const _=Number(n);if(l[_].length===1){const{row:N,col:d}=l[_][0];o.push({type:"hidden_single_square",cause:[{row:N,col:d,notes:[_]}]})}}}return o},ae=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},ie=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),m=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0&&e[t][n].notes.length===2){const f=e[t][n].notes.join(",");if(!s[f])s[f]={row:t,col:n};else{const v={row:t,col:n,notes:[...e[t][n].notes]},T={row:s[f].row,col:s[f].col,notes:[...e[t][n].notes]},E=[];for(let k=0;k<9;k++)e[t][k].value!==void 0||e[t][k].notes.join(",")===f||E.push({row:t,col:k,notes:[...e[t][n].notes]});o.push({type:"naked_pair",cause:[v,T],effect:E})}}if(e[n][t].value===void 0&&e[n][t].notes.length===2){const f=e[n][t].notes.join(",");if(!c[f])c[f]={row:n,col:t};else{const v={row:n,col:t,notes:[...e[n][t].notes]},T={row:c[f].row,col:c[f].col,notes:[...e[n][t].notes]},E=[];for(let k=0;k<9;k++)e[k][t].value!==void 0||e[k][t].notes.join(",")===f||E.push({row:k,col:t,notes:[...e[n][t].notes]});o.push({type:"naked_pair",cause:[v,T],effect:E})}}const _=Math.floor(n/3),N=n%3,d=a+_,p=m+N;if(e[d][p].value===void 0&&e[d][p].notes.length===2){const f=e[d][p].notes.join(",");if(!l[f])l[f]={row:d,col:p};else{const v={row:d,col:p,notes:[...e[d][p].notes]},T={row:l[f].row,col:l[f].col,notes:[...e[d][p].notes]},E=[];for(let k=0;k<9;k++){const U=Math.floor(k/3),L=k%3,H=a+U,j=m+L;e[H][j].value!==void 0||e[H][j].notes.join(",")===f||E.push({row:H,col:j,notes:[...e[d][p].notes]})}o.push({type:"naked_pair",cause:[v,T],effect:E})}}}}return o};function St(e,o,t){const s=e.slice();return s[19]=o[t],s}function Ut(e){let o,t,s,c;function l(){return e[18](e[19])}return{c(){o=w("button"),t=Mt(e[19]),this.h()},l(a){o=b(a,"BUTTON",{class:!0});var m=z(o);t=Vt(m,e[19]),m.forEach(y),this.h()},h(){ot(o,"class","svelte-1jeisuy"),Nt(o,"selected",e[1]===e[19])},m(a,m){S(a,o,m),h(o,t),s||(c=B(o,"click",l),s=!0)},p(a,m){e=a,m&2&&Nt(o,"selected",e[1]===e[19])},d(a){a&&y(o),s=!1,c()}}}function Bt(e){let o,t,s,c;return o=new Zt({props:{gridErrors:Gt(e[0]),grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),s=new te({props:{grid:e[0]}}),{c(){xt(o.$$.fragment),t=x(),xt(s.$$.fragment)},l(l){gt(o.$$.fragment,l),t=g(l),gt(s.$$.fragment,l)},m(l,a){Tt(o,l,a),S(l,t,a),Tt(s,l,a),c=!0},p(l,a){const m={};a&1&&(m.gridErrors=Gt(l[0])),a&1&&(m.grid=l[0]),o.$set(m);const n={};a&1&&(n.grid=l[0]),s.$set(n)},i(l){c||(nt(o.$$.fragment,l),nt(s.$$.fragment,l),c=!0)},o(l){st(o.$$.fragment,l),st(s.$$.fragment,l),c=!1},d(l){l&&y(t),jt(o,l),jt(s,l)}}}function ue(e){let o,t,s="Grid controls",c,l,a,m="Prev",n,_,N="New Grid",d,p,f="Solve grid",v,T,E="Reset grid",k,U,L="Remove fixed",H,j,i,W="Notes controls",lt,G,D,dt="Compute notes",ct,P,vt="Remove notes",rt,M,pt="Display hints",at,V,kt="Hide hints",Q,q,J,mt="Highlights controls",it,A,X,Y,Z,Ct=e[0],K,tt,ut,wt,ft=Et([1,2,3,4,5,6,7,8,9]),O=[];for(let r=0;r<9;r+=1)O[r]=Ut(St(e,ft,r));let R=Bt(e);return{c(){o=w("div"),t=w("h4"),t.textContent=s,c=x(),l=w("div"),a=w("button"),a.textContent=m,n=x(),_=w("button"),_.textContent=N,d=x(),p=w("button"),p.textContent=f,v=x(),T=w("button"),T.textContent=E,k=x(),U=w("button"),U.textContent=L,H=x(),j=w("div"),i=w("h4"),i.textContent=W,lt=x(),G=w("div"),D=w("button"),D.textContent=dt,ct=x(),P=w("button"),P.textContent=vt,rt=x(),M=w("button"),M.textContent=pt,at=x(),V=w("button"),V.textContent=kt,Q=x(),q=w("div"),J=w("h4"),J.textContent=mt,it=x(),A=w("div");for(let r=0;r<9;r+=1)O[r].c();X=x(),Y=w("br"),Z=x(),R.c(),K=yt(),this.h()},l(r){o=b(r,"DIV",{});var C=z(o);t=b(C,"H4",{"data-svelte-h":!0}),$(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=g(C),l=b(C,"DIV",{class:!0});var u=z(l);a=b(u,"BUTTON",{"data-svelte-h":!0}),$(a)!=="svelte-bivxk4"&&(a.textContent=m),n=g(u),_=b(u,"BUTTON",{"data-svelte-h":!0}),$(_)!=="svelte-1oh0e6u"&&(_.textContent=N),d=g(u),p=b(u,"BUTTON",{"data-svelte-h":!0}),$(p)!=="svelte-1wjgins"&&(p.textContent=f),v=g(u),T=b(u,"BUTTON",{"data-svelte-h":!0}),$(T)!=="svelte-hocye6"&&(T.textContent=E),k=g(u),U=b(u,"BUTTON",{"data-svelte-h":!0}),$(U)!=="svelte-g7g4he"&&(U.textContent=L),u.forEach(y),C.forEach(y),H=g(r),j=b(r,"DIV",{});var F=z(j);i=b(F,"H4",{"data-svelte-h":!0}),$(i)!=="svelte-8gx0az"&&(i.textContent=W),lt=g(F),G=b(F,"DIV",{class:!0});var I=z(G);D=b(I,"BUTTON",{"data-svelte-h":!0}),$(D)!=="svelte-12olw78"&&(D.textContent=dt),ct=g(I),P=b(I,"BUTTON",{"data-svelte-h":!0}),$(P)!=="svelte-16z5c15"&&(P.textContent=vt),rt=g(I),M=b(I,"BUTTON",{"data-svelte-h":!0}),$(M)!=="svelte-mp8c3v"&&(M.textContent=pt),at=g(I),V=b(I,"BUTTON",{"data-svelte-h":!0}),$(V)!=="svelte-eks63j"&&(V.textContent=kt),I.forEach(y),F.forEach(y),Q=g(r),q=b(r,"DIV",{});var et=z(q);J=b(et,"H4",{"data-svelte-h":!0}),$(J)!=="svelte-hclwgd"&&(J.textContent=mt),it=g(et),A=b(et,"DIV",{class:!0});var bt=z(A);for(let _t=0;_t<9;_t+=1)O[_t].l(bt);bt.forEach(y),et.forEach(y),X=g(r),Y=b(r,"BR",{}),Z=g(r),R.l(r),K=yt(),this.h()},h(){ot(l,"class","grid-controls svelte-1jeisuy"),ot(G,"class","notes-controls svelte-1jeisuy"),ot(A,"class","highlights-controls")},m(r,C){S(r,o,C),h(o,t),h(o,c),h(o,l),h(l,a),h(l,n),h(l,_),h(l,d),h(l,p),h(l,v),h(l,T),h(l,k),h(l,U),S(r,H,C),S(r,j,C),h(j,i),h(j,lt),h(j,G),h(G,D),h(G,ct),h(G,P),h(G,rt),h(G,M),h(G,at),h(G,V),S(r,Q,C),S(r,q,C),h(q,J),h(q,it),h(q,A);for(let u=0;u<9;u+=1)O[u]&&O[u].m(A,null);S(r,X,C),S(r,Y,C),S(r,Z,C),R.m(r,C),S(r,K,C),tt=!0,ut||(wt=[B(a,"click",e[9]),B(_,"click",e[10]),B(p,"click",e[11]),B(T,"click",e[12]),B(U,"click",e[13]),B(D,"click",e[14]),B(P,"click",e[15]),B(M,"click",e[16]),B(V,"click",e[17])],ut=!0)},p(r,[C]){if(C&2){ft=Et([1,2,3,4,5,6,7,8,9]);let u;for(u=0;u<9;u+=1){const F=St(r,ft,u);O[u]?O[u].p(F,C):(O[u]=Ut(F),O[u].c(),O[u].m(A,null))}for(;u<9;u+=1)O[u].d(1)}C&1&&Ht(Ct,Ct=r[0])?(Kt(),st(R,1,1,At),Jt(),R=Bt(r),R.c(),nt(R,1),R.m(K.parentNode,K)):R.p(r,C)},i(r){tt||(nt(R),tt=!0)},o(r){st(R),tt=!1},d(r){r&&(y(o),y(H),y(j),y(Q),y(q),y(X),y(Y),y(Z),y(K)),It(O,r),R.d(r),ut=!1,Dt(wt)}}}function fe(e,o,t){let s;Pt(e,Rt,i=>t(1,s=i));let c=$t();const l=[ht(c)],a=i=>{ee(i.detail.cell,i.detail.update),n()},m=i=>{oe(c,i.detail.position),n()},n=i=>{t(0,c),!(i!=null&&i.noHistory)&&l.push(ht(c))},_=()=>{t(0,c=ce(c)),n()},N=()=>{for(let i=0;i<9;i++)for(let W=0;W<9;W++)t(0,c[i][W].fixed=!1,c)},d=i=>{Ot.set([...ae(i),...re(i),...ie(i)])};return[c,s,l,a,m,n,_,N,d,()=>{t(0,c=l.pop()),n({noHistory:!0})},()=>{t(0,c=$t()),n()},()=>{_(),n()},()=>{se(c),n()},()=>{N(),n()},()=>{ne(c),n()},()=>{le(c),n()},()=>{d(c),n()},()=>{Ot.set([]),n()},i=>{Ft(Rt,s=s===i?void 0:i,s)}]}class pe extends zt{constructor(o){super(),Wt(this,o,fe,ue,Ht,{})}}export{pe as component};
