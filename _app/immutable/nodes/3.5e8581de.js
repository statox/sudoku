import{s as at,e as lt,i as J,G as nt,d as m,f as v,a as p,l as et,g as _,h as H,H as y,c as C,m as ot,j as P,J as st,I as r,y as B,C as It}from"../chunks/scheduler.a9a47073.js";import{S as xt,i as yt,t as rt,c as Tt,a as it,b as ht,d as pt,m as Ct,e as mt,g as Vt}from"../chunks/index.4654634b.js";import{m as $t,g as Ot,a as Dt,b as Et,c as Ut,d as kt,S as Gt,u as Bt,s as bt}from"../chunks/Sudoku.10a920b3.js";const Ht=s=>{const t=JSON.parse(JSON.stringify(s));return wt(t),t},wt=s=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(s[t][o].value===void 0){for(let e=1;e<=9;e++)if($t(s,{row:t,col:o},e)){if(s[t][o].value=e,wt(s))return!0;s[t][o].value=void 0}return!1}return!0},dt=(s,t,o,e)=>{if(!e||s[t][o].value)return!1;const n=s[t][o].notes.indexOf(e);return n===-1?!1:(s[t][o].notes.splice(n,1),!0)},Rt=s=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)s[t][o].notes=[]},St=(s,t)=>{const{row:o,col:e}=t;if(s[o][e].value){s[o][e].notes=[];return}s[o][e].notes=[1,2,3,4,5,6,7,8,9];const n=Math.floor(e/3),l=Math.floor(o/3);for(let i=0;i<9;i++){const a=s[i][e].value;dt(s,o,e,a);const f=s[o][i].value;dt(s,o,e,f);const g=Math.floor(i/3),V=i%3,N=s[3*l+g][3*n+V].value;dt(s,o,e,N)}return s[o][e].notes},jt=s=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)St(s,{row:t,col:o})},Jt=s=>{const t=[];for(let o=0;o<9;o++){const e={},n={};for(let l=0;l<9;l++){if(s[o][l].value===void 0){const i=s[o][l].notes;for(const a of i)e[a]||(e[a]=[]),e[a].push({row:o,col:l})}if(s[l][o].value===void 0){const i=s[l][o].notes;for(const a of i)n[a]||(n[a]=[]),n[a].push({row:l,col:o})}}for(const l of Object.keys(e)){const i=Number(l);if(e[i].length===1){const{row:a,col:f}=e[i][0];t.push({type:"hidden_single_row",cause:[{row:a,col:f,notes:[i]}]})}}for(const l of Object.keys(n)){const i=Number(l);if(n[i].length===1){const{row:a,col:f}=n[i][0];t.push({type:"hidden_single_col",cause:[{row:a,col:f,notes:[i]}]})}}}return t},qt=s=>{const t=[];for(let o=0;o<9;o++)for(let e=0;e<9;e++)s[o][e].value===void 0&&s[o][e].notes.length===1&&t.push({type:"lone_single",cause:[{row:o,col:e,notes:[s[o][e].notes[0]]}]});return t};function gt(s){let t,o,e="grid has errors",n,l,i="grid is filled",a,f,g="grid is valid",V,N,$="grid has solutions",q,I,O=s[1]?"Has errors":"No errors",F,R,k,A=s[2]?"Is filled":"Not filled",U,c,u,S=s[3]?"Is valid":"Not valid",z,b,x,L;return{c(){t=v("div"),o=v("div"),o.textContent=e,n=p(),l=v("div"),l.textContent=i,a=p(),f=v("div"),f.textContent=g,V=p(),N=v("div"),N.textContent=$,q=p(),I=v("div"),F=et(O),R=p(),k=v("div"),U=et(A),c=p(),u=v("div"),z=et(S),b=p(),x=v("div"),L=et(s[4]),this.h()},l(G){t=_(G,"DIV",{class:!0});var d=H(t);o=_(d,"DIV",{"data-svelte-h":!0}),y(o)!=="svelte-1hlqbal"&&(o.textContent=e),n=C(d),l=_(d,"DIV",{"data-svelte-h":!0}),y(l)!=="svelte-ekf37s"&&(l.textContent=i),a=C(d),f=_(d,"DIV",{"data-svelte-h":!0}),y(f)!=="svelte-16e0vl8"&&(f.textContent=g),V=C(d),N=_(d,"DIV",{"data-svelte-h":!0}),y(N)!=="svelte-1tjrozg"&&(N.textContent=$),q=C(d),I=_(d,"DIV",{class:!0});var W=H(I);F=ot(W,O),W.forEach(m),R=C(d),k=_(d,"DIV",{class:!0});var K=H(k);U=ot(K,A),K.forEach(m),c=C(d),u=_(d,"DIV",{class:!0});var D=H(u);z=ot(D,S),D.forEach(m),b=C(d),x=_(d,"DIV",{class:!0});var X=H(x);L=ot(X,s[4]),X.forEach(m),d.forEach(m),this.h()},h(){P(I,"class","status svelte-1csoeu4"),st(I,"red",s[1]),P(k,"class","status svelte-1csoeu4"),st(k,"red",!s[2]),P(u,"class","status svelte-1csoeu4"),st(u,"red",!s[3]),P(x,"class","status svelte-1csoeu4"),st(x,"red",s[4]!=="unique"),P(t,"class","grid-status svelte-1csoeu4")},m(G,d){J(G,t,d),r(t,o),r(t,n),r(t,l),r(t,a),r(t,f),r(t,V),r(t,N),r(t,q),r(t,I),r(I,F),r(t,R),r(t,k),r(k,U),r(t,c),r(t,u),r(u,z),r(t,b),r(t,x),r(x,L)},p:nt,d(G){G&&m(t)}}}function Ft(s){let t=s[0],o,e=gt(s);return{c(){e.c(),o=lt()},l(n){e.l(n),o=lt()},m(n,l){e.m(n,l),J(n,o,l)},p(n,[l]){l&1&&at(t,t=n[0])?(e.d(1),e=gt(n),e.c(),e.m(o.parentNode,o)):e.p(n,l)},i:nt,o:nt,d(n){n&&m(o),e.d(n)}}}function zt(s,t,o){let{grid:e}=t,n=Ot(e),l=Dt(e),i=Et(e),a=Ut(e);return s.$$set=f=>{"grid"in f&&o(0,e=f.grid)},[e,n,l,i,a]}class Mt extends xt{constructor(t){super(),yt(this,t,zt,Ft,at,{grid:0})}}function Nt(s){let t,o,e,n;return t=new Gt({props:{grid:s[0]}}),t.$on("cellUpdate",s[2]),t.$on("computeCellNotes",s[3]),e=new Mt({props:{grid:s[0]}}),{c(){ht(t.$$.fragment),o=p(),ht(e.$$.fragment)},l(l){pt(t.$$.fragment,l),o=C(l),pt(e.$$.fragment,l)},m(l,i){Ct(t,l,i),J(l,o,i),Ct(e,l,i),n=!0},p(l,i){const a={};i&1&&(a.grid=l[0]),t.$set(a);const f={};i&1&&(f.grid=l[0]),e.$set(f)},i(l){n||(it(t.$$.fragment,l),it(e.$$.fragment,l),n=!0)},o(l){rt(t.$$.fragment,l),rt(e.$$.fragment,l),n=!1},d(l){l&&m(o),mt(t,l),mt(e,l)}}}function Pt(s){let t,o,e="Grid controls",n,l,i,a="Prev",f,g,V="New Grid",N,$,q="Solve grid",I,O,F="Reset grid",R,k,A="Remove fixed",U,c,u,S="Notes controls",z,b,x,L="Compute notes",G,d,W="Remove notes",K,D,X="Display hints",ct,M,ft="Hide hints",Y,vt=s[0],Q,Z,ut,_t,T=Nt(s);return{c(){t=v("div"),o=v("h4"),o.textContent=e,n=p(),l=v("div"),i=v("button"),i.textContent=a,f=p(),g=v("button"),g.textContent=V,N=p(),$=v("button"),$.textContent=q,I=p(),O=v("button"),O.textContent=F,R=p(),k=v("button"),k.textContent=A,U=p(),c=v("div"),u=v("h4"),u.textContent=S,z=p(),b=v("div"),x=v("button"),x.textContent=L,G=p(),d=v("button"),d.textContent=W,K=p(),D=v("button"),D.textContent=X,ct=p(),M=v("button"),M.textContent=ft,Y=p(),T.c(),Q=lt(),this.h()},l(h){t=_(h,"DIV",{});var w=H(t);o=_(w,"H4",{"data-svelte-h":!0}),y(o)!=="svelte-1h8cvtc"&&(o.textContent=e),n=C(w),l=_(w,"DIV",{class:!0});var E=H(l);i=_(E,"BUTTON",{"data-svelte-h":!0}),y(i)!=="svelte-bivxk4"&&(i.textContent=a),f=C(E),g=_(E,"BUTTON",{"data-svelte-h":!0}),y(g)!=="svelte-1oh0e6u"&&(g.textContent=V),N=C(E),$=_(E,"BUTTON",{"data-svelte-h":!0}),y($)!=="svelte-1wjgins"&&($.textContent=q),I=C(E),O=_(E,"BUTTON",{"data-svelte-h":!0}),y(O)!=="svelte-69m1bk"&&(O.textContent=F),R=C(E),k=_(E,"BUTTON",{"data-svelte-h":!0}),y(k)!=="svelte-g7g4he"&&(k.textContent=A),E.forEach(m),w.forEach(m),U=C(h),c=_(h,"DIV",{});var tt=H(c);u=_(tt,"H4",{"data-svelte-h":!0}),y(u)!=="svelte-8gx0az"&&(u.textContent=S),z=C(tt),b=_(tt,"DIV",{class:!0});var j=H(b);x=_(j,"BUTTON",{"data-svelte-h":!0}),y(x)!=="svelte-12olw78"&&(x.textContent=L),G=C(j),d=_(j,"BUTTON",{"data-svelte-h":!0}),y(d)!=="svelte-16z5c15"&&(d.textContent=W),K=C(j),D=_(j,"BUTTON",{"data-svelte-h":!0}),y(D)!=="svelte-mp8c3v"&&(D.textContent=X),ct=C(j),M=_(j,"BUTTON",{"data-svelte-h":!0}),y(M)!=="svelte-eks63j"&&(M.textContent=ft),j.forEach(m),tt.forEach(m),Y=C(h),T.l(h),Q=lt(),this.h()},h(){P(l,"class","grid-controls svelte-17fx0fn"),P(b,"class","notes-controls svelte-17fx0fn")},m(h,w){J(h,t,w),r(t,o),r(t,n),r(t,l),r(l,i),r(l,f),r(l,g),r(l,N),r(l,$),r(l,I),r(l,O),r(l,R),r(l,k),J(h,U,w),J(h,c,w),r(c,u),r(c,z),r(c,b),r(b,x),r(b,G),r(b,d),r(b,K),r(b,D),r(b,ct),r(b,M),J(h,Y,w),T.m(h,w),J(h,Q,w),Z=!0,ut||(_t=[B(i,"click",s[9]),B(g,"click",s[10]),B($,"click",s[11]),B(O,"click",s[12]),B(k,"click",s[13]),B(x,"click",s[14]),B(d,"click",s[15]),B(D,"click",s[16]),B(M,"click",s[17])],ut=!0)},p(h,[w]){w&1&&at(vt,vt=h[0])?(Vt(),rt(T,1,1,nt),Tt(),T=Nt(h),T.c(),it(T,1),T.m(Q.parentNode,Q)):T.p(h,w)},i(h){Z||(it(T),Z=!0)},o(h){rt(T),Z=!1},d(h){h&&(m(t),m(U),m(c),m(Y),m(Q)),T.d(h),ut=!1,It(_t)}}}function At(s,t,o){let e=kt();const n=[JSON.parse(JSON.stringify(e))],l=c=>{Bt(c.detail.cell,c.detail.update),a()},i=c=>{St(e,c.detail.position),a()},a=c=>{o(0,e),!(c!=null&&c.noHistory)&&n.push(JSON.parse(JSON.stringify(e)))},f=c=>{for(let u=0;u<9;u++)for(let S=0;S<9;S++)c[u][S].fixed||(c[u][S].value=void 0,c[u][S].notes=[])},g=()=>{const c=Ht(e);o(0,e=c),a()},V=()=>{for(let c=0;c<9;c++)for(let u=0;u<9;u++)o(0,e[c][u].fixed=!1,e)},N=c=>{const u=qt(c),S=Jt(c);bt.set([...u,...S])};return[e,n,l,i,a,f,g,V,N,()=>{o(0,e=n.pop()),a({noHistory:!0})},()=>{o(0,e=kt()),a()},()=>{g(),a()},()=>{f(e),a()},()=>{V(),a()},()=>{jt(e),a()},()=>{Rt(e),a()},()=>{N(e),a()},()=>{bt.set([]),a()}]}class Wt extends xt{constructor(t){super(),yt(this,t,At,Pt,at,{})}}export{Wt as component};
