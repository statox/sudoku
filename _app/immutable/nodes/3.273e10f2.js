import{s as pt,e as vt,i as H,G as dt,d as y,f as h,a as x,l as lt,g as p,h as G,H as D,c as I,m as nt,j as F,J as et,I as r,y as J,K as Ft,C as zt,D as At,E as Kt}from"../chunks/scheduler.cf09a957.js";import{S as Gt,i as Mt,t as _t,c as Lt,a as ht,b as Ot,d as Et,m as St,e as jt,g as Qt}from"../chunks/index.afa9592b.js";import{a as gt}from"../chunks/store.f1fd27f6.js";import{m as Wt,g as Xt,a as Yt,b as Zt,c as te,d as Dt,S as ee,u as oe,s as $t,e as qt}from"../chunks/Sudoku.3fbdc0e0.js";const se=e=>{const o=JSON.parse(JSON.stringify(e));return Jt(o),o},Jt=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Wt(e,{row:o,col:t},s)){if(e[o][t].value=s,Jt(e))return!0;e[o][t].value=void 0}return!1}return!0},yt=(e,o,t,s)=>{if(!s||e[o][t].value)return!1;const c=e[o][t].notes.indexOf(s);return c===-1?!1:(e[o][t].notes.splice(c,1),!0)},le=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)e[o][t].notes=[]},Pt=(e,o)=>{const{row:t,col:s}=o;if(e[t][s].value){e[t][s].notes=[];return}e[t][s].notes=[1,2,3,4,5,6,7,8,9];const c=Math.floor(s/3),l=Math.floor(t/3);for(let a=0;a<9;a++){const C=e[a][s].value;yt(e,t,s,C);const n=e[t][a].value;yt(e,t,s,n);const v=Math.floor(a/3),T=a%3,u=e[3*l+v][3*c+T].value;yt(e,t,s,u)}return e[t][s].notes},ne=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)Pt(e,{row:o,col:t})},ce=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),C=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0){const d=e[t][n].notes;for(const _ of d)s[_]||(s[_]=[]),s[_].push({row:t,col:n})}if(e[n][t].value===void 0){const d=e[n][t].notes;for(const _ of d)c[_]||(c[_]=[]),c[_].push({row:n,col:t})}const v=Math.floor(n/3),T=n%3,u=a+v,m=C+T;if(e[u][m].value===void 0){const d=e[u][m].notes;for(const _ of d)l[_]||(l[_]=[]),l[_].push({row:u,col:m})}}for(const n of Object.keys(s)){const v=Number(n);if(s[v].length===1){const{row:T,col:u}=s[v][0];o.push({type:"hidden_single_row",cause:[{row:T,col:u,notes:[v]}]})}}for(const n of Object.keys(c)){const v=Number(n);if(c[v].length===1){const{row:T,col:u}=c[v][0];o.push({type:"hidden_single_col",cause:[{row:T,col:u,notes:[v]}]})}}for(const n of Object.keys(l)){const v=Number(n);if(l[v].length===1){const{row:T,col:u}=l[v][0];o.push({type:"hidden_single_square",cause:[{row:T,col:u,notes:[v]}]})}}}return o},re=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},ae=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),C=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0&&e[t][n].notes.length===2){const d=e[t][n].notes.join(",");if(!s[d])s[d]={row:t,col:n};else{const _={row:t,col:n,notes:[...e[t][n].notes]},E={row:s[d].row,col:s[d].col,notes:[...e[t][n].notes]},g=[];for(let b=0;b<9;b++)e[t][b].value!==void 0||e[t][b].notes.join(",")===d||g.push({row:t,col:b,notes:[...e[t][n].notes]});o.push({type:"naked_pair",cause:[_,E],effect:g})}}if(e[n][t].value===void 0&&e[n][t].notes.length===2){const d=e[n][t].notes.join(",");if(!c[d])c[d]={row:n,col:t};else{const _={row:n,col:t,notes:[...e[n][t].notes]},E={row:c[d].row,col:c[d].col,notes:[...e[n][t].notes]},g=[];for(let b=0;b<9;b++)e[b][t].value!==void 0||e[b][t].notes.join(",")===d||g.push({row:b,col:t,notes:[...e[n][t].notes]});o.push({type:"naked_pair",cause:[_,E],effect:g})}}const v=Math.floor(n/3),T=n%3,u=a+v,m=C+T;if(e[u][m].value===void 0&&e[u][m].notes.length===2){const d=e[u][m].notes.join(",");if(!l[d])l[d]={row:u,col:m};else{const _={row:u,col:m,notes:[...e[u][m].notes]},E={row:l[d].row,col:l[d].col,notes:[...e[u][m].notes]},g=[];for(let b=0;b<9;b++){const O=Math.floor(b/3),z=b%3,R=a+O,S=C+z;e[R][S].value!==void 0||e[R][S].notes.join(",")===d||g.push({row:R,col:S,notes:[...e[u][m].notes]})}o.push({type:"naked_pair",cause:[_,E],effect:g})}}}}return o};function Rt(e){let o,t,s="grid has errors",c,l,a="grid is filled",C,n,v="grid is valid",T,u,m="grid has solutions",d,_,E=e[1]?"Has errors":"No errors",g,b,O,z=e[2]?"Is filled":"Not filled",R,S,$,f=e[3]?"Is valid":"Not valid",j,N,q,X;return{c(){o=h("div"),t=h("div"),t.textContent=s,c=x(),l=h("div"),l.textContent=a,C=x(),n=h("div"),n.textContent=v,T=x(),u=h("div"),u.textContent=m,d=x(),_=h("div"),g=lt(E),b=x(),O=h("div"),R=lt(z),S=x(),$=h("div"),j=lt(f),N=x(),q=h("div"),X=lt(e[4]),this.h()},l(P){o=p(P,"DIV",{class:!0});var w=G(o);t=p(w,"DIV",{"data-svelte-h":!0}),D(t)!=="svelte-1hlqbal"&&(t.textContent=s),c=I(w),l=p(w,"DIV",{"data-svelte-h":!0}),D(l)!=="svelte-ekf37s"&&(l.textContent=a),C=I(w),n=p(w,"DIV",{"data-svelte-h":!0}),D(n)!=="svelte-16e0vl8"&&(n.textContent=v),T=I(w),u=p(w,"DIV",{"data-svelte-h":!0}),D(u)!=="svelte-1tjrozg"&&(u.textContent=m),d=I(w),_=p(w,"DIV",{class:!0});var ot=G(_);g=nt(ot,E),ot.forEach(y),b=I(w),O=p(w,"DIV",{class:!0});var Y=G(O);R=nt(Y,z),Y.forEach(y),S=I(w),$=p(w,"DIV",{class:!0});var M=G($);j=nt(M,f),M.forEach(y),N=I(w),q=p(w,"DIV",{class:!0});var st=G(q);X=nt(st,e[4]),st.forEach(y),w.forEach(y),this.h()},h(){F(_,"class","status svelte-1csoeu4"),et(_,"red",e[1]),F(O,"class","status svelte-1csoeu4"),et(O,"red",!e[2]),F($,"class","status svelte-1csoeu4"),et($,"red",!e[3]),F(q,"class","status svelte-1csoeu4"),et(q,"red",e[4]!=="unique"),F(o,"class","grid-status svelte-1csoeu4")},m(P,w){H(P,o,w),r(o,t),r(o,c),r(o,l),r(o,C),r(o,n),r(o,T),r(o,u),r(o,d),r(o,_),r(_,g),r(o,b),r(o,O),r(O,R),r(o,S),r(o,$),r($,j),r(o,N),r(o,q),r(q,X)},p:dt,d(P){P&&y(o)}}}function ie(e){let o=e[0],t,s=Rt(e);return{c(){s.c(),t=vt()},l(c){s.l(c),t=vt()},m(c,l){s.m(c,l),H(c,t,l)},p(c,[l]){l&1&&pt(o,o=c[0])?(s.d(1),s=Rt(c),s.c(),s.m(t.parentNode,t)):s.p(c,l)},i:dt,o:dt,d(c){c&&y(t),s.d(c)}}}function ue(e,o,t){let{grid:s}=o,c=Xt(s),l=Yt(s),a=Zt(s),C=te(s);return e.$$set=n=>{"grid"in n&&t(0,s=n.grid)},[s,c,l,a,C]}class fe extends Gt{constructor(o){super(),Mt(this,o,ue,ie,pt,{grid:0})}}function Ht(e,o,t){const s=e.slice();return s[20]=o[t],s}function Ut(e){let o,t,s,c;function l(){return e[19](e[20])}return{c(){o=h("button"),t=lt(e[20]),this.h()},l(a){o=p(a,"BUTTON",{class:!0});var C=G(o);t=nt(C,e[20]),C.forEach(y),this.h()},h(){F(o,"class","svelte-1jeisuy"),et(o,"selected",e[1]===e[20])},m(a,C){H(a,o,C),r(o,t),s||(c=J(o,"click",l),s=!0)},p(a,C){e=a,C&2&&et(o,"selected",e[1]===e[20])},d(a){a&&y(o),s=!1,c()}}}function Bt(e){let o,t,s,c;return o=new ee({props:{grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),s=new fe({props:{grid:e[0]}}),{c(){Ot(o.$$.fragment),t=x(),Ot(s.$$.fragment)},l(l){Et(o.$$.fragment,l),t=I(l),Et(s.$$.fragment,l)},m(l,a){St(o,l,a),H(l,t,a),St(s,l,a),c=!0},p(l,a){const C={};a&1&&(C.grid=l[0]),o.$set(C);const n={};a&1&&(n.grid=l[0]),s.$set(n)},i(l){c||(ht(o.$$.fragment,l),ht(s.$$.fragment,l),c=!0)},o(l){_t(o.$$.fragment,l),_t(s.$$.fragment,l),c=!1},d(l){l&&y(t),jt(o,l),jt(s,l)}}}function ve(e){let o,t,s="Grid controls",c,l,a,C="Prev",n,v,T="New Grid",u,m,d="Solve grid",_,E,g="Reset grid",b,O,z="Remove fixed",R,S,$,f="Notes controls",j,N,q,X="Compute notes",P,w,ot="Remove notes",Y,M,st="Display hints",kt,L,Nt="Hide hints",ct,A,Z,xt="Highlights controls",Ct,Q,rt,at,it,It=e[0],tt,ut,mt,Tt,wt=gt([1,2,3,4,5,6,7,8,9]),U=[];for(let i=0;i<9;i+=1)U[i]=Ut(Ht(e,wt,i));let B=Bt(e);return{c(){o=h("div"),t=h("h4"),t.textContent=s,c=x(),l=h("div"),a=h("button"),a.textContent=C,n=x(),v=h("button"),v.textContent=T,u=x(),m=h("button"),m.textContent=d,_=x(),E=h("button"),E.textContent=g,b=x(),O=h("button"),O.textContent=z,R=x(),S=h("div"),$=h("h4"),$.textContent=f,j=x(),N=h("div"),q=h("button"),q.textContent=X,P=x(),w=h("button"),w.textContent=ot,Y=x(),M=h("button"),M.textContent=st,kt=x(),L=h("button"),L.textContent=Nt,ct=x(),A=h("div"),Z=h("h4"),Z.textContent=xt,Ct=x(),Q=h("div");for(let i=0;i<9;i+=1)U[i].c();rt=x(),at=h("br"),it=x(),B.c(),tt=vt(),this.h()},l(i){o=p(i,"DIV",{});var V=G(o);t=p(V,"H4",{"data-svelte-h":!0}),D(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=I(V),l=p(V,"DIV",{class:!0});var k=G(l);a=p(k,"BUTTON",{"data-svelte-h":!0}),D(a)!=="svelte-bivxk4"&&(a.textContent=C),n=I(k),v=p(k,"BUTTON",{"data-svelte-h":!0}),D(v)!=="svelte-1oh0e6u"&&(v.textContent=T),u=I(k),m=p(k,"BUTTON",{"data-svelte-h":!0}),D(m)!=="svelte-1wjgins"&&(m.textContent=d),_=I(k),E=p(k,"BUTTON",{"data-svelte-h":!0}),D(E)!=="svelte-69m1bk"&&(E.textContent=g),b=I(k),O=p(k,"BUTTON",{"data-svelte-h":!0}),D(O)!=="svelte-g7g4he"&&(O.textContent=z),k.forEach(y),V.forEach(y),R=I(i),S=p(i,"DIV",{});var W=G(S);$=p(W,"H4",{"data-svelte-h":!0}),D($)!=="svelte-8gx0az"&&($.textContent=f),j=I(W),N=p(W,"DIV",{class:!0});var K=G(N);q=p(K,"BUTTON",{"data-svelte-h":!0}),D(q)!=="svelte-12olw78"&&(q.textContent=X),P=I(K),w=p(K,"BUTTON",{"data-svelte-h":!0}),D(w)!=="svelte-16z5c15"&&(w.textContent=ot),Y=I(K),M=p(K,"BUTTON",{"data-svelte-h":!0}),D(M)!=="svelte-mp8c3v"&&(M.textContent=st),kt=I(K),L=p(K,"BUTTON",{"data-svelte-h":!0}),D(L)!=="svelte-eks63j"&&(L.textContent=Nt),K.forEach(y),W.forEach(y),ct=I(i),A=p(i,"DIV",{});var ft=G(A);Z=p(ft,"H4",{"data-svelte-h":!0}),D(Z)!=="svelte-hclwgd"&&(Z.textContent=xt),Ct=I(ft),Q=p(ft,"DIV",{class:!0});var Vt=G(Q);for(let bt=0;bt<9;bt+=1)U[bt].l(Vt);Vt.forEach(y),ft.forEach(y),rt=I(i),at=p(i,"BR",{}),it=I(i),B.l(i),tt=vt(),this.h()},h(){F(l,"class","grid-controls svelte-1jeisuy"),F(N,"class","notes-controls svelte-1jeisuy"),F(Q,"class","highlights-controls")},m(i,V){H(i,o,V),r(o,t),r(o,c),r(o,l),r(l,a),r(l,n),r(l,v),r(l,u),r(l,m),r(l,_),r(l,E),r(l,b),r(l,O),H(i,R,V),H(i,S,V),r(S,$),r(S,j),r(S,N),r(N,q),r(N,P),r(N,w),r(N,Y),r(N,M),r(N,kt),r(N,L),H(i,ct,V),H(i,A,V),r(A,Z),r(A,Ct),r(A,Q);for(let k=0;k<9;k+=1)U[k]&&U[k].m(Q,null);H(i,rt,V),H(i,at,V),H(i,it,V),B.m(i,V),H(i,tt,V),ut=!0,mt||(Tt=[J(a,"click",e[10]),J(v,"click",e[11]),J(m,"click",e[12]),J(E,"click",e[13]),J(O,"click",e[14]),J(q,"click",e[15]),J(w,"click",e[16]),J(M,"click",e[17]),J(L,"click",e[18])],mt=!0)},p(i,[V]){if(V&2){wt=gt([1,2,3,4,5,6,7,8,9]);let k;for(k=0;k<9;k+=1){const W=Ht(i,wt,k);U[k]?U[k].p(W,V):(U[k]=Ut(W),U[k].c(),U[k].m(Q,null))}for(;k<9;k+=1)U[k].d(1)}V&1&&pt(It,It=i[0])?(Qt(),_t(B,1,1,dt),Lt(),B=Bt(i),B.c(),ht(B,1),B.m(tt.parentNode,tt)):B.p(i,V)},i(i){ut||(ht(B),ut=!0)},o(i){_t(B),ut=!1},d(i){i&&(y(o),y(R),y(S),y(ct),y(A),y(rt),y(at),y(it),y(tt)),Ft(U,i),B.d(i),mt=!1,zt(Tt)}}}function de(e,o,t){let s;At(e,qt,f=>t(1,s=f));let c=Dt();const l=[JSON.parse(JSON.stringify(c))],a=f=>{oe(f.detail.cell,f.detail.update),n()},C=f=>{Pt(c,f.detail.position),n()},n=f=>{t(0,c),!(f!=null&&f.noHistory)&&l.push(JSON.parse(JSON.stringify(c)))},v=f=>{for(let j=0;j<9;j++)for(let N=0;N<9;N++)f[j][N].fixed||(f[j][N].value=void 0,f[j][N].notes=[])},T=()=>{const f=se(c);t(0,c=f),n()},u=()=>{for(let f=0;f<9;f++)for(let j=0;j<9;j++)t(0,c[f][j].fixed=!1,c)},m=f=>{$t.set([...re(f),...ce(f),...ae(f)])};return[c,s,l,a,C,n,v,T,u,m,()=>{t(0,c=l.pop()),n({noHistory:!0})},()=>{t(0,c=Dt()),n()},()=>{T(),n()},()=>{v(c),n()},()=>{u(),n()},()=>{ne(c),n()},()=>{le(c),n()},()=>{m(c),n()},()=>{$t.set([]),n()},f=>{Kt(qt,s=s===f?void 0:f,s)}]}class Ce extends Gt{constructor(o){super(),Mt(this,o,de,ve,pt,{})}}export{Ce as component};
