import{s as nt,e as et,i as H,G as lt,d as h,f as d,a as m,l as Y,g as v,h as q,H as y,c as C,m as Z,j as M,J as tt,I as r,y as z,C as kt}from"../chunks/scheduler.f51c602a.js";import{S as mt,i as Ct,t as st,c as xt,a as ot,b as ct,d as ut,m as dt,e as vt,g as bt}from"../chunks/index.aa7fb691.js";import{m as gt,g as Nt,a as yt,b as It,c as Vt,d as ft,S as $t,u as St}from"../chunks/Sudoku.6dccf553.js";const Tt=s=>{const t=JSON.parse(JSON.stringify(s));return pt(t),t},pt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)if(s[t][l].value===void 0){for(let e=1;e<=9;e++)if(gt(s,{row:t,col:l},e)){if(s[t][l].value=e,pt(s))return!0;s[t][l].value=void 0}return!1}return!0},at=(s,t,l,e)=>{if(!e||s[t][l].value)return!1;const a=s[t][l].notes.indexOf(e);return a===-1?!1:(s[t][l].notes.splice(a,1),!0)},Ot=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)s[t][l].notes=[]},wt=(s,t)=>{const{row:l,col:e}=t;if(s[l][e].value){s[l][e].notes=[];return}s[l][e].notes=[1,2,3,4,5,6,7,8,9];const a=Math.floor(e/3),o=Math.floor(l/3);for(let n=0;n<9;n++){const p=s[n][e].value;at(s,l,e,p);const f=s[l][n].value;at(s,l,e,f);const k=Math.floor(n/3),E=n%3,N=s[3*o+k][3*a+E].value;at(s,l,e,N)}return s[l][e].notes},Dt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)wt(s,{row:t,col:l})};function _t(s){let t,l,e="grid has errors",a,o,n="grid is filled",p,f,k="grid is valid",E,N,T="grid has solutions",J,I,O=s[1]?"Has errors":"No errors",R,u,c,w=s[2]?"Is filled":"Not filled",B,V,b,A=s[3]?"Is valid":"Not valid",F,$,x,P;return{c(){t=d("div"),l=d("div"),l.textContent=e,a=m(),o=d("div"),o.textContent=n,p=m(),f=d("div"),f.textContent=k,E=m(),N=d("div"),N.textContent=T,J=m(),I=d("div"),R=Y(O),u=m(),c=d("div"),B=Y(w),V=m(),b=d("div"),F=Y(A),$=m(),x=d("div"),P=Y(s[4]),this.h()},l(G){t=v(G,"DIV",{class:!0});var i=q(t);l=v(i,"DIV",{"data-svelte-h":!0}),y(l)!=="svelte-1hlqbal"&&(l.textContent=e),a=C(i),o=v(i,"DIV",{"data-svelte-h":!0}),y(o)!=="svelte-ekf37s"&&(o.textContent=n),p=C(i),f=v(i,"DIV",{"data-svelte-h":!0}),y(f)!=="svelte-16e0vl8"&&(f.textContent=k),E=C(i),N=v(i,"DIV",{"data-svelte-h":!0}),y(N)!=="svelte-1tjrozg"&&(N.textContent=T),J=C(i),I=v(i,"DIV",{class:!0});var K=q(I);R=Z(K,O),K.forEach(h),u=C(i),c=v(i,"DIV",{class:!0});var j=q(c);B=Z(j,w),j.forEach(h),V=C(i),b=v(i,"DIV",{class:!0});var L=q(b);F=Z(L,A),L.forEach(h),$=C(i),x=v(i,"DIV",{class:!0});var U=q(x);P=Z(U,s[4]),U.forEach(h),i.forEach(h),this.h()},h(){M(I,"class","status svelte-1csoeu4"),tt(I,"red",s[1]),M(c,"class","status svelte-1csoeu4"),tt(c,"red",!s[2]),M(b,"class","status svelte-1csoeu4"),tt(b,"red",!s[3]),M(x,"class","status svelte-1csoeu4"),tt(x,"red",s[4]!=="unique"),M(t,"class","grid-status svelte-1csoeu4")},m(G,i){H(G,t,i),r(t,l),r(t,a),r(t,o),r(t,p),r(t,f),r(t,E),r(t,N),r(t,J),r(t,I),r(I,R),r(t,u),r(t,c),r(c,B),r(t,V),r(t,b),r(b,F),r(t,$),r(t,x),r(x,P)},p:lt,d(G){G&&h(t)}}}function Et(s){let t=s[0],l,e=_t(s);return{c(){e.c(),l=et()},l(a){e.l(a),l=et()},m(a,o){e.m(a,o),H(a,l,o)},p(a,[o]){o&1&&nt(t,t=a[0])?(e.d(1),e=_t(a),e.c(),e.m(l.parentNode,l)):e.p(a,o)},i:lt,o:lt,d(a){a&&h(l),e.d(a)}}}function Gt(s,t,l){let{grid:e}=t,a=Nt(e),o=yt(e),n=It(e),p=Vt(e);return s.$$set=f=>{"grid"in f&&l(0,e=f.grid)},[e,a,o,n,p]}class Ut extends mt{constructor(t){super(),Ct(this,t,Gt,Et,nt,{grid:0})}}function ht(s){let t,l,e,a;return t=new $t({props:{grid:s[0]}}),t.$on("cellUpdate",s[2]),e=new Ut({props:{grid:s[0]}}),{c(){ct(t.$$.fragment),l=m(),ct(e.$$.fragment)},l(o){ut(t.$$.fragment,o),l=C(o),ut(e.$$.fragment,o)},m(o,n){dt(t,o,n),H(o,l,n),dt(e,o,n),a=!0},p(o,n){const p={};n&1&&(p.grid=o[0]),t.$set(p);const f={};n&1&&(f.grid=o[0]),e.$set(f)},i(o){a||(ot(t.$$.fragment,o),ot(e.$$.fragment,o),a=!0)},o(o){st(t.$$.fragment,o),st(e.$$.fragment,o),a=!1},d(o){o&&h(l),vt(t,o),vt(e,o)}}}function qt(s){let t,l,e="Grid controls",a,o,n,p="Prev",f,k,E="New Grid",N,T,J="Solve grid",I,O,R="Reset grid",u,c,w="Remove fixed",B,V,b,A="Notes controls",F,$,x,P="Compute notes",G,i,K="Remove notes",j,L=s[0],U,Q,rt,it,S=ht(s);return{c(){t=d("div"),l=d("h4"),l.textContent=e,a=m(),o=d("div"),n=d("button"),n.textContent=p,f=m(),k=d("button"),k.textContent=E,N=m(),T=d("button"),T.textContent=J,I=m(),O=d("button"),O.textContent=R,u=m(),c=d("button"),c.textContent=w,B=m(),V=d("div"),b=d("h4"),b.textContent=A,F=m(),$=d("div"),x=d("button"),x.textContent=P,G=m(),i=d("button"),i.textContent=K,j=m(),S.c(),U=et(),this.h()},l(_){t=v(_,"DIV",{});var g=q(t);l=v(g,"H4",{"data-svelte-h":!0}),y(l)!=="svelte-1h8cvtc"&&(l.textContent=e),a=C(g),o=v(g,"DIV",{class:!0});var D=q(o);n=v(D,"BUTTON",{"data-svelte-h":!0}),y(n)!=="svelte-bivxk4"&&(n.textContent=p),f=C(D),k=v(D,"BUTTON",{"data-svelte-h":!0}),y(k)!=="svelte-1oh0e6u"&&(k.textContent=E),N=C(D),T=v(D,"BUTTON",{"data-svelte-h":!0}),y(T)!=="svelte-1wjgins"&&(T.textContent=J),I=C(D),O=v(D,"BUTTON",{"data-svelte-h":!0}),y(O)!=="svelte-69m1bk"&&(O.textContent=R),u=C(D),c=v(D,"BUTTON",{"data-svelte-h":!0}),y(c)!=="svelte-g7g4he"&&(c.textContent=w),D.forEach(h),g.forEach(h),B=C(_),V=v(_,"DIV",{});var W=q(V);b=v(W,"H4",{"data-svelte-h":!0}),y(b)!=="svelte-8gx0az"&&(b.textContent=A),F=C(W),$=v(W,"DIV",{class:!0});var X=q($);x=v(X,"BUTTON",{"data-svelte-h":!0}),y(x)!=="svelte-12olw78"&&(x.textContent=P),G=C(X),i=v(X,"BUTTON",{"data-svelte-h":!0}),y(i)!=="svelte-16z5c15"&&(i.textContent=K),X.forEach(h),W.forEach(h),j=C(_),S.l(_),U=et(),this.h()},h(){M(o,"class","grid-controls svelte-k3uotq"),M($,"class","notes-controls svelte-k3uotq")},m(_,g){H(_,t,g),r(t,l),r(t,a),r(t,o),r(o,n),r(o,f),r(o,k),r(o,N),r(o,T),r(o,I),r(o,O),r(o,u),r(o,c),H(_,B,g),H(_,V,g),r(V,b),r(V,F),r(V,$),r($,x),r($,G),r($,i),H(_,j,g),S.m(_,g),H(_,U,g),Q=!0,rt||(it=[z(n,"click",s[7]),z(k,"click",s[8]),z(T,"click",s[9]),z(O,"click",s[10]),z(c,"click",s[11]),z(x,"click",s[12]),z(i,"click",s[13])],rt=!0)},p(_,[g]){g&1&&nt(L,L=_[0])?(bt(),st(S,1,1,lt),xt(),S=ht(_),S.c(),ot(S,1),S.m(U.parentNode,U)):S.p(_,g)},i(_){Q||(ot(S),Q=!0)},o(_){st(S),Q=!1},d(_){_&&(h(t),h(B),h(V),h(j),h(U)),S.d(_),rt=!1,kt(it)}}}function Bt(s,t,l){let e=ft();const a=[JSON.parse(JSON.stringify(e))],o=u=>{St(u.detail.cell,u.detail.update),n()},n=u=>{l(0,e),!(u!=null&&u.noHistory)&&a.push(JSON.parse(JSON.stringify(e)))},p=u=>{for(let c=0;c<9;c++)for(let w=0;w<9;w++)u[c][w].fixed||(u[c][w].value=void 0,u[c][w].notes=[])},f=()=>{const u=Tt(e);l(0,e=u),n()},k=()=>{for(let u=0;u<9;u++)for(let c=0;c<9;c++)l(0,e[u][c].fixed=!1,e)};return[e,a,o,n,p,f,k,()=>{l(0,e=a.pop()),n({noHistory:!0})},()=>{l(0,e=ft()),n()},()=>{f(),n()},()=>{p(e),n()},()=>{k(),n()},()=>{Dt(e),n()},()=>{Ot(e),n()}]}class Ft extends mt{constructor(t){super(),Ct(this,t,Bt,qt,nt,{})}}export{Ft as component};
