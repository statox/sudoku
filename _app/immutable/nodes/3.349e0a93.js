import{s as nt,e as et,i as H,G as lt,d as h,f as d,a as m,l as Y,g as v,h as q,H as I,c as C,m as Z,j as M,J as tt,I as n,y as z,C as Nt}from"../chunks/scheduler.a9a47073.js";import{S as mt,i as Ct,t as st,c as bt,a as ot,b as ct,d as ut,m as dt,e as vt,g as gt}from"../chunks/index.4654634b.js";import{m as xt,g as yt,a as It,b as Vt,c as $t,d as ft,S as St,u as Tt}from"../chunks/Sudoku.9a62c1eb.js";const Ot=s=>{const t=JSON.parse(JSON.stringify(s));return pt(t),t},pt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)if(s[t][l].value===void 0){for(let e=1;e<=9;e++)if(xt(s,{row:t,col:l},e)){if(s[t][l].value=e,pt(s))return!0;s[t][l].value=void 0}return!1}return!0},at=(s,t,l,e)=>{if(!e||s[t][l].value)return!1;const r=s[t][l].notes.indexOf(e);return r===-1?!1:(s[t][l].notes.splice(r,1),!0)},wt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)s[t][l].notes=[]},kt=(s,t)=>{const{row:l,col:e}=t;if(s[l][e].value){s[l][e].notes=[];return}s[l][e].notes=[1,2,3,4,5,6,7,8,9];const r=Math.floor(e/3),o=Math.floor(l/3);for(let i=0;i<9;i++){const u=s[i][e].value;at(s,l,e,u);const f=s[l][i].value;at(s,l,e,f);const p=Math.floor(i/3),O=i%3,y=s[3*o+p][3*r+O].value;at(s,l,e,y)}return s[l][e].notes},Dt=s=>{for(let t=0;t<9;t++)for(let l=0;l<9;l++)kt(s,{row:t,col:l})};function _t(s){let t,l,e="grid has errors",r,o,i="grid is filled",u,f,p="grid is valid",O,y,w="grid has solutions",J,V,D=s[1]?"Has errors":"No errors",R,B,a,k=s[2]?"Is filled":"Not filled",b,$,g,A=s[3]?"Is valid":"Not valid",F,S,N,P;return{c(){t=d("div"),l=d("div"),l.textContent=e,r=m(),o=d("div"),o.textContent=i,u=m(),f=d("div"),f.textContent=p,O=m(),y=d("div"),y.textContent=w,J=m(),V=d("div"),R=Y(D),B=m(),a=d("div"),b=Y(k),$=m(),g=d("div"),F=Y(A),S=m(),N=d("div"),P=Y(s[4]),this.h()},l(G){t=v(G,"DIV",{class:!0});var c=q(t);l=v(c,"DIV",{"data-svelte-h":!0}),I(l)!=="svelte-1hlqbal"&&(l.textContent=e),r=C(c),o=v(c,"DIV",{"data-svelte-h":!0}),I(o)!=="svelte-ekf37s"&&(o.textContent=i),u=C(c),f=v(c,"DIV",{"data-svelte-h":!0}),I(f)!=="svelte-16e0vl8"&&(f.textContent=p),O=C(c),y=v(c,"DIV",{"data-svelte-h":!0}),I(y)!=="svelte-1tjrozg"&&(y.textContent=w),J=C(c),V=v(c,"DIV",{class:!0});var K=q(V);R=Z(K,D),K.forEach(h),B=C(c),a=v(c,"DIV",{class:!0});var j=q(a);b=Z(j,k),j.forEach(h),$=C(c),g=v(c,"DIV",{class:!0});var L=q(g);F=Z(L,A),L.forEach(h),S=C(c),N=v(c,"DIV",{class:!0});var U=q(N);P=Z(U,s[4]),U.forEach(h),c.forEach(h),this.h()},h(){M(V,"class","status svelte-1csoeu4"),tt(V,"red",s[1]),M(a,"class","status svelte-1csoeu4"),tt(a,"red",!s[2]),M(g,"class","status svelte-1csoeu4"),tt(g,"red",!s[3]),M(N,"class","status svelte-1csoeu4"),tt(N,"red",s[4]!=="unique"),M(t,"class","grid-status svelte-1csoeu4")},m(G,c){H(G,t,c),n(t,l),n(t,r),n(t,o),n(t,u),n(t,f),n(t,O),n(t,y),n(t,J),n(t,V),n(V,R),n(t,B),n(t,a),n(a,b),n(t,$),n(t,g),n(g,F),n(t,S),n(t,N),n(N,P)},p:lt,d(G){G&&h(t)}}}function Et(s){let t=s[0],l,e=_t(s);return{c(){e.c(),l=et()},l(r){e.l(r),l=et()},m(r,o){e.m(r,o),H(r,l,o)},p(r,[o]){o&1&&nt(t,t=r[0])?(e.d(1),e=_t(r),e.c(),e.m(l.parentNode,l)):e.p(r,o)},i:lt,o:lt,d(r){r&&h(l),e.d(r)}}}function Gt(s,t,l){let{grid:e}=t,r=yt(e),o=It(e),i=Vt(e),u=$t(e);return s.$$set=f=>{"grid"in f&&l(0,e=f.grid)},[e,r,o,i,u]}class Ut extends mt{constructor(t){super(),Ct(this,t,Gt,Et,nt,{grid:0})}}function ht(s){let t,l,e,r;return t=new St({props:{grid:s[0]}}),t.$on("cellUpdate",s[2]),t.$on("computeCellNotes",s[3]),e=new Ut({props:{grid:s[0]}}),{c(){ct(t.$$.fragment),l=m(),ct(e.$$.fragment)},l(o){ut(t.$$.fragment,o),l=C(o),ut(e.$$.fragment,o)},m(o,i){dt(t,o,i),H(o,l,i),dt(e,o,i),r=!0},p(o,i){const u={};i&1&&(u.grid=o[0]),t.$set(u);const f={};i&1&&(f.grid=o[0]),e.$set(f)},i(o){r||(ot(t.$$.fragment,o),ot(e.$$.fragment,o),r=!0)},o(o){st(t.$$.fragment,o),st(e.$$.fragment,o),r=!1},d(o){o&&h(l),vt(t,o),vt(e,o)}}}function qt(s){let t,l,e="Grid controls",r,o,i,u="Prev",f,p,O="New Grid",y,w,J="Solve grid",V,D,R="Reset grid",B,a,k="Remove fixed",b,$,g,A="Notes controls",F,S,N,P="Compute notes",G,c,K="Remove notes",j,L=s[0],U,Q,rt,it,T=ht(s);return{c(){t=d("div"),l=d("h4"),l.textContent=e,r=m(),o=d("div"),i=d("button"),i.textContent=u,f=m(),p=d("button"),p.textContent=O,y=m(),w=d("button"),w.textContent=J,V=m(),D=d("button"),D.textContent=R,B=m(),a=d("button"),a.textContent=k,b=m(),$=d("div"),g=d("h4"),g.textContent=A,F=m(),S=d("div"),N=d("button"),N.textContent=P,G=m(),c=d("button"),c.textContent=K,j=m(),T.c(),U=et(),this.h()},l(_){t=v(_,"DIV",{});var x=q(t);l=v(x,"H4",{"data-svelte-h":!0}),I(l)!=="svelte-1h8cvtc"&&(l.textContent=e),r=C(x),o=v(x,"DIV",{class:!0});var E=q(o);i=v(E,"BUTTON",{"data-svelte-h":!0}),I(i)!=="svelte-bivxk4"&&(i.textContent=u),f=C(E),p=v(E,"BUTTON",{"data-svelte-h":!0}),I(p)!=="svelte-1oh0e6u"&&(p.textContent=O),y=C(E),w=v(E,"BUTTON",{"data-svelte-h":!0}),I(w)!=="svelte-1wjgins"&&(w.textContent=J),V=C(E),D=v(E,"BUTTON",{"data-svelte-h":!0}),I(D)!=="svelte-69m1bk"&&(D.textContent=R),B=C(E),a=v(E,"BUTTON",{"data-svelte-h":!0}),I(a)!=="svelte-g7g4he"&&(a.textContent=k),E.forEach(h),x.forEach(h),b=C(_),$=v(_,"DIV",{});var W=q($);g=v(W,"H4",{"data-svelte-h":!0}),I(g)!=="svelte-8gx0az"&&(g.textContent=A),F=C(W),S=v(W,"DIV",{class:!0});var X=q(S);N=v(X,"BUTTON",{"data-svelte-h":!0}),I(N)!=="svelte-12olw78"&&(N.textContent=P),G=C(X),c=v(X,"BUTTON",{"data-svelte-h":!0}),I(c)!=="svelte-16z5c15"&&(c.textContent=K),X.forEach(h),W.forEach(h),j=C(_),T.l(_),U=et(),this.h()},h(){M(o,"class","grid-controls svelte-k3uotq"),M(S,"class","notes-controls svelte-k3uotq")},m(_,x){H(_,t,x),n(t,l),n(t,r),n(t,o),n(o,i),n(o,f),n(o,p),n(o,y),n(o,w),n(o,V),n(o,D),n(o,B),n(o,a),H(_,b,x),H(_,$,x),n($,g),n($,F),n($,S),n(S,N),n(S,G),n(S,c),H(_,j,x),T.m(_,x),H(_,U,x),Q=!0,rt||(it=[z(i,"click",s[8]),z(p,"click",s[9]),z(w,"click",s[10]),z(D,"click",s[11]),z(a,"click",s[12]),z(N,"click",s[13]),z(c,"click",s[14])],rt=!0)},p(_,[x]){x&1&&nt(L,L=_[0])?(gt(),st(T,1,1,lt),bt(),T=ht(_),T.c(),ot(T,1),T.m(U.parentNode,U)):T.p(_,x)},i(_){Q||(ot(T),Q=!0)},o(_){st(T),Q=!1},d(_){_&&(h(t),h(b),h($),h(j),h(U)),T.d(_),rt=!1,Nt(it)}}}function Bt(s,t,l){let e=ft();const r=[JSON.parse(JSON.stringify(e))],o=a=>{Tt(a.detail.cell,a.detail.update),u()},i=a=>{kt(e,a.detail.position),u()},u=a=>{l(0,e),!(a!=null&&a.noHistory)&&r.push(JSON.parse(JSON.stringify(e)))},f=a=>{for(let k=0;k<9;k++)for(let b=0;b<9;b++)a[k][b].fixed||(a[k][b].value=void 0,a[k][b].notes=[])},p=()=>{const a=Ot(e);l(0,e=a),u()},O=()=>{for(let a=0;a<9;a++)for(let k=0;k<9;k++)l(0,e[a][k].fixed=!1,e)};return[e,r,o,i,u,f,p,O,()=>{l(0,e=r.pop()),u({noHistory:!0})},()=>{l(0,e=ft()),u()},()=>{p(),u()},()=>{f(e),u()},()=>{O(),u()},()=>{Dt(e),u()},()=>{wt(e),u()}]}class Ft extends mt{constructor(t){super(),Ct(this,t,Bt,qt,nt,{})}}export{Ft as component};
