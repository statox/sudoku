import{s as at,e as nt,i as P,G as lt,d as S,f as m,a as y,l as et,g as w,h as H,H as j,c as x,m as ot,j as A,J as st,I as r,y as B,C as St}from"../chunks/scheduler.cf09a957.js";import{S as yt,i as xt,t as ct,c as Tt,a as rt,b as ht,d as pt,m as Ct,e as kt,g as Vt}from"../chunks/index.afa9592b.js";import{m as $t,g as jt,a as Et,b as qt,c as Dt,d as mt,S as Rt,u as gt,s as wt}from"../chunks/Sudoku.ddd54936.js";const Ut=e=>{const o=JSON.parse(JSON.stringify(e));return It(o),o},It=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if($t(e,{row:o,col:t},s)){if(e[o][t].value=s,It(e))return!0;e[o][t].value=void 0}return!1}return!0},ft=(e,o,t,s)=>{if(!s||e[o][t].value)return!1;const c=e[o][t].notes.indexOf(s);return c===-1?!1:(e[o][t].notes.splice(c,1),!0)},Gt=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)e[o][t].notes=[]},Ot=(e,o)=>{const{row:t,col:s}=o;if(e[t][s].value){e[t][s].notes=[];return}e[t][s].notes=[1,2,3,4,5,6,7,8,9];const c=Math.floor(s/3),n=Math.floor(t/3);for(let u=0;u<9;u++){const f=e[u][s].value;ft(e,t,s,f);const l=e[t][u].value;ft(e,t,s,l);const v=Math.floor(u/3),b=u%3,i=e[3*n+v][3*c+b].value;ft(e,t,s,i)}return e[t][s].notes},Bt=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)Ot(e,{row:o,col:t})},Ht=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},n={},u=3*Math.floor(t/3),f=3*(t%3);for(let l=0;l<9;l++){if(e[t][l].value===void 0){const d=e[t][l].notes;for(const _ of d)s[_]||(s[_]=[]),s[_].push({row:t,col:l})}if(e[l][t].value===void 0){const d=e[l][t].notes;for(const _ of d)c[_]||(c[_]=[]),c[_].push({row:l,col:t})}const v=Math.floor(l/3),b=l%3,i=u+v,C=f+b;if(e[i][C].value===void 0){const d=e[i][C].notes;for(const _ of d)n[_]||(n[_]=[]),n[_].push({row:i,col:C})}}for(const l of Object.keys(s)){const v=Number(l);if(s[v].length===1){const{row:b,col:i}=s[v][0];o.push({type:"hidden_single_row",cause:[{row:b,col:i,notes:[v]}]})}}for(const l of Object.keys(c)){const v=Number(l);if(c[v].length===1){const{row:b,col:i}=c[v][0];o.push({type:"hidden_single_col",cause:[{row:b,col:i,notes:[v]}]})}}for(const l of Object.keys(n)){const v=Number(l);if(n[v].length===1){const{row:b,col:i}=n[v][0];o.push({type:"hidden_single_square",cause:[{row:b,col:i,notes:[v]}]})}}}return o},Mt=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},Jt=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},n={},u=3*Math.floor(t/3),f=3*(t%3);for(let l=0;l<9;l++){if(e[t][l].value===void 0&&e[t][l].notes.length===2){const d=e[t][l].notes.join(",");if(!s[d])s[d]={row:t,col:l};else{const _={row:t,col:l,notes:[...e[t][l].notes]},O={row:s[d].row,col:s[d].col,notes:[...e[t][l].notes]},T=[];for(let p=0;p<9;p++)e[t][p].value!==void 0||e[t][p].notes.join(",")===d||T.push({row:t,col:p,notes:[...e[t][l].notes]});o.push({type:"naked_pair",cause:[_,O],effect:T})}}if(e[l][t].value===void 0&&e[l][t].notes.length===2){const d=e[l][t].notes.join(",");if(!c[d])c[d]={row:l,col:t};else{const _={row:l,col:t,notes:[...e[l][t].notes]},O={row:c[d].row,col:c[d].col,notes:[...e[l][t].notes]},T=[];for(let p=0;p<9;p++)e[p][t].value!==void 0||e[p][t].notes.join(",")===d||T.push({row:p,col:t,notes:[...e[l][t].notes]});o.push({type:"naked_pair",cause:[_,O],effect:T})}}const v=Math.floor(l/3),b=l%3,i=u+v,C=f+b;if(e[i][C].value===void 0&&e[i][C].notes.length===2){const d=e[i][C].notes.join(",");if(!n[d])n[d]={row:i,col:C};else{const _={row:i,col:C,notes:[...e[i][C].notes]},O={row:n[d].row,col:n[d].col,notes:[...e[i][C].notes]},T=[];for(let p=0;p<9;p++){const I=Math.floor(p/3),M=p%3,q=u+I,a=f+M;e[q][a].value!==void 0||e[q][a].notes.join(",")===d||T.push({row:q,col:a,notes:[...e[i][C].notes]})}o.push({type:"naked_pair",cause:[_,O],effect:T})}}}}return o};function bt(e){let o,t,s="grid has errors",c,n,u="grid is filled",f,l,v="grid is valid",b,i,C="grid has solutions",d,_,O=e[1]?"Has errors":"No errors",T,p,I,M=e[2]?"Is filled":"Not filled",q,a,k,R=e[3]?"Is valid":"Not valid",F,V,$,L;return{c(){o=m("div"),t=m("div"),t.textContent=s,c=y(),n=m("div"),n.textContent=u,f=y(),l=m("div"),l.textContent=v,b=y(),i=m("div"),i.textContent=C,d=y(),_=m("div"),T=et(O),p=y(),I=m("div"),q=et(M),a=y(),k=m("div"),F=et(R),V=y(),$=m("div"),L=et(e[4]),this.h()},l(G){o=w(G,"DIV",{class:!0});var h=H(o);t=w(h,"DIV",{"data-svelte-h":!0}),j(t)!=="svelte-1hlqbal"&&(t.textContent=s),c=x(h),n=w(h,"DIV",{"data-svelte-h":!0}),j(n)!=="svelte-ekf37s"&&(n.textContent=u),f=x(h),l=w(h,"DIV",{"data-svelte-h":!0}),j(l)!=="svelte-16e0vl8"&&(l.textContent=v),b=x(h),i=w(h,"DIV",{"data-svelte-h":!0}),j(i)!=="svelte-1tjrozg"&&(i.textContent=C),d=x(h),_=w(h,"DIV",{class:!0});var W=H(_);T=ot(W,O),W.forEach(S),p=x(h),I=w(h,"DIV",{class:!0});var K=H(I);q=ot(K,M),K.forEach(S),a=x(h),k=w(h,"DIV",{class:!0});var g=H(k);F=ot(g,R),g.forEach(S),V=x(h),$=w(h,"DIV",{class:!0});var X=H($);L=ot(X,e[4]),X.forEach(S),h.forEach(S),this.h()},h(){A(_,"class","status svelte-1csoeu4"),st(_,"red",e[1]),A(I,"class","status svelte-1csoeu4"),st(I,"red",!e[2]),A(k,"class","status svelte-1csoeu4"),st(k,"red",!e[3]),A($,"class","status svelte-1csoeu4"),st($,"red",e[4]!=="unique"),A(o,"class","grid-status svelte-1csoeu4")},m(G,h){P(G,o,h),r(o,t),r(o,c),r(o,n),r(o,f),r(o,l),r(o,b),r(o,i),r(o,d),r(o,_),r(_,T),r(o,p),r(o,I),r(I,q),r(o,a),r(o,k),r(k,F),r(o,V),r(o,$),r($,L)},p:lt,d(G){G&&S(o)}}}function Pt(e){let o=e[0],t,s=bt(e);return{c(){s.c(),t=nt()},l(c){s.l(c),t=nt()},m(c,n){s.m(c,n),P(c,t,n)},p(c,[n]){n&1&&at(o,o=c[0])?(s.d(1),s=bt(c),s.c(),s.m(t.parentNode,t)):s.p(c,n)},i:lt,o:lt,d(c){c&&S(t),s.d(c)}}}function Ft(e,o,t){let{grid:s}=o,c=jt(s),n=Et(s),u=qt(s),f=Dt(s);return e.$$set=l=>{"grid"in l&&t(0,s=l.grid)},[s,c,n,u,f]}class zt extends yt{constructor(o){super(),xt(this,o,Ft,Pt,at,{grid:0})}}function Nt(e){let o,t,s,c;return o=new Rt({props:{grid:e[0]}}),o.$on("cellUpdate",e[2]),o.$on("computeCellNotes",e[3]),s=new zt({props:{grid:e[0]}}),{c(){ht(o.$$.fragment),t=y(),ht(s.$$.fragment)},l(n){pt(o.$$.fragment,n),t=x(n),pt(s.$$.fragment,n)},m(n,u){Ct(o,n,u),P(n,t,u),Ct(s,n,u),c=!0},p(n,u){const f={};u&1&&(f.grid=n[0]),o.$set(f);const l={};u&1&&(l.grid=n[0]),s.$set(l)},i(n){c||(rt(o.$$.fragment,n),rt(s.$$.fragment,n),c=!0)},o(n){ct(o.$$.fragment,n),ct(s.$$.fragment,n),c=!1},d(n){n&&S(t),kt(o,n),kt(s,n)}}}function At(e){let o,t,s="Grid controls",c,n,u,f="Prev",l,v,b="New Grid",i,C,d="Solve grid",_,O,T="Reset grid",p,I,M="Remove fixed",q,a,k,R="Notes controls",F,V,$,L="Compute notes",G,h,W="Remove notes",K,g,X="Display hints",it,z,vt="Hide hints",Y,dt=e[0],Q,Z,ut,_t,D=Nt(e);return{c(){o=m("div"),t=m("h4"),t.textContent=s,c=y(),n=m("div"),u=m("button"),u.textContent=f,l=y(),v=m("button"),v.textContent=b,i=y(),C=m("button"),C.textContent=d,_=y(),O=m("button"),O.textContent=T,p=y(),I=m("button"),I.textContent=M,q=y(),a=m("div"),k=m("h4"),k.textContent=R,F=y(),V=m("div"),$=m("button"),$.textContent=L,G=y(),h=m("button"),h.textContent=W,K=y(),g=m("button"),g.textContent=X,it=y(),z=m("button"),z.textContent=vt,Y=y(),D.c(),Q=nt(),this.h()},l(N){o=w(N,"DIV",{});var E=H(o);t=w(E,"H4",{"data-svelte-h":!0}),j(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=x(E),n=w(E,"DIV",{class:!0});var U=H(n);u=w(U,"BUTTON",{"data-svelte-h":!0}),j(u)!=="svelte-bivxk4"&&(u.textContent=f),l=x(U),v=w(U,"BUTTON",{"data-svelte-h":!0}),j(v)!=="svelte-1oh0e6u"&&(v.textContent=b),i=x(U),C=w(U,"BUTTON",{"data-svelte-h":!0}),j(C)!=="svelte-1wjgins"&&(C.textContent=d),_=x(U),O=w(U,"BUTTON",{"data-svelte-h":!0}),j(O)!=="svelte-69m1bk"&&(O.textContent=T),p=x(U),I=w(U,"BUTTON",{"data-svelte-h":!0}),j(I)!=="svelte-g7g4he"&&(I.textContent=M),U.forEach(S),E.forEach(S),q=x(N),a=w(N,"DIV",{});var tt=H(a);k=w(tt,"H4",{"data-svelte-h":!0}),j(k)!=="svelte-8gx0az"&&(k.textContent=R),F=x(tt),V=w(tt,"DIV",{class:!0});var J=H(V);$=w(J,"BUTTON",{"data-svelte-h":!0}),j($)!=="svelte-12olw78"&&($.textContent=L),G=x(J),h=w(J,"BUTTON",{"data-svelte-h":!0}),j(h)!=="svelte-16z5c15"&&(h.textContent=W),K=x(J),g=w(J,"BUTTON",{"data-svelte-h":!0}),j(g)!=="svelte-mp8c3v"&&(g.textContent=X),it=x(J),z=w(J,"BUTTON",{"data-svelte-h":!0}),j(z)!=="svelte-eks63j"&&(z.textContent=vt),J.forEach(S),tt.forEach(S),Y=x(N),D.l(N),Q=nt(),this.h()},h(){A(n,"class","grid-controls svelte-17fx0fn"),A(V,"class","notes-controls svelte-17fx0fn")},m(N,E){P(N,o,E),r(o,t),r(o,c),r(o,n),r(n,u),r(n,l),r(n,v),r(n,i),r(n,C),r(n,_),r(n,O),r(n,p),r(n,I),P(N,q,E),P(N,a,E),r(a,k),r(a,F),r(a,V),r(V,$),r(V,G),r(V,h),r(V,K),r(V,g),r(V,it),r(V,z),P(N,Y,E),D.m(N,E),P(N,Q,E),Z=!0,ut||(_t=[B(u,"click",e[9]),B(v,"click",e[10]),B(C,"click",e[11]),B(O,"click",e[12]),B(I,"click",e[13]),B($,"click",e[14]),B(h,"click",e[15]),B(g,"click",e[16]),B(z,"click",e[17])],ut=!0)},p(N,[E]){E&1&&at(dt,dt=N[0])?(Vt(),ct(D,1,1,lt),Tt(),D=Nt(N),D.c(),rt(D,1),D.m(Q.parentNode,Q)):D.p(N,E)},i(N){Z||(rt(D),Z=!0)},o(N){ct(D),Z=!1},d(N){N&&(S(o),S(q),S(a),S(Y),S(Q)),D.d(N),ut=!1,St(_t)}}}function Lt(e,o,t){let s=mt();const c=[JSON.parse(JSON.stringify(s))],n=a=>{gt(a.detail.cell,a.detail.update),f()},u=a=>{Ot(s,a.detail.position),f()},f=a=>{t(0,s),!(a!=null&&a.noHistory)&&c.push(JSON.parse(JSON.stringify(s)))},l=a=>{for(let k=0;k<9;k++)for(let R=0;R<9;R++)a[k][R].fixed||(a[k][R].value=void 0,a[k][R].notes=[])},v=()=>{const a=Ut(s);t(0,s=a),f()},b=()=>{for(let a=0;a<9;a++)for(let k=0;k<9;k++)t(0,s[a][k].fixed=!1,s)},i=a=>{wt.set([...Mt(a),...Ht(a),...Jt(a)])};return[s,c,n,u,f,l,v,b,i,()=>{t(0,s=c.pop()),f({noHistory:!0})},()=>{t(0,s=mt()),f()},()=>{v(),f()},()=>{l(s),f()},()=>{b(),f()},()=>{Bt(s),f()},()=>{Gt(s),f()},()=>{i(s),f()},()=>{wt.set([]),f()}]}class Xt extends yt{constructor(o){super(),xt(this,o,Lt,At,at,{})}}export{Xt as component};
