import{s as Me,f as y,a as g,l as Z,e as ge,g as N,h as B,H as I,c as G,d as C,m as ee,j as ie,i as O,I as v,y as $,n as Ge,J as Fe,C as We,D as Je,G as Ve,K as Re,E as Ke}from"../chunks/scheduler.71239b2e.js";import{S as Le,i as Qe,t as ue,c as Xe,a as fe,b as je,d as qe,m as He,e as Oe,g as Ye}from"../chunks/index.8ab45ecd.js";import{a as Se}from"../chunks/store.fe58922c.js";import{d as Ce,m as Ze,g as et,a as tt,c as ot,S as st,b as De,G as nt,u as lt,r as ct,s as Ue,e as rt,f as at,h as Be,i as it}from"../chunks/GridStatus.4437f5ff.js";const ut=e=>{const o=Ce(e);return Ae(o),o},Ae=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Ze(e,{row:o,col:t},s)){if(e[o][t].value=s,Ae(e))return!0;e[o][t].value=void 0}return!1}return!0},Ie=()=>{const e=et(tt()),o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)o.push({row:t,col:s});for(;o.length;){const t=Math.floor(Math.random()*o.length),{row:s,col:l}=o[t];o.splice(t,1);const n=e[s][l].value;e[s][l].value=void 0,e[s][l].notes=[],e[s][l].fixed=!1,ot(e)!=="unique"&&(e[s][l].value=n)}for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value&&(e[t][s].fixed=!0);return e},ft=e=>{const o=[];for(let t=0;t<9;t++){const s={},l={},n={},a=3*Math.floor(t/3),m=3*(t%3);for(let c=0;c<9;c++){if(e[t][c].value===void 0){const h=e[t][c].notes;for(const w of h)s[w]||(s[w]=[]),s[w].push({row:t,col:c})}if(e[c][t].value===void 0){const h=e[c][t].notes;for(const w of h)l[w]||(l[w]=[]),l[w].push({row:c,col:t})}const _=Math.floor(c/3),i=c%3,u=a+_,f=m+i;if(e[u][f].value===void 0){const h=e[u][f].notes;for(const w of h)n[w]||(n[w]=[]),n[w].push({row:u,col:f})}}for(const c of Object.keys(s)){const _=Number(c);if(s[_].length===1){const{row:i,col:u}=s[_][0];o.push({type:"hidden_single_row",cause:[{row:i,col:u,notes:[_]}],effect:[{row:i,col:u,notes:e[i][u].notes.filter(f=>f!==_)}]})}}for(const c of Object.keys(l)){const _=Number(c);if(l[_].length===1){const{row:i,col:u}=l[_][0];o.push({type:"hidden_single_col",cause:[{row:i,col:u,notes:[_]}],effect:[{row:i,col:u,notes:e[i][u].notes.filter(f=>f!==_)}]})}}for(const c of Object.keys(n)){const _=Number(c);if(n[_].length===1){const{row:i,col:u}=n[_][0];o.push({type:"hidden_single_square",cause:[{row:i,col:u,notes:[_]}],effect:[{row:i,col:u,notes:e[i][u].notes.filter(f=>f!==_)}]})}}}return o},_t=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},ht=e=>{const o=[];for(let t=0;t<9;t++){const s={},l={},n={},a=3*Math.floor(t/3),m=3*(t%3);for(let c=0;c<9;c++){if(e[t][c].value===void 0&&e[t][c].notes.length===2){const h=e[t][c].notes.join(",");if(!s[h])s[h]={row:t,col:c};else{const w={row:t,col:c,notes:[...e[t][c].notes]},T={row:s[h].row,col:s[h].col,notes:[...e[t][c].notes]},j=[];for(let b=0;b<9;b++)e[t][b].value!==void 0||e[t][b].notes.join(",")===h||j.push({row:t,col:b,notes:[...e[t][c].notes]});o.push({type:"naked_pair",cause:[w,T],effect:j})}}if(e[c][t].value===void 0&&e[c][t].notes.length===2){const h=e[c][t].notes.join(",");if(!l[h])l[h]={row:c,col:t};else{const w={row:c,col:t,notes:[...e[c][t].notes]},T={row:l[h].row,col:l[h].col,notes:[...e[c][t].notes]},j=[];for(let b=0;b<9;b++)e[b][t].value!==void 0||e[b][t].notes.join(",")===h||j.push({row:b,col:t,notes:[...e[c][t].notes]});o.push({type:"naked_pair",cause:[w,T],effect:j})}}const _=Math.floor(c/3),i=c%3,u=a+_,f=m+i;if(e[u][f].value===void 0&&e[u][f].notes.length===2){const h=e[u][f].notes.join(",");if(!n[h])n[h]={row:u,col:f};else{const w={row:u,col:f,notes:[...e[u][f].notes]},T={row:n[h].row,col:n[h].col,notes:[...e[u][f].notes]},j=[];for(let b=0;b<9;b++){const D=Math.floor(b/3),Q=b%3,U=a+D,R=m+Q;e[U][R].value!==void 0||e[U][R].notes.join(",")===h||j.push({row:U,col:R,notes:[...e[u][f].notes]})}o.push({type:"naked_pair",cause:[w,T],effect:j})}}}}return o};function $e(e,o,t){const s=e.slice();return s[20]=o[t],s}function xe(e){let o,t="Remove notes",s,l;return{c(){o=y("button"),o.textContent=t},l(n){o=N(n,"BUTTON",{"data-svelte-h":!0}),I(o)!=="svelte-16z5c15"&&(o.textContent=t)},m(n,a){O(n,o,a),s||(l=$(o,"click",e[16]),s=!0)},p:Ve,d(n){n&&C(o),s=!1,l()}}}function ze(e){let o,t,s,l;function n(){return e[18](e[20])}return{c(){o=y("button"),t=Z(e[20]),this.h()},l(a){o=N(a,"BUTTON",{class:!0});var m=B(o);t=ee(m,e[20]),m.forEach(C),this.h()},h(){ie(o,"class","svelte-zwzkqm"),Re(o,"selected",e[3]===e[20])},m(a,m){O(a,o,m),v(o,t),s||(l=$(o,"click",n),s=!0)},p(a,m){e=a,m&8&&Re(o,"selected",e[3]===e[20])},d(a){a&&C(o),s=!1,l()}}}function Pe(e){let o,t,s,l;return o=new st({props:{gridErrors:De(e[0]),grid:e[0]}}),o.$on("cellUpdate",e[5]),o.$on("computeCellNotes",e[6]),s=new nt({props:{grid:e[0]}}),{c(){je(o.$$.fragment),t=g(),je(s.$$.fragment)},l(n){qe(o.$$.fragment,n),t=G(n),qe(s.$$.fragment,n)},m(n,a){He(o,n,a),O(n,t,a),He(s,n,a),l=!0},p(n,a){const m={};a&1&&(m.gridErrors=De(n[0])),a&1&&(m.grid=n[0]),o.$set(m);const c={};a&1&&(c.grid=n[0]),s.$set(c)},i(n){l||(fe(o.$$.fragment,n),fe(s.$$.fragment,n),l=!0)},o(n){ue(o.$$.fragment,n),ue(s.$$.fragment,n),l=!1},d(n){n&&C(t),Oe(o,n),Oe(s,n)}}}function dt(e){let o,t,s="Grid controls",l,n,a,m="Prev",c,_,i="New Grid",u,f,h="Solve grid",w,T,j="Reset grid",b,D,Q="Remove fixed",U,R,z,p="Notes controls",P,S,M,X=e[1]?"Disable":"Enable",te,_e,he,oe,V,Y=e[2]?"Hide":"Display",se,de,ne,x,W,ye="Highlights controls",ve,A,le,ce,re,Ne=e[0],J,K,pe,Ee,E=!e[1]&&xe(e),me=Se([1,2,3,4,5,6,7,8,9]),q=[];for(let r=0;r<9;r+=1)q[r]=ze($e(e,me,r));let H=Pe(e);return{c(){o=y("div"),t=y("h4"),t.textContent=s,l=g(),n=y("div"),a=y("button"),a.textContent=m,c=g(),_=y("button"),_.textContent=i,u=g(),f=y("button"),f.textContent=h,w=g(),T=y("button"),T.textContent=j,b=g(),D=y("button"),D.textContent=Q,U=g(),R=y("div"),z=y("h4"),z.textContent=p,P=g(),S=y("div"),M=y("button"),te=Z(X),_e=Z(" notes auto-refresh"),he=g(),E&&E.c(),oe=g(),V=y("button"),se=Z(Y),de=Z(" hints"),ne=g(),x=y("div"),W=y("h4"),W.textContent=ye,ve=g(),A=y("div");for(let r=0;r<9;r+=1)q[r].c();le=g(),ce=y("br"),re=g(),H.c(),J=ge(),this.h()},l(r){o=N(r,"DIV",{});var k=B(o);t=N(k,"H4",{"data-svelte-h":!0}),I(t)!=="svelte-1h8cvtc"&&(t.textContent=s),l=G(k),n=N(k,"DIV",{class:!0});var d=B(n);a=N(d,"BUTTON",{"data-svelte-h":!0}),I(a)!=="svelte-bivxk4"&&(a.textContent=m),c=G(d),_=N(d,"BUTTON",{"data-svelte-h":!0}),I(_)!=="svelte-1oh0e6u"&&(_.textContent=i),u=G(d),f=N(d,"BUTTON",{"data-svelte-h":!0}),I(f)!=="svelte-1wjgins"&&(f.textContent=h),w=G(d),T=N(d,"BUTTON",{"data-svelte-h":!0}),I(T)!=="svelte-hocye6"&&(T.textContent=j),b=G(d),D=N(d,"BUTTON",{"data-svelte-h":!0}),I(D)!=="svelte-g7g4he"&&(D.textContent=Q),d.forEach(C),k.forEach(C),U=G(r),R=N(r,"DIV",{});var F=B(R);z=N(F,"H4",{"data-svelte-h":!0}),I(z)!=="svelte-8gx0az"&&(z.textContent=p),P=G(F),S=N(F,"DIV",{class:!0});var L=B(S);M=N(L,"BUTTON",{});var ke=B(M);te=ee(ke,X),_e=ee(ke," notes auto-refresh"),ke.forEach(C),he=G(L),E&&E.l(L),oe=G(L),V=N(L,"BUTTON",{});var we=B(V);se=ee(we,Y),de=ee(we," hints"),we.forEach(C),L.forEach(C),F.forEach(C),ne=G(r),x=N(r,"DIV",{});var ae=B(x);W=N(ae,"H4",{"data-svelte-h":!0}),I(W)!=="svelte-hclwgd"&&(W.textContent=ye),ve=G(ae),A=N(ae,"DIV",{class:!0});var Te=B(A);for(let be=0;be<9;be+=1)q[be].l(Te);Te.forEach(C),ae.forEach(C),le=G(r),ce=N(r,"BR",{}),re=G(r),H.l(r),J=ge(),this.h()},h(){ie(n,"class","grid-controls svelte-zwzkqm"),ie(S,"class","notes-controls svelte-zwzkqm"),ie(A,"class","highlights-controls")},m(r,k){O(r,o,k),v(o,t),v(o,l),v(o,n),v(n,a),v(n,c),v(n,_),v(n,u),v(n,f),v(n,w),v(n,T),v(n,b),v(n,D),O(r,U,k),O(r,R,k),v(R,z),v(R,P),v(R,S),v(S,M),v(M,te),v(M,_e),v(S,he),E&&E.m(S,null),v(S,oe),v(S,V),v(V,se),v(V,de),O(r,ne,k),O(r,x,k),v(x,W),v(x,ve),v(x,A);for(let d=0;d<9;d+=1)q[d]&&q[d].m(A,null);O(r,le,k),O(r,ce,k),O(r,re,k),H.m(r,k),O(r,J,k),K=!0,pe||(Ee=[$(a,"click",e[10]),$(_,"click",e[11]),$(f,"click",e[12]),$(T,"click",e[13]),$(D,"click",e[14]),$(M,"click",e[15]),$(V,"click",e[17])],pe=!0)},p(r,[k]){if((!K||k&2)&&X!==(X=r[1]?"Disable":"Enable")&&Ge(te,X),r[1]?E&&(E.d(1),E=null):E?E.p(r,k):(E=xe(r),E.c(),E.m(S,oe)),(!K||k&4)&&Y!==(Y=r[2]?"Hide":"Display")&&Ge(se,Y),k&8){me=Se([1,2,3,4,5,6,7,8,9]);let d;for(d=0;d<9;d+=1){const F=$e(r,me,d);q[d]?q[d].p(F,k):(q[d]=ze(F),q[d].c(),q[d].m(A,null))}for(;d<9;d+=1)q[d].d(1)}k&1&&Me(Ne,Ne=r[0])?(Ye(),ue(H,1,1,Ve),Xe(),H=Pe(r),H.c(),fe(H,1),H.m(J.parentNode,J)):H.p(r,k)},i(r){K||(fe(H),K=!0)},o(r){ue(H),K=!1},d(r){r&&(C(o),C(U),C(R),C(ne),C(x),C(le),C(ce),C(re),C(J)),E&&E.d(),Fe(q,r),H.d(r),pe=!1,We(Ee)}}}function vt(e,o,t){let s;Je(e,Be,p=>t(3,s=p));let l=Ie();const n=[Ce(l)];let a=!1,m=!1;const c=p=>{lt(p.detail.cell,p.detail.update),i()},_=p=>{ct(l,p.detail.position),i()},i=p=>{a&&it(l),m?h(l):Ue.set([]),t(0,l),!(p!=null&&p.noHistory)&&n.push(Ce(l))},u=()=>{t(0,l=ut(l)),i()},f=()=>{for(let p=0;p<9;p++)for(let P=0;P<9;P++)t(0,l[p][P].fixed=!1,l)},h=p=>{Ue.set([..._t(p),...ft(p),...ht(p)])};return[l,a,m,s,n,c,_,i,u,f,()=>{t(0,l=n.pop()),i({noHistory:!0})},()=>{t(0,l=Ie()),i()},()=>{u(),i()},()=>{rt(l),i()},()=>{f(),i()},()=>{t(1,a=!a),i()},()=>{at(l),i()},()=>{t(2,m=!m),i()},p=>{Ke(Be,s=s===p?void 0:p,s)}]}class bt extends Le{constructor(o){super(),Qe(this,o,vt,dt,Me,{})}}export{bt as component};
