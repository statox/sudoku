import{s as De,f as j,a as F,g as C,H as ce,c as U,h as Q,d as A,j as ue,S as we,T as ze,i as X,U as _e,I as p,y as ye,G as pe,J as he,C as Ge,o as Fe,l as V,m as Z,V as Ue,n as re,W as xe}from"../chunks/scheduler.23345331.js";import{e as ie}from"../chunks/each.1adf8f5c.js";import{S as We,i as Be}from"../chunks/index.9853a5a4.js";import{b as ge}from"../chunks/paths.48b89186.js";import{c as He}from"../chunks/_commonjs-dynamic-modules.302442b1.js";var Ye={exports:{}};(function(o){var n=function(i){var l=Object.prototype,f=l.hasOwnProperty,g=Object.defineProperty||function(t,r,e){t[r]=e.value},u,d=typeof Symbol=="function"?Symbol:{},w=d.iterator||"@@iterator",y=d.asyncIterator||"@@asyncIterator",m=d.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch{h=function(r,e,c){return r[e]=c}}function v(t,r,e,c){var s=r&&r.prototype instanceof x?r:x,a=Object.create(s.prototype),b=new O(c||[]);return g(a,"_invoke",{value:ee(t,e,b)}),a}i.wrap=v;function N(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(c){return{type:"throw",arg:c}}}var G="suspendedStart",D="suspendedYield",I="executing",P="completed",k={};function x(){}function W(){}function S(){}var K={};h(K,w,function(){return this});var z=Object.getPrototypeOf,q=z&&z(z(J([])));q&&q!==l&&f.call(q,w)&&(K=q);var B=S.prototype=x.prototype=Object.create(K);W.prototype=S,g(B,"constructor",{value:S,configurable:!0}),g(S,"constructor",{value:W,configurable:!0}),W.displayName=h(S,m,"GeneratorFunction");function $(t){["next","throw","return"].forEach(function(r){h(t,r,function(e){return this._invoke(r,e)})})}i.isGeneratorFunction=function(t){var r=typeof t=="function"&&t.constructor;return r?r===W||(r.displayName||r.name)==="GeneratorFunction":!1},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h(t,m,"GeneratorFunction")),t.prototype=Object.create(B),t},i.awrap=function(t){return{__await:t}};function H(t,r){function e(a,b,_,E){var L=N(t[a],t,b);if(L.type==="throw")E(L.arg);else{var se=L.arg,oe=se.value;return oe&&typeof oe=="object"&&f.call(oe,"__await")?r.resolve(oe.__await).then(function(ne){e("next",ne,_,E)},function(ne){e("throw",ne,_,E)}):r.resolve(oe).then(function(ne){se.value=ne,_(se)},function(ne){return e("throw",ne,_,E)})}}var c;function s(a,b){function _(){return new r(function(E,L){e(a,b,E,L)})}return c=c?c.then(_,_):_()}g(this,"_invoke",{value:s})}$(H.prototype),h(H.prototype,y,function(){return this}),i.AsyncIterator=H,i.async=function(t,r,e,c,s){s===void 0&&(s=Promise);var a=new H(v(t,r,e,c),s);return i.isGeneratorFunction(r)?a:a.next().then(function(b){return b.done?b.value:a.next()})};function ee(t,r,e){var c=G;return function(a,b){if(c===I)throw new Error("Generator is already running");if(c===P){if(a==="throw")throw b;return R()}for(e.method=a,e.arg=b;;){var _=e.delegate;if(_){var E=Y(_,e);if(E){if(E===k)continue;return E}}if(e.method==="next")e.sent=e._sent=e.arg;else if(e.method==="throw"){if(c===G)throw c=P,e.arg;e.dispatchException(e.arg)}else e.method==="return"&&e.abrupt("return",e.arg);c=I;var L=N(t,r,e);if(L.type==="normal"){if(c=e.done?P:D,L.arg===k)continue;return{value:L.arg,done:e.done}}else L.type==="throw"&&(c=P,e.method="throw",e.arg=L.arg)}}}function Y(t,r){var e=r.method,c=t.iterator[e];if(c===u)return r.delegate=null,e==="throw"&&t.iterator.return&&(r.method="return",r.arg=u,Y(t,r),r.method==="throw")||e!=="return"&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),k;var s=N(c,t.iterator,r.arg);if(s.type==="throw")return r.method="throw",r.arg=s.arg,r.delegate=null,k;var a=s.arg;if(!a)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,k;if(a.done)r[t.resultName]=a.value,r.next=t.nextLoc,r.method!=="return"&&(r.method="next",r.arg=u);else return a;return r.delegate=null,k}$(B),h(B,m,"Generator"),h(B,w,function(){return this}),h(B,"toString",function(){return"[object Generator]"});function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function M(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}i.keys=function(t){var r=Object(t),e=[];for(var c in r)e.push(c);return e.reverse(),function s(){for(;e.length;){var a=e.pop();if(a in r)return s.value=a,s.done=!1,s}return s.done=!0,s}};function J(t){if(t){var r=t[w];if(r)return r.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var e=-1,c=function s(){for(;++e<t.length;)if(f.call(t,e))return s.value=t[e],s.done=!1,s;return s.value=u,s.done=!0,s};return c.next=c}}return{next:R}}i.values=J;function R(){return{value:u,done:!0}}return O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(M),!t)for(var r in this)r.charAt(0)==="t"&&f.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0],r=t.completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(E,L){return a.type="throw",a.arg=t,r.next=E,L&&(r.method="next",r.arg=u),!!L}for(var c=this.tryEntries.length-1;c>=0;--c){var s=this.tryEntries[c],a=s.completion;if(s.tryLoc==="root")return e("end");if(s.tryLoc<=this.prev){var b=f.call(s,"catchLoc"),_=f.call(s,"finallyLoc");if(b&&_){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else if(b){if(this.prev<s.catchLoc)return e(s.catchLoc,!0)}else if(_){if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var c=this.tryEntries[e];if(c.tryLoc<=this.prev&&f.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var s=c;break}}s&&(t==="break"||t==="continue")&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=r,s?(this.method="next",this.next=s.finallyLoc,k):this.complete(a)},complete:function(t,r){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&r&&(this.next=r),k},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),M(e),k}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var c=e.completion;if(c.type==="throw"){var s=c.arg;M(e)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:J(t),resultName:r,nextLoc:e},this.method==="next"&&(this.arg=u),k}},i}(o.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(Ye);var me=(o,n)=>`${o}-${n}-${Math.random().toString(16).slice(3,8)}`;const Ke=me;let Ee=0;var Ne=({id:o,action:n,payload:i={}})=>{let l=o;return typeof l>"u"&&(l=Ke("Job",Ee),Ee+=1),{id:l,action:n,payload:i}},le={};let be=!1;le.logging=be;le.setLogging=o=>{be=o};le.log=(...o)=>be?console.log.apply(globalThis,o):null;const Je=Ne,{log:fe}=le,qe=me;let Le=0;var Ve=()=>{const o=qe("Scheduler",Le),n={},i={};let l=[];Le+=1;const f=()=>l.length,g=()=>Object.keys(n).length,u=()=>{if(l.length!==0){const h=Object.keys(n);for(let v=0;v<h.length;v+=1)if(typeof i[h[v]]>"u"){l[0](n[h[v]]);break}}},d=(h,v)=>new Promise((N,G)=>{const D=Je({action:h,payload:v});l.push(async I=>{l.shift(),i[I.id]=D;try{N(await I[h].apply(globalThis,[...v,D.id]))}catch(P){G(P)}finally{delete i[I.id],u()}}),fe(`[${o}]: Add ${D.id} to JobQueue`),fe(`[${o}]: JobQueue length=${l.length}`),u()});return{addWorker:h=>(n[h.id]=h,fe(`[${o}]: Add ${h.id}`),fe(`[${o}]: Number of workers=${g()}`),u(),h.id),addJob:async(h,...v)=>{if(g()===0)throw Error(`[${o}]: You need to have at least one worker before adding jobs`);return d(h,v)},terminate:async()=>{Object.keys(n).forEach(async h=>{await n[h].terminate()}),l=[]},getQueueLen:f,getNumWorkers:g}};function Ze(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Qe=Ze;const Xe=Qe;var et=o=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":Xe()?n.type="electron":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof He=="function"&&(n.type="node"),typeof o>"u"?n:n[o]};const tt=et("type")==="browser",rt=tt?o=>new URL(o,window.location.href).href:o=>o;var ot=o=>{const n={...o};return["corePath","workerPath","langPath"].forEach(i=>{o[i]&&(n[i]=rt(n[i]))}),n},nt=o=>{const n=[],i=[],l=[],f=[],g=[];return o.blocks&&o.blocks.forEach(u=>{u.paragraphs.forEach(d=>{d.lines.forEach(w=>{w.words.forEach(y=>{y.symbols.forEach(m=>{g.push({...m,page:o,block:u,paragraph:d,line:w,word:y})}),f.push({...y,page:o,block:u,paragraph:d,line:w})}),l.push({...w,page:o,block:u,paragraph:d})}),i.push({...d,page:o,block:u})}),n.push({...u,page:o})}),{...o,blocks:n,paragraphs:i,lines:l,words:f,symbols:g}},Pe={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const st="tesseract.js",at="5.0.5",it="Pure Javascript Multilingual OCR",lt="src/index.js",ct="src/index.d.ts",ut="dist/tesseract.min.js",ft="dist/tesseract.min.js",ht={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},dt={"./src/worker/node/index.js":"./src/worker/browser/index.js"},pt="",gt=["jeromewu"],vt="Apache-2.0",mt={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},bt={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},wt={"@rollup/pluginutils":"^5.0.2"},_t={type:"git",url:"https://github.com/naptha/tesseract.js.git"},yt={url:"https://github.com/naptha/tesseract.js/issues"},Et="https://github.com/naptha/tesseract.js",Lt={type:"opencollective",url:"https://opencollective.com/tesseractjs"},kt={name:st,version:at,description:it,main:lt,types:ct,unpkg:ut,jsdelivr:ft,scripts:ht,browser:dt,author:pt,contributors:gt,license:vt,devDependencies:mt,dependencies:bt,overrides:wt,repository:_t,bugs:yt,homepage:Et,collective:Lt};var St={workerBlobURL:!0,logger:()=>{}};const Tt=kt.version,Ot=St;var At={...Ot,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Tt}/dist/worker.min.js`},Rt=({workerPath:o,workerBlobURL:n})=>{let i;if(Blob&&URL&&n){const l=new Blob([`importScripts("${o}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(l))}else i=new Worker(o);return i},It=o=>{o.terminate()},jt=(o,n)=>{o.onmessage=({data:i})=>{n(i)}},Ct=async(o,n)=>{o.postMessage(n)};const de=o=>new Promise((n,i)=>{const l=new FileReader;l.onload=()=>{n(l.result)},l.onerror=({target:{error:{code:f}}})=>{i(Error(`File could not be read! Code=${f}`))},l.readAsArrayBuffer(o)}),ve=async o=>{let n=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?n=atob(o.split(",")[1]).split("").map(i=>i.charCodeAt(0)):n=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(n=await ve(o.src)),o.tagName==="VIDEO"&&(n=await ve(o.poster)),o.tagName==="CANVAS"&&await new Promise(i=>{o.toBlob(async l=>{n=await de(l),i()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const i=await o.convertToBlob();n=await de(i)}else(o instanceof File||o instanceof Blob)&&(n=await de(o));return new Uint8Array(n)};var Nt=ve;const Pt=At,$t=Rt,Mt=It,Dt=jt,zt=Ct,Gt=Nt;var Ft={defaultOptions:Pt,spawnWorker:$t,terminateWorker:Mt,onMessage:Dt,send:zt,loadImage:Gt};const Ut=ot,xt=nt,te=Ne,{log:ke}=le,Wt=me,ae=Pe,{defaultOptions:Bt,spawnWorker:Ht,terminateWorker:Yt,onMessage:Kt,loadImage:Se,send:Jt}=Ft;let Te=0;var $e=async(o="eng",n=ae.LSTM_ONLY,i={},l={})=>{const f=Wt("Worker",Te),{logger:g,errorHandler:u,...d}=Ut({...Bt,...i}),w={},y={},m=typeof o=="string"?o.split("+"):o;let h=n,v=l;const N=[ae.DEFAULT,ae.LSTM_ONLY].includes(n)&&!d.legacyCore;let G,D;const I=new Promise((s,a)=>{D=s,G=a}),P=s=>{G(s.message)};let k=Ht(d);k.onerror=P,Te+=1;const x=(s,a)=>{w[s]=a},W=(s,a)=>{y[s]=a},S=({id:s,action:a,payload:b})=>new Promise((_,E)=>{ke(`[${f}]: Start ${s}, action=${a}`);const L=`${a}-${s}`;x(L,_),W(L,E),Jt(k,{workerId:f,jobId:s,action:a,payload:b})}),K=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),z=s=>S(te({id:s,action:"load",payload:{options:{lstmOnly:N,corePath:d.corePath,logging:d.logging}}})),q=(s,a,b)=>S(te({id:b,action:"FS",payload:{method:"writeFile",args:[s,a]}})),B=(s,a)=>S(te({id:a,action:"FS",payload:{method:"readFile",args:[s,{encoding:"utf8"}]}})),$=(s,a)=>S(te({id:a,action:"FS",payload:{method:"unlink",args:[s]}})),H=(s,a,b)=>S(te({id:b,action:"FS",payload:{method:s,args:a}})),ee=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Y=(s,a)=>S(te({id:a,action:"loadLanguage",payload:{langs:s,options:{langPath:d.langPath,dataPath:d.dataPath,cachePath:d.cachePath,cacheMethod:d.cacheMethod,gzip:d.gzip,lstmOnly:[ae.LSTM_ONLY,ae.TESSERACT_LSTM_COMBINED].includes(h)&&!d.legacyLang}}})),T=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),M=(s,a,b,_)=>S(te({id:_,action:"initialize",payload:{langs:s,oem:a,config:b}})),O=(s="eng",a,b,_)=>{if(N&&[ae.TESSERACT_ONLY,ae.TESSERACT_LSTM_COMBINED].includes(a))throw Error("Legacy model requested but code missing.");const E=a||h;h=E;const L=b||v;v=L;const oe=(typeof s=="string"?s.split("+"):s).filter(ne=>!m.includes(ne));return m.push(...oe),oe.length>0?Y(oe,_).then(()=>M(s,E,L,_)):M(s,E,L,_)},J=(s={},a)=>S(te({id:a,action:"setParameters",payload:{params:s}})),R=async(s,a={},b={blocks:!0,text:!0,hocr:!0,tsv:!0},_)=>S(te({id:_,action:"recognize",payload:{image:await Se(s),options:a,output:b}})),t=(s="Tesseract OCR Result",a=!1,b)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),S(te({id:b,action:"getPDF",payload:{title:s,textonly:a}}))),r=async(s,a)=>{if(N)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return S(te({id:a,action:"detect",payload:{image:await Se(s)}}))},e=async()=>(k!==null&&(Yt(k),k=null),Promise.resolve());Kt(k,({workerId:s,jobId:a,status:b,action:_,data:E})=>{const L=`${_}-${a}`;if(b==="resolve"){ke(`[${s}]: Complete ${a}`);let se=E;_==="recognize"?se=xt(E):_==="getPDF"&&(se=Array.from({...E,length:Object.keys(E).length})),w[L]({jobId:a,data:se})}else if(b==="reject")if(y[L](E),_==="load"&&G(E),u)u(E);else throw Error(E);else b==="progress"&&g({...E,userJobId:a})});const c={id:f,worker:k,setResolve:x,setReject:W,load:K,writeText:q,readText:B,removeFile:$,FS:H,loadLanguage:ee,initialize:T,reinitialize:O,setParameters:J,recognize:R,getPDF:t,detect:r,terminate:e};return z().then(()=>Y(o)).then(()=>M(o,n,l)).then(()=>D(c)).catch(()=>{}),I};const Me=$e,qt=async(o,n,i)=>{const l=await Me(n,1,i);return l.recognize(o).finally(async()=>{await l.terminate()})},Vt=async(o,n)=>{const i=await Me("osd",0,n);return i.detect(o).finally(async()=>{await i.terminate()})};var Zt={recognize:qt,detect:Vt},Qt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Xt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const er=Ve,tr=$e,rr=Zt,or=Qt,nr=Pe,sr=Xt,{setLogging:ar}=le;var ir={languages:or,OEM:nr,PSM:sr,createScheduler:er,createWorker:tr,setLogging:ar,...rr};function Oe(o,n,i){const l=o.slice();return l[7]=n[i],l}function Ae(o,n,i){const l=o.slice();return l[10]=n[i],l}function Re(o,n,i){const l=o.slice();return l[13]=n[i],l}function Ie(o){let n,i=o[13]+"",l,f;return{c(){n=j("option"),l=V(i),f=F(),this.h()},l(g){n=C(g,"OPTION",{});var u=Q(n);l=Z(u,i),f=U(u),u.forEach(A),this.h()},h(){n.__value=o[13],Ue(n,n.__value)},m(g,u){X(g,n,u),p(n,l),p(n,f)},p:pe,d(g){g&&A(n)}}}function je(o){var J,R,t;let n,i,l=((J=o[10].choices[0])==null?void 0:J.text)+"",f,g,u,d=((t=(R=o[10].choices[0])==null?void 0:R.confidence)==null?void 0:t.toFixed(2))+"",w,y,m,h=o[10].bbox.x0+"",v,N,G,D=o[10].bbox.y0+"",I,P,k,x=o[10].bbox.x1+"",W,S,K,z=o[10].bbox.y1+"",q,B,$,H=o[10].bbox.x1-o[10].bbox.x0+"",ee,Y,T=o[10].bbox.y1-o[10].bbox.y0+"",M,O;return{c(){n=j("tr"),i=j("td"),f=V(l),g=F(),u=j("td"),w=V(d),y=F(),m=j("td"),v=V(h),N=F(),G=j("td"),I=V(D),P=F(),k=j("td"),W=V(x),S=F(),K=j("td"),q=V(z),B=F(),$=j("td"),ee=V(H),Y=V(", "),M=V(T),O=F()},l(r){n=C(r,"TR",{});var e=Q(n);i=C(e,"TD",{});var c=Q(i);f=Z(c,l),c.forEach(A),g=U(e),u=C(e,"TD",{});var s=Q(u);w=Z(s,d),s.forEach(A),y=U(e),m=C(e,"TD",{});var a=Q(m);v=Z(a,h),a.forEach(A),N=U(e),G=C(e,"TD",{});var b=Q(G);I=Z(b,D),b.forEach(A),P=U(e),k=C(e,"TD",{});var _=Q(k);W=Z(_,x),_.forEach(A),S=U(e),K=C(e,"TD",{});var E=Q(K);q=Z(E,z),E.forEach(A),B=U(e),$=C(e,"TD",{});var L=Q($);ee=Z(L,H),Y=Z(L,", "),M=Z(L,T),L.forEach(A),O=U(e),e.forEach(A)},m(r,e){X(r,n,e),p(n,i),p(i,f),p(n,g),p(n,u),p(u,w),p(n,y),p(n,m),p(m,v),p(n,N),p(n,G),p(G,I),p(n,P),p(n,k),p(k,W),p(n,S),p(n,K),p(K,q),p(n,B),p(n,$),p($,ee),p($,Y),p($,M),p(n,O)},p(r,e){var c,s,a;e&2&&l!==(l=((c=r[10].choices[0])==null?void 0:c.text)+"")&&re(f,l),e&2&&d!==(d=((a=(s=r[10].choices[0])==null?void 0:s.confidence)==null?void 0:a.toFixed(2))+"")&&re(w,d),e&2&&h!==(h=r[10].bbox.x0+"")&&re(v,h),e&2&&D!==(D=r[10].bbox.y0+"")&&re(I,D),e&2&&x!==(x=r[10].bbox.x1+"")&&re(W,x),e&2&&z!==(z=r[10].bbox.y1+"")&&re(q,z),e&2&&H!==(H=r[10].bbox.x1-r[10].bbox.x0+"")&&re(ee,H),e&2&&T!==(T=r[10].bbox.y1-r[10].bbox.y0+"")&&re(M,T)},d(r){r&&A(n)}}}function Ce(o){let n,i=o[7].status+"",l,f,g=(o[7].progress*100).toFixed(0)+"",u,d;return{c(){n=j("li"),l=V(i),f=V(" - "),u=V(g),d=V("%")},l(w){n=C(w,"LI",{});var y=Q(n);l=Z(y,i),f=Z(y," - "),u=Z(y,g),d=Z(y,"%"),y.forEach(A)},m(w,y){X(w,n,y),p(n,l),p(n,f),p(n,u),p(n,d)},p(w,y){y&4&&i!==(i=w[7].status+"")&&re(l,i),y&4&&g!==(g=(w[7].progress*100).toFixed(0)+"")&&re(u,g)},d(w){w&&A(n)}}}function lr(o){let n,i=`<p>This page uses <a target="_blank" rel="noopener noreferrer" href="https://github.com/naptha/tesseract.js">tesseract.js</a> to do some OCR
        on images to detect digits from 1 to 9.</p> <p>It works well on the image <code>2342.png</code> because the digits are all next to each other and form a word but tesseract is not the right
        tool to recognize a complete sudoku grid. Instead I&#39;ll experiment with another tool like openCV to first detect the rectangles in the image
        and once each rectable is identified see if I can use tesseract or a simpler pattern matching method to identify the content of the cells.</p>`,l,f,g,u,d,w="Select an image to analyze",y,m,h,v,N,G="Results:",D,I,P,k="<th>text</th> <th>confidence</th> <th>bbox.x0</th> <th>bbox.y0</th> <th>bbox.x1</th> <th>bbox.y1</th> <th>Size (w, h)</th>",x,W,S,K,z,q="Progress:",B,$,H,ee,Y=ie(o[3]),T=[];for(let t=0;t<Y.length;t+=1)T[t]=Ie(Re(o,Y,t));let M=ie(o[1].sort(o[5])),O=[];for(let t=0;t<M.length;t+=1)O[t]=je(Ae(o,M,t));let J=ie(o[2]),R=[];for(let t=0;t<J.length;t+=1)R[t]=Ce(Oe(o,J,t));return{c(){n=j("div"),n.innerHTML=i,l=F(),f=j("img"),u=F(),d=j("label"),d.textContent=w,y=F(),m=j("select");for(let t=0;t<T.length;t+=1)T[t].c();h=F(),v=j("div"),N=j("span"),N.textContent=G,D=F(),I=j("table"),P=j("thead"),P.innerHTML=k,x=F();for(let t=0;t<O.length;t+=1)O[t].c();W=F(),S=j("hr"),K=F(),z=j("span"),z.textContent=q,B=F(),$=j("ul");for(let t=0;t<R.length;t+=1)R[t].c();this.h()},l(t){n=C(t,"DIV",{"data-svelte-h":!0}),ce(n)!=="svelte-1gt2nrt"&&(n.innerHTML=i),l=U(t),f=C(t,"IMG",{alt:!0,src:!0}),u=U(t),d=C(t,"LABEL",{for:!0,"data-svelte-h":!0}),ce(d)!=="svelte-1qttjym"&&(d.textContent=w),y=U(t),m=C(t,"SELECT",{id:!0});var r=Q(m);for(let a=0;a<T.length;a+=1)T[a].l(r);r.forEach(A),h=U(t),v=C(t,"DIV",{});var e=Q(v);N=C(e,"SPAN",{"data-svelte-h":!0}),ce(N)!=="svelte-xq0pt2"&&(N.textContent=G),D=U(e),I=C(e,"TABLE",{});var c=Q(I);P=C(c,"THEAD",{"data-svelte-h":!0}),ce(P)!=="svelte-v4zs5d"&&(P.innerHTML=k),x=U(c);for(let a=0;a<O.length;a+=1)O[a].l(c);c.forEach(A),W=U(e),S=C(e,"HR",{}),K=U(e),z=C(e,"SPAN",{"data-svelte-h":!0}),ce(z)!=="svelte-i4uavb"&&(z.textContent=q),B=U(e),$=C(e,"UL",{});var s=Q($);for(let a=0;a<R.length;a+=1)R[a].l(s);s.forEach(A),e.forEach(A),this.h()},h(){ue(f,"alt","data to analyze"),we(f.src,g=ge+"/test-images/"+o[0])||ue(f,"src",g),ue(d,"for","imageInput"),ue(m,"id","imageInput"),o[0]===void 0&&ze(()=>o[6].call(m))},m(t,r){X(t,n,r),X(t,l,r),X(t,f,r),X(t,u,r),X(t,d,r),X(t,y,r),X(t,m,r);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(m,null);_e(m,o[0],!0),X(t,h,r),X(t,v,r),p(v,N),p(v,D),p(v,I),p(I,P),p(I,x);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(I,null);p(v,W),p(v,S),p(v,K),p(v,z),p(v,B),p(v,$);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m($,null);H||(ee=[ye(m,"change",o[6]),ye(m,"change",o[4])],H=!0)},p(t,[r]){if(r&9&&!we(f.src,g=ge+"/test-images/"+t[0])&&ue(f,"src",g),r&8){Y=ie(t[3]);let e;for(e=0;e<Y.length;e+=1){const c=Re(t,Y,e);T[e]?T[e].p(c,r):(T[e]=Ie(c),T[e].c(),T[e].m(m,null))}for(;e<T.length;e+=1)T[e].d(1);T.length=Y.length}if(r&9&&_e(m,t[0]),r&34){M=ie(t[1].sort(t[5]));let e;for(e=0;e<M.length;e+=1){const c=Ae(t,M,e);O[e]?O[e].p(c,r):(O[e]=je(c),O[e].c(),O[e].m(I,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=M.length}if(r&4){J=ie(t[2]);let e;for(e=0;e<J.length;e+=1){const c=Oe(t,J,e);R[e]?R[e].p(c,r):(R[e]=Ce(c),R[e].c(),R[e].m($,null))}for(;e<R.length;e+=1)R[e].d(1);R.length=J.length}},i:pe,o:pe,d(t){t&&(A(n),A(l),A(f),A(u),A(d),A(y),A(m),A(h),A(v)),he(T,t),he(O,t),he(R,t),H=!1,Ge(ee)}}}function cr(o,n,i){const l=["2342.png","sudoku.png","opencv_github.png","sudoku_colors.png"];let f=l[0],g=[],u=[];const d=async()=>{i(1,g=[]),i(2,u=[]);const m=await ir.createWorker("eng",1,{logger:v=>{i(2,u=[v,...u])}});await m.setParameters({tessedit_char_whitelist:"123456789"});const h=await m.recognize(ge+"/test-images/"+f);i(1,g=h.data.symbols),await m.terminate()},w=(m,h)=>m.bbox.y0-h.bbox.y0||m.bbox.x0-h.bbox.x0;Fe(()=>d());function y(){f=xe(this),i(0,f),i(3,l)}return[f,g,u,l,d,w,y]}class gr extends We{constructor(n){super(),Be(this,n,cr,lr,De,{})}}export{gr as component};
