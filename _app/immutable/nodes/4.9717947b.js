import{s as ut,f as d,a as m,l as A,e as $,g as b,H as g,c as h,h as ct,m as Z,d as a,i as f,I as D,y as w,n as tt,C as pt,G as _t}from"../chunks/scheduler.71239b2e.js";import{S as mt,i as ht,t as z,c as kt,a as E,b as et,d as nt,m as lt,e as st,g as Ct}from"../chunks/index.8ab45ecd.js";import{f as K,d as ot,h as it,i as at,j as dt,S as bt,G as vt,u as yt,w as Tt,g as Nt}from"../chunks/GridStatus.2128ccbc.js";const gt=s=>{const l=K(),n=[l];let o=0;for(;n.length&&o++<200;){const t=n.pop();if(s.push(ot(t)),it(t))continue;if(at(t)){if(dt(t))return t;continue}const r=Gt(t);if(!r.length)continue;const c=Math.floor(Math.random()*r.length),u=r[c],p=ot(t);p[u.row][u.col].notes=p[u.row][u.col].notes.filter(N=>N!==u.value),n.push(p),xt(t,u),ft(t),n.push(t)}return l},J=(s,l,n,o)=>{if(s[l][n].value)return!1;const t=s[l][n].notes.indexOf(o);return t===-1?!1:(s[l][n].notes.splice(t,1),s[l][n].notes.length===1?(s[l][n].value=s[l][n].notes.pop(),!0):!1)},ft=s=>{if(at(s)||it(s))return;let l=!1;for(let n=0;n<9;n++)for(let o=0;o<9;o++){const{value:t}=s[n][o];if(!t)continue;for(let u=0;u<9;u++)l=l||J(s,u,o,t),l=l||J(s,n,u,t);const r=Math.floor(o/3),c=Math.floor(n/3);for(let u=0;u<3;u++)for(let p=0;p<3;p++)l=l||J(s,3*c+u,3*r+p,t)}l&&ft(s)},wt=(s,l)=>{const{row:n,col:o,value:t}=l;return!(s[n][o].value||!s[n][o].notes.includes(t))},xt=(s,l)=>{if(!wt(s,l))return;const{row:n,col:o,value:t}=l;s[n][o].value=t,s[n][o].notes=[]},Gt=s=>{let l=[],n=9;for(let o=0;o<9;o++)for(let t=0;t<9;t++){if(s[o][t].value!==void 0)continue;const{notes:r}=s[o][t];if(r.length<n&&(n=r.length,l=[]),r.length===n)for(const c of s[o][t].notes)l.push({row:o,col:t,value:c})}return l};function rt(s){let l,n,o,t;return l=new bt({props:{grid:s[0]}}),l.$on("cellUpdate",s[3]),o=new vt({props:{grid:s[0]}}),{c(){et(l.$$.fragment),n=m(),et(o.$$.fragment)},l(r){nt(l.$$.fragment,r),n=h(r),nt(o.$$.fragment,r)},m(r,c){lt(l,r,c),f(r,n,c),lt(o,r,c),t=!0},p(r,c){const u={};c&1&&(u.grid=r[0]),l.$set(u);const p={};c&1&&(p.grid=r[0]),o.$set(p)},i(r){t||(E(l.$$.fragment,r),E(o.$$.fragment,r),t=!0)},o(r){z(l.$$.fragment,r),z(o.$$.fragment,r),t=!1},d(r){r&&a(n),st(l,r),st(o,r)}}}function Ht(s){let l,n="Reset grid",o,t,r="Run one step",c,u,p="Generate complete grid",N,H,M,k,V="Generate complete grid (new algo)",U,C,B="Zero history",S,v,L="Prev in history",P,y,Q="Next in history",R,T,q,W,O=s[1].length+"",F,I,X=s[0],x,G,j,Y,_=rt(s);return{c(){l=d("button"),l.textContent=n,o=m(),t=d("button"),t.textContent=r,c=m(),u=d("button"),u.textContent=p,N=m(),H=d("br"),M=m(),k=d("button"),k.textContent=V,U=m(),C=d("button"),C.textContent=B,S=m(),v=d("button"),v.textContent=L,P=m(),y=d("button"),y.textContent=Q,R=m(),T=d("span"),q=A(s[2]),W=A(" / "),F=A(O),I=m(),_.c(),x=$()},l(e){l=b(e,"BUTTON",{"data-svelte-h":!0}),g(l)!=="svelte-cddr2q"&&(l.textContent=n),o=h(e),t=b(e,"BUTTON",{"data-svelte-h":!0}),g(t)!=="svelte-fjkgb7"&&(t.textContent=r),c=h(e),u=b(e,"BUTTON",{"data-svelte-h":!0}),g(u)!=="svelte-i6tsy6"&&(u.textContent=p),N=h(e),H=b(e,"BR",{}),M=h(e),k=b(e,"BUTTON",{"data-svelte-h":!0}),g(k)!=="svelte-1lb1nf1"&&(k.textContent=V),U=h(e),C=b(e,"BUTTON",{"data-svelte-h":!0}),g(C)!=="svelte-1t24f4y"&&(C.textContent=B),S=h(e),v=b(e,"BUTTON",{"data-svelte-h":!0}),g(v)!=="svelte-13tmk0z"&&(v.textContent=L),P=h(e),y=b(e,"BUTTON",{"data-svelte-h":!0}),g(y)!=="svelte-ygfhk3"&&(y.textContent=Q),R=h(e),T=b(e,"SPAN",{});var i=ct(T);q=Z(i,s[2]),W=Z(i," / "),F=Z(i,O),i.forEach(a),I=h(e),_.l(e),x=$()},m(e,i){f(e,l,i),f(e,o,i),f(e,t,i),f(e,c,i),f(e,u,i),f(e,N,i),f(e,H,i),f(e,M,i),f(e,k,i),f(e,U,i),f(e,C,i),f(e,S,i),f(e,v,i),f(e,P,i),f(e,y,i),f(e,R,i),f(e,T,i),D(T,q),D(T,W),D(T,F),f(e,I,i),_.m(e,i),f(e,x,i),G=!0,j||(Y=[w(l,"click",s[9]),w(t,"click",s[10]),w(u,"click",s[11]),w(k,"click",s[12]),w(C,"click",s[6]),w(v,"click",s[8]),w(y,"click",s[7])],j=!0)},p(e,[i]){(!G||i&4)&&tt(q,e[2]),(!G||i&2)&&O!==(O=e[1].length+"")&&tt(F,O),i&1&&ut(X,X=e[0])?(Ct(),z(_,1,1,_t),kt(),_=rt(e),_.c(),E(_,1),_.m(x.parentNode,x)):_.p(e,i)},i(e){G||(E(_),G=!0)},o(e){z(_),G=!1},d(e){e&&(a(l),a(o),a(t),a(c),a(u),a(N),a(H),a(M),a(k),a(U),a(C),a(S),a(v),a(P),a(y),a(R),a(T),a(I),a(x)),_.d(e),j=!1,pt(Y)}}}function Mt(s,l,n){let o=K(),t=[],r=0;const c=B=>{yt(B.detail.cell,B.detail.update),u()},u=()=>{n(0,o)},p=()=>{n(1,t=[]),n(2,r=0),gt(t),n(2,r=t.length-1),n(0,o=t[r])};return[o,t,r,c,u,p,()=>{n(2,r=0),n(0,o=t[r])},()=>{n(2,r=Math.min(r+1,t.length-1)),n(0,o=t[r])},()=>{n(2,r=Math.max(r-1,0)),n(0,o=t[r])},()=>{n(0,o=K()),u()},()=>{Tt(o),u()},()=>{n(0,o=Nt()),u()},()=>{p()}]}class St extends mt{constructor(l){super(),ht(this,l,Mt,Ht,ut,{})}}export{St as component};
