import{s as pt,f as d,a as C,l as j,e as ot,g as v,h as J,H as U,c as g,d as m,m as K,j as nt,i as y,I as p,y as B,n as lt,C as mt,G as ht}from"../chunks/scheduler.71239b2e.js";import{S as dt,i as vt,t as V,c as Ct,a as q,b as rt,d as at,m as ut,e as ct,g as gt}from"../chunks/index.8ab45ecd.js";import{c as Y,a as Z,d as Q,f as bt,b as kt,g as it,S as yt,G as xt,u as Nt}from"../chunks/GridStatus.a50308e0.js";const Tt=(o,n)=>{if(Y(o)||Z(o))return o;const t=Q(o);bt(t);const l=[t];for(;l.length;){const s=l.pop();if(n.push(Q(s)),Y(s))continue;if(Z(s)){if(kt(s))return s;continue}const e=wt(s);if(!e.length)continue;const i=Math.floor(Math.random()*e.length),r=e[i],u=Q(s);u[r.row][r.col].notes=u[r.row][r.col].notes.filter(x=>x!==r.value),l.push(u),Mt(s,r),_t(s),l.push(s)}return t},X=(o,n,t,l)=>{if(o[n][t].value)return!1;const s=o[n][t].notes.indexOf(l);return s===-1?!1:(o[n][t].notes.splice(s,1),o[n][t].notes.length===1?(o[n][t].value=o[n][t].notes.pop(),!0):!1)},_t=o=>{if(Z(o)||Y(o))return;let n=!1;for(let t=0;t<9;t++)for(let l=0;l<9;l++){const{value:s}=o[t][l];if(!s)continue;for(let r=0;r<9;r++)n=n||X(o,r,l,s),n=n||X(o,t,r,s);const e=Math.floor(l/3),i=Math.floor(t/3);for(let r=0;r<3;r++)for(let u=0;u<3;u++)n=n||X(o,3*i+r,3*e+u,s)}n&&_t(o)},Ht=(o,n)=>{const{row:t,col:l,value:s}=n;return!(o[t][l].value||!o[t][l].notes.includes(s))},Mt=(o,n)=>{if(!Ht(o,n))return;const{row:t,col:l,value:s}=n;o[t][l].value=s,o[t][l].notes=[]},wt=o=>{let n=[],t=9;for(let l=0;l<9;l++)for(let s=0;s<9;s++){if(o[l][s].value!==void 0)continue;const{notes:e}=o[l][s];if(e.length<t&&(t=e.length,n=[]),e.length===t)for(const i of o[l][s].notes)n.push({row:l,col:s,value:i})}return n};function ft(o){let n,t,l,s;return n=new yt({props:{grid:o[0]}}),n.$on("cellUpdate",o[3]),l=new xt({props:{grid:o[0]}}),{c(){rt(n.$$.fragment),t=C(),rt(l.$$.fragment)},l(e){at(n.$$.fragment,e),t=g(e),at(l.$$.fragment,e)},m(e,i){ut(n,e,i),y(e,t,i),ut(l,e,i),s=!0},p(e,i){const r={};i&1&&(r.grid=e[0]),n.$set(r);const u={};i&1&&(u.grid=e[0]),l.$set(u)},i(e){s||(q(n.$$.fragment,e),q(l.$$.fragment,e),s=!0)},o(e){V(n.$$.fragment,e),V(l.$$.fragment,e),s=!1},d(e){e&&m(t),ct(n,e),ct(l,e)}}}function Ut(o){let n,t,l="Reset grid",s,e,i="Fill grid",r,u,x,f,b,z="First step",P,k,O="Prev step",R,N,$="Next step",A,T,tt="Last step",L,H,S,D,I=Math.max(o[1].length-1,0)+"",E,F,et=o[0],M,w,W,st,_=ft(o);return{c(){n=d("div"),t=d("button"),t.textContent=l,s=C(),e=d("button"),e.textContent=i,r=C(),u=d("br"),x=C(),f=d("div"),b=d("button"),b.textContent=z,P=C(),k=d("button"),k.textContent=O,R=C(),N=d("button"),N.textContent=$,A=C(),T=d("button"),T.textContent=tt,L=C(),H=d("span"),S=j(o[2]),D=j(" / "),E=j(I),F=C(),_.c(),M=ot(),this.h()},l(a){n=v(a,"DIV",{class:!0});var c=J(n);t=v(c,"BUTTON",{"data-svelte-h":!0}),U(t)!=="svelte-cddr2q"&&(t.textContent=l),s=g(c),e=v(c,"BUTTON",{"data-svelte-h":!0}),U(e)!=="svelte-i70wsy"&&(e.textContent=i),c.forEach(m),r=g(a),u=v(a,"BR",{}),x=g(a),f=v(a,"DIV",{class:!0});var h=J(f);b=v(h,"BUTTON",{"data-svelte-h":!0}),U(b)!=="svelte-1f64wvg"&&(b.textContent=z),P=g(h),k=v(h,"BUTTON",{"data-svelte-h":!0}),U(k)!=="svelte-gs2lf6"&&(k.textContent=O),R=g(h),N=v(h,"BUTTON",{"data-svelte-h":!0}),U(N)!=="svelte-67enom"&&(N.textContent=$),A=g(h),T=v(h,"BUTTON",{"data-svelte-h":!0}),U(T)!=="svelte-ul0sbo"&&(T.textContent=tt),L=g(h),H=v(h,"SPAN",{});var G=J(H);S=K(G,o[2]),D=K(G," / "),E=K(G,I),G.forEach(m),h.forEach(m),F=g(a),_.l(a),M=ot(),this.h()},h(){nt(n,"class","grid-controls svelte-1vzpge2"),nt(f,"class","history-controls svelte-1vzpge2")},m(a,c){y(a,n,c),p(n,t),p(n,s),p(n,e),y(a,r,c),y(a,u,c),y(a,x,c),y(a,f,c),p(f,b),p(f,P),p(f,k),p(f,R),p(f,N),p(f,A),p(f,T),p(f,L),p(f,H),p(H,S),p(H,D),p(H,E),y(a,F,c),_.m(a,c),y(a,M,c),w=!0,W||(st=[B(t,"click",o[10]),B(e,"click",o[11]),B(b,"click",o[6]),B(k,"click",o[9]),B(N,"click",o[8]),B(T,"click",o[7])],W=!0)},p(a,[c]){(!w||c&4)&&lt(S,a[2]),(!w||c&2)&&I!==(I=Math.max(a[1].length-1,0)+"")&&lt(E,I),c&1&&pt(et,et=a[0])?(gt(),V(_,1,1,ht),Ct(),_=ft(a),_.c(),q(_,1),_.m(M.parentNode,M)):_.p(a,c)},i(a){w||(q(_),w=!0)},o(a){V(_),w=!1},d(a){a&&(m(n),m(r),m(u),m(x),m(f),m(F),m(M)),_.d(a),W=!1,mt(st)}}}function Bt(o,n,t){let l=it(),s=[],e=0;const i=O=>{Nt(O.detail.cell,O.detail.update),r()},r=()=>{t(0,l)},u=()=>{t(1,s=[]),t(2,e=0),Tt(l,s),t(2,e=s.length-1),t(0,l=s[e])};return[l,s,e,i,r,u,()=>{t(2,e=0),t(0,l=s[e])},()=>{t(2,e=s.length-1),t(0,l=s[e])},()=>{t(2,e=Math.min(e+1,s.length-1)),t(0,l=s[e])},()=>{t(2,e=Math.max(e-1,0)),t(0,l=s[e])},()=>{t(0,l=it()),r()},()=>{u()}]}class St extends dt{constructor(n){super(),vt(this,n,Bt,Ut,pt,{})}}export{St as component};
