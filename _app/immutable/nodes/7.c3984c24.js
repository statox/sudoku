import{s as De,f as I,a as F,g as C,H as ce,c as U,h as Q,d as A,j as ue,R as we,S as ze,i as X,T as ye,I as p,y as _e,G as pe,J as de,C as Ge,o as Fe,l as V,m as Z,U as Ue,n as re,V as xe}from"../chunks/scheduler.1dd25009.js";import{e as ie}from"../chunks/each.e58537ba.js";import{S as Be,i as We}from"../chunks/index.18cc0ecb.js";import{b as ge}from"../chunks/paths.b7fbe111.js";var He={exports:{}};(function(o){var n=function(i){var l=Object.prototype,f=l.hasOwnProperty,g=Object.defineProperty||function(t,r,e){t[r]=e.value},u,h=typeof Symbol=="function"?Symbol:{},w=h.iterator||"@@iterator",_=h.asyncIterator||"@@asyncIterator",v=h.toStringTag||"@@toStringTag";function d(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{d({},"")}catch{d=function(r,e,c){return r[e]=c}}function m(t,r,e,c){var s=r&&r.prototype instanceof x?r:x,a=Object.create(s.prototype),b=new O(c||[]);return g(a,"_invoke",{value:ee(t,e,b)}),a}i.wrap=m;function P(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(c){return{type:"throw",arg:c}}}var G="suspendedStart",D="suspendedYield",j="executing",N="completed",k={};function x(){}function B(){}function S(){}var q={};d(q,w,function(){return this});var z=Object.getPrototypeOf,J=z&&z(z(K([])));J&&J!==l&&f.call(J,w)&&(q=J);var W=S.prototype=x.prototype=Object.create(q);B.prototype=S,g(W,"constructor",{value:S,configurable:!0}),g(S,"constructor",{value:B,configurable:!0}),B.displayName=d(S,v,"GeneratorFunction");function $(t){["next","throw","return"].forEach(function(r){d(t,r,function(e){return this._invoke(r,e)})})}i.isGeneratorFunction=function(t){var r=typeof t=="function"&&t.constructor;return r?r===B||(r.displayName||r.name)==="GeneratorFunction":!1},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,d(t,v,"GeneratorFunction")),t.prototype=Object.create(W),t},i.awrap=function(t){return{__await:t}};function H(t,r){function e(a,b,y,E){var L=P(t[a],t,b);if(L.type==="throw")E(L.arg);else{var se=L.arg,oe=se.value;return oe&&typeof oe=="object"&&f.call(oe,"__await")?r.resolve(oe.__await).then(function(ne){e("next",ne,y,E)},function(ne){e("throw",ne,y,E)}):r.resolve(oe).then(function(ne){se.value=ne,y(se)},function(ne){return e("throw",ne,y,E)})}}var c;function s(a,b){function y(){return new r(function(E,L){e(a,b,E,L)})}return c=c?c.then(y,y):y()}g(this,"_invoke",{value:s})}$(H.prototype),d(H.prototype,_,function(){return this}),i.AsyncIterator=H,i.async=function(t,r,e,c,s){s===void 0&&(s=Promise);var a=new H(m(t,r,e,c),s);return i.isGeneratorFunction(r)?a:a.next().then(function(b){return b.done?b.value:a.next()})};function ee(t,r,e){var c=G;return function(a,b){if(c===j)throw new Error("Generator is already running");if(c===N){if(a==="throw")throw b;return R()}for(e.method=a,e.arg=b;;){var y=e.delegate;if(y){var E=Y(y,e);if(E){if(E===k)continue;return E}}if(e.method==="next")e.sent=e._sent=e.arg;else if(e.method==="throw"){if(c===G)throw c=N,e.arg;e.dispatchException(e.arg)}else e.method==="return"&&e.abrupt("return",e.arg);c=j;var L=P(t,r,e);if(L.type==="normal"){if(c=e.done?N:D,L.arg===k)continue;return{value:L.arg,done:e.done}}else L.type==="throw"&&(c=N,e.method="throw",e.arg=L.arg)}}}function Y(t,r){var e=r.method,c=t.iterator[e];if(c===u)return r.delegate=null,e==="throw"&&t.iterator.return&&(r.method="return",r.arg=u,Y(t,r),r.method==="throw")||e!=="return"&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),k;var s=P(c,t.iterator,r.arg);if(s.type==="throw")return r.method="throw",r.arg=s.arg,r.delegate=null,k;var a=s.arg;if(!a)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,k;if(a.done)r[t.resultName]=a.value,r.next=t.nextLoc,r.method!=="return"&&(r.method="next",r.arg=u);else return a;return r.delegate=null,k}$(W),d(W,v,"Generator"),d(W,w,function(){return this}),d(W,"toString",function(){return"[object Generator]"});function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function M(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}i.keys=function(t){var r=Object(t),e=[];for(var c in r)e.push(c);return e.reverse(),function s(){for(;e.length;){var a=e.pop();if(a in r)return s.value=a,s.done=!1,s}return s.done=!0,s}};function K(t){if(t){var r=t[w];if(r)return r.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var e=-1,c=function s(){for(;++e<t.length;)if(f.call(t,e))return s.value=t[e],s.done=!1,s;return s.value=u,s.done=!0,s};return c.next=c}}return{next:R}}i.values=K;function R(){return{value:u,done:!0}}return O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(M),!t)for(var r in this)r.charAt(0)==="t"&&f.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0],r=t.completion;if(r.type==="throw")throw r.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(E,L){return a.type="throw",a.arg=t,r.next=E,L&&(r.method="next",r.arg=u),!!L}for(var c=this.tryEntries.length-1;c>=0;--c){var s=this.tryEntries[c],a=s.completion;if(s.tryLoc==="root")return e("end");if(s.tryLoc<=this.prev){var b=f.call(s,"catchLoc"),y=f.call(s,"finallyLoc");if(b&&y){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else if(b){if(this.prev<s.catchLoc)return e(s.catchLoc,!0)}else if(y){if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var c=this.tryEntries[e];if(c.tryLoc<=this.prev&&f.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var s=c;break}}s&&(t==="break"||t==="continue")&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=t,a.arg=r,s?(this.method="next",this.next=s.finallyLoc,k):this.complete(a)},complete:function(t,r){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&r&&(this.next=r),k},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),M(e),k}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var c=e.completion;if(c.type==="throw"){var s=c.arg;M(e)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:K(t),resultName:r,nextLoc:e},this.method==="next"&&(this.arg=u),k}},i}(o.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(He);var ve=(o,n)=>`${o}-${n}-${Math.random().toString(16).slice(3,8)}`;const Ye=ve;let Ee=0;var Pe=({id:o,action:n,payload:i={}})=>{let l=o;return typeof l>"u"&&(l=Ye("Job",Ee),Ee+=1),{id:l,action:n,payload:i}},le={};let be=!1;le.logging=be;le.setLogging=o=>{be=o};le.log=(...o)=>be?console.log.apply(globalThis,o):null;const qe=Pe,{log:fe}=le,Ke=ve;let Le=0;var Je=()=>{const o=Ke("Scheduler",Le),n={},i={};let l=[];Le+=1;const f=()=>l.length,g=()=>Object.keys(n).length,u=()=>{if(l.length!==0){const d=Object.keys(n);for(let m=0;m<d.length;m+=1)if(typeof i[d[m]]>"u"){l[0](n[d[m]]);break}}},h=(d,m)=>new Promise((P,G)=>{const D=qe({action:d,payload:m});l.push(async j=>{l.shift(),i[j.id]=D;try{P(await j[d].apply(globalThis,[...m,D.id]))}catch(N){G(N)}finally{delete i[j.id],u()}}),fe(`[${o}]: Add ${D.id} to JobQueue`),fe(`[${o}]: JobQueue length=${l.length}`),u()});return{addWorker:d=>(n[d.id]=d,fe(`[${o}]: Add ${d.id}`),fe(`[${o}]: Number of workers=${g()}`),u(),d.id),addJob:async(d,...m)=>{if(g()===0)throw Error(`[${o}]: You need to have at least one worker before adding jobs`);return h(d,m)},terminate:async()=>{Object.keys(n).forEach(async d=>{await n[d].terminate()}),l=[]},getQueueLen:f,getNumWorkers:g}};function Ve(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ze(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Qe=Ze;const Xe=Qe;var et=o=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":Xe()?n.type="electron":typeof document=="object"?n.type="browser":typeof process=="object"&&typeof Ve=="function"&&(n.type="node"),typeof o>"u"?n:n[o]};const tt=et("type")==="browser",rt=tt?o=>new URL(o,window.location.href).href:o=>o;var ot=o=>{const n={...o};return["corePath","workerPath","langPath"].forEach(i=>{o[i]&&(n[i]=rt(n[i]))}),n},nt=o=>{const n=[],i=[],l=[],f=[],g=[];return o.blocks&&o.blocks.forEach(u=>{u.paragraphs.forEach(h=>{h.lines.forEach(w=>{w.words.forEach(_=>{_.symbols.forEach(v=>{g.push({...v,page:o,block:u,paragraph:h,line:w,word:_})}),f.push({..._,page:o,block:u,paragraph:h,line:w})}),l.push({...w,page:o,block:u,paragraph:h})}),i.push({...h,page:o,block:u})}),n.push({...u,page:o})}),{...o,blocks:n,paragraphs:i,lines:l,words:f,symbols:g}},Ne={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const st="tesseract.js",at="5.0.5",it="Pure Javascript Multilingual OCR",lt="src/index.js",ct="src/index.d.ts",ut="dist/tesseract.min.js",ft="dist/tesseract.min.js",dt={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},ht={"./src/worker/node/index.js":"./src/worker/browser/index.js"},pt="",gt=["jeromewu"],mt="Apache-2.0",vt={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},bt={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},wt={"@rollup/pluginutils":"^5.0.2"},yt={type:"git",url:"https://github.com/naptha/tesseract.js.git"},_t={url:"https://github.com/naptha/tesseract.js/issues"},Et="https://github.com/naptha/tesseract.js",Lt={type:"opencollective",url:"https://opencollective.com/tesseractjs"},kt={name:st,version:at,description:it,main:lt,types:ct,unpkg:ut,jsdelivr:ft,scripts:dt,browser:ht,author:pt,contributors:gt,license:mt,devDependencies:vt,dependencies:bt,overrides:wt,repository:yt,bugs:_t,homepage:Et,collective:Lt};var St={workerBlobURL:!0,logger:()=>{}};const Tt=kt.version,Ot=St;var At={...Ot,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Tt}/dist/worker.min.js`},Rt=({workerPath:o,workerBlobURL:n})=>{let i;if(Blob&&URL&&n){const l=new Blob([`importScripts("${o}");`],{type:"application/javascript"});i=new Worker(URL.createObjectURL(l))}else i=new Worker(o);return i},jt=o=>{o.terminate()},It=(o,n)=>{o.onmessage=({data:i})=>{n(i)}},Ct=async(o,n)=>{o.postMessage(n)};const he=o=>new Promise((n,i)=>{const l=new FileReader;l.onload=()=>{n(l.result)},l.onerror=({target:{error:{code:f}}})=>{i(Error(`File could not be read! Code=${f}`))},l.readAsArrayBuffer(o)}),me=async o=>{let n=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?n=atob(o.split(",")[1]).split("").map(i=>i.charCodeAt(0)):n=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(n=await me(o.src)),o.tagName==="VIDEO"&&(n=await me(o.poster)),o.tagName==="CANVAS"&&await new Promise(i=>{o.toBlob(async l=>{n=await he(l),i()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const i=await o.convertToBlob();n=await he(i)}else(o instanceof File||o instanceof Blob)&&(n=await he(o));return new Uint8Array(n)};var Pt=me;const Nt=At,$t=Rt,Mt=jt,Dt=It,zt=Ct,Gt=Pt;var Ft={defaultOptions:Nt,spawnWorker:$t,terminateWorker:Mt,onMessage:Dt,send:zt,loadImage:Gt};const Ut=ot,xt=nt,te=Pe,{log:ke}=le,Bt=ve,ae=Ne,{defaultOptions:Wt,spawnWorker:Ht,terminateWorker:Yt,onMessage:qt,loadImage:Se,send:Kt}=Ft;let Te=0;var $e=async(o="eng",n=ae.LSTM_ONLY,i={},l={})=>{const f=Bt("Worker",Te),{logger:g,errorHandler:u,...h}=Ut({...Wt,...i}),w={},_={},v=typeof o=="string"?o.split("+"):o;let d=n,m=l;const P=[ae.DEFAULT,ae.LSTM_ONLY].includes(n)&&!h.legacyCore;let G,D;const j=new Promise((s,a)=>{D=s,G=a}),N=s=>{G(s.message)};let k=Ht(h);k.onerror=N,Te+=1;const x=(s,a)=>{w[s]=a},B=(s,a)=>{_[s]=a},S=({id:s,action:a,payload:b})=>new Promise((y,E)=>{ke(`[${f}]: Start ${s}, action=${a}`);const L=`${a}-${s}`;x(L,y),B(L,E),Kt(k,{workerId:f,jobId:s,action:a,payload:b})}),q=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),z=s=>S(te({id:s,action:"load",payload:{options:{lstmOnly:P,corePath:h.corePath,logging:h.logging}}})),J=(s,a,b)=>S(te({id:b,action:"FS",payload:{method:"writeFile",args:[s,a]}})),W=(s,a)=>S(te({id:a,action:"FS",payload:{method:"readFile",args:[s,{encoding:"utf8"}]}})),$=(s,a)=>S(te({id:a,action:"FS",payload:{method:"unlink",args:[s]}})),H=(s,a,b)=>S(te({id:b,action:"FS",payload:{method:s,args:a}})),ee=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Y=(s,a)=>S(te({id:a,action:"loadLanguage",payload:{langs:s,options:{langPath:h.langPath,dataPath:h.dataPath,cachePath:h.cachePath,cacheMethod:h.cacheMethod,gzip:h.gzip,lstmOnly:[ae.LSTM_ONLY,ae.TESSERACT_LSTM_COMBINED].includes(d)&&!h.legacyLang}}})),T=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),M=(s,a,b,y)=>S(te({id:y,action:"initialize",payload:{langs:s,oem:a,config:b}})),O=(s="eng",a,b,y)=>{if(P&&[ae.TESSERACT_ONLY,ae.TESSERACT_LSTM_COMBINED].includes(a))throw Error("Legacy model requested but code missing.");const E=a||d;d=E;const L=b||m;m=L;const oe=(typeof s=="string"?s.split("+"):s).filter(ne=>!v.includes(ne));return v.push(...oe),oe.length>0?Y(oe,y).then(()=>M(s,E,L,y)):M(s,E,L,y)},K=(s={},a)=>S(te({id:a,action:"setParameters",payload:{params:s}})),R=async(s,a={},b={blocks:!0,text:!0,hocr:!0,tsv:!0},y)=>S(te({id:y,action:"recognize",payload:{image:await Se(s),options:a,output:b}})),t=(s="Tesseract OCR Result",a=!1,b)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),S(te({id:b,action:"getPDF",payload:{title:s,textonly:a}}))),r=async(s,a)=>{if(P)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return S(te({id:a,action:"detect",payload:{image:await Se(s)}}))},e=async()=>(k!==null&&(Yt(k),k=null),Promise.resolve());qt(k,({workerId:s,jobId:a,status:b,action:y,data:E})=>{const L=`${y}-${a}`;if(b==="resolve"){ke(`[${s}]: Complete ${a}`);let se=E;y==="recognize"?se=xt(E):y==="getPDF"&&(se=Array.from({...E,length:Object.keys(E).length})),w[L]({jobId:a,data:se})}else if(b==="reject")if(_[L](E),y==="load"&&G(E),u)u(E);else throw Error(E);else b==="progress"&&g({...E,userJobId:a})});const c={id:f,worker:k,setResolve:x,setReject:B,load:q,writeText:J,readText:W,removeFile:$,FS:H,loadLanguage:ee,initialize:T,reinitialize:O,setParameters:K,recognize:R,getPDF:t,detect:r,terminate:e};return z().then(()=>Y(o)).then(()=>M(o,n,l)).then(()=>D(c)).catch(()=>{}),j};const Me=$e,Jt=async(o,n,i)=>{const l=await Me(n,1,i);return l.recognize(o).finally(async()=>{await l.terminate()})},Vt=async(o,n)=>{const i=await Me("osd",0,n);return i.detect(o).finally(async()=>{await i.terminate()})};var Zt={recognize:Jt,detect:Vt},Qt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Xt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const er=Je,tr=$e,rr=Zt,or=Qt,nr=Ne,sr=Xt,{setLogging:ar}=le;var ir={languages:or,OEM:nr,PSM:sr,createScheduler:er,createWorker:tr,setLogging:ar,...rr};function Oe(o,n,i){const l=o.slice();return l[7]=n[i],l}function Ae(o,n,i){const l=o.slice();return l[10]=n[i],l}function Re(o,n,i){const l=o.slice();return l[13]=n[i],l}function je(o){let n,i=o[13]+"",l,f;return{c(){n=I("option"),l=V(i),f=F(),this.h()},l(g){n=C(g,"OPTION",{});var u=Q(n);l=Z(u,i),f=U(u),u.forEach(A),this.h()},h(){n.__value=o[13],Ue(n,n.__value)},m(g,u){X(g,n,u),p(n,l),p(n,f)},p:pe,d(g){g&&A(n)}}}function Ie(o){var K,R,t;let n,i,l=((K=o[10].choices[0])==null?void 0:K.text)+"",f,g,u,h=((t=(R=o[10].choices[0])==null?void 0:R.confidence)==null?void 0:t.toFixed(2))+"",w,_,v,d=o[10].bbox.x0+"",m,P,G,D=o[10].bbox.y0+"",j,N,k,x=o[10].bbox.x1+"",B,S,q,z=o[10].bbox.y1+"",J,W,$,H=o[10].bbox.x1-o[10].bbox.x0+"",ee,Y,T=o[10].bbox.y1-o[10].bbox.y0+"",M,O;return{c(){n=I("tr"),i=I("td"),f=V(l),g=F(),u=I("td"),w=V(h),_=F(),v=I("td"),m=V(d),P=F(),G=I("td"),j=V(D),N=F(),k=I("td"),B=V(x),S=F(),q=I("td"),J=V(z),W=F(),$=I("td"),ee=V(H),Y=V(", "),M=V(T),O=F()},l(r){n=C(r,"TR",{});var e=Q(n);i=C(e,"TD",{});var c=Q(i);f=Z(c,l),c.forEach(A),g=U(e),u=C(e,"TD",{});var s=Q(u);w=Z(s,h),s.forEach(A),_=U(e),v=C(e,"TD",{});var a=Q(v);m=Z(a,d),a.forEach(A),P=U(e),G=C(e,"TD",{});var b=Q(G);j=Z(b,D),b.forEach(A),N=U(e),k=C(e,"TD",{});var y=Q(k);B=Z(y,x),y.forEach(A),S=U(e),q=C(e,"TD",{});var E=Q(q);J=Z(E,z),E.forEach(A),W=U(e),$=C(e,"TD",{});var L=Q($);ee=Z(L,H),Y=Z(L,", "),M=Z(L,T),L.forEach(A),O=U(e),e.forEach(A)},m(r,e){X(r,n,e),p(n,i),p(i,f),p(n,g),p(n,u),p(u,w),p(n,_),p(n,v),p(v,m),p(n,P),p(n,G),p(G,j),p(n,N),p(n,k),p(k,B),p(n,S),p(n,q),p(q,J),p(n,W),p(n,$),p($,ee),p($,Y),p($,M),p(n,O)},p(r,e){var c,s,a;e&2&&l!==(l=((c=r[10].choices[0])==null?void 0:c.text)+"")&&re(f,l),e&2&&h!==(h=((a=(s=r[10].choices[0])==null?void 0:s.confidence)==null?void 0:a.toFixed(2))+"")&&re(w,h),e&2&&d!==(d=r[10].bbox.x0+"")&&re(m,d),e&2&&D!==(D=r[10].bbox.y0+"")&&re(j,D),e&2&&x!==(x=r[10].bbox.x1+"")&&re(B,x),e&2&&z!==(z=r[10].bbox.y1+"")&&re(J,z),e&2&&H!==(H=r[10].bbox.x1-r[10].bbox.x0+"")&&re(ee,H),e&2&&T!==(T=r[10].bbox.y1-r[10].bbox.y0+"")&&re(M,T)},d(r){r&&A(n)}}}function Ce(o){let n,i=o[7].status+"",l,f,g=(o[7].progress*100).toFixed(0)+"",u,h;return{c(){n=I("li"),l=V(i),f=V(" - "),u=V(g),h=V("%")},l(w){n=C(w,"LI",{});var _=Q(n);l=Z(_,i),f=Z(_," - "),u=Z(_,g),h=Z(_,"%"),_.forEach(A)},m(w,_){X(w,n,_),p(n,l),p(n,f),p(n,u),p(n,h)},p(w,_){_&4&&i!==(i=w[7].status+"")&&re(l,i),_&4&&g!==(g=(w[7].progress*100).toFixed(0)+"")&&re(u,g)},d(w){w&&A(n)}}}function lr(o){let n,i=`<p>This page uses <a target="_blank" rel="noopener noreferrer" href="https://github.com/naptha/tesseract.js">tesseract.js</a> to do some OCR
        on images to detect digits from 1 to 9.</p> <p>It works well on the image <code>2342.png</code> because the digits are all next to each other and form a word but tesseract is not the right
        tool to recognize a complete sudoku grid. Instead I&#39;ll experiment with another tool like openCV to first detect the rectangles in the image
        and once each rectable is identified see if I can use tesseract or a simpler pattern matching method to identify the content of the cells.</p>`,l,f,g,u,h,w="Select an image to analyze",_,v,d,m,P,G="Results:",D,j,N,k="<th>text</th> <th>confidence</th> <th>bbox.x0</th> <th>bbox.y0</th> <th>bbox.x1</th> <th>bbox.y1</th> <th>Size (w, h)</th>",x,B,S,q,z,J="Progress:",W,$,H,ee,Y=ie(o[3]),T=[];for(let t=0;t<Y.length;t+=1)T[t]=je(Re(o,Y,t));let M=ie(o[1].sort(o[5])),O=[];for(let t=0;t<M.length;t+=1)O[t]=Ie(Ae(o,M,t));let K=ie(o[2]),R=[];for(let t=0;t<K.length;t+=1)R[t]=Ce(Oe(o,K,t));return{c(){n=I("div"),n.innerHTML=i,l=F(),f=I("img"),u=F(),h=I("label"),h.textContent=w,_=F(),v=I("select");for(let t=0;t<T.length;t+=1)T[t].c();d=F(),m=I("div"),P=I("span"),P.textContent=G,D=F(),j=I("table"),N=I("thead"),N.innerHTML=k,x=F();for(let t=0;t<O.length;t+=1)O[t].c();B=F(),S=I("hr"),q=F(),z=I("span"),z.textContent=J,W=F(),$=I("ul");for(let t=0;t<R.length;t+=1)R[t].c();this.h()},l(t){n=C(t,"DIV",{"data-svelte-h":!0}),ce(n)!=="svelte-1gt2nrt"&&(n.innerHTML=i),l=U(t),f=C(t,"IMG",{alt:!0,src:!0}),u=U(t),h=C(t,"LABEL",{for:!0,"data-svelte-h":!0}),ce(h)!=="svelte-1qttjym"&&(h.textContent=w),_=U(t),v=C(t,"SELECT",{id:!0});var r=Q(v);for(let a=0;a<T.length;a+=1)T[a].l(r);r.forEach(A),d=U(t),m=C(t,"DIV",{});var e=Q(m);P=C(e,"SPAN",{"data-svelte-h":!0}),ce(P)!=="svelte-xq0pt2"&&(P.textContent=G),D=U(e),j=C(e,"TABLE",{});var c=Q(j);N=C(c,"THEAD",{"data-svelte-h":!0}),ce(N)!=="svelte-v4zs5d"&&(N.innerHTML=k),x=U(c);for(let a=0;a<O.length;a+=1)O[a].l(c);c.forEach(A),B=U(e),S=C(e,"HR",{}),q=U(e),z=C(e,"SPAN",{"data-svelte-h":!0}),ce(z)!=="svelte-i4uavb"&&(z.textContent=J),W=U(e),$=C(e,"UL",{});var s=Q($);for(let a=0;a<R.length;a+=1)R[a].l(s);s.forEach(A),e.forEach(A),this.h()},h(){ue(f,"alt","data to analyze"),we(f.src,g=ge+"/test-images/"+o[0])||ue(f,"src",g),ue(h,"for","imageInput"),ue(v,"id","imageInput"),o[0]===void 0&&ze(()=>o[6].call(v))},m(t,r){X(t,n,r),X(t,l,r),X(t,f,r),X(t,u,r),X(t,h,r),X(t,_,r),X(t,v,r);for(let e=0;e<T.length;e+=1)T[e]&&T[e].m(v,null);ye(v,o[0],!0),X(t,d,r),X(t,m,r),p(m,P),p(m,D),p(m,j),p(j,N),p(j,x);for(let e=0;e<O.length;e+=1)O[e]&&O[e].m(j,null);p(m,B),p(m,S),p(m,q),p(m,z),p(m,W),p(m,$);for(let e=0;e<R.length;e+=1)R[e]&&R[e].m($,null);H||(ee=[_e(v,"change",o[6]),_e(v,"change",o[4])],H=!0)},p(t,[r]){if(r&9&&!we(f.src,g=ge+"/test-images/"+t[0])&&ue(f,"src",g),r&8){Y=ie(t[3]);let e;for(e=0;e<Y.length;e+=1){const c=Re(t,Y,e);T[e]?T[e].p(c,r):(T[e]=je(c),T[e].c(),T[e].m(v,null))}for(;e<T.length;e+=1)T[e].d(1);T.length=Y.length}if(r&9&&ye(v,t[0]),r&34){M=ie(t[1].sort(t[5]));let e;for(e=0;e<M.length;e+=1){const c=Ae(t,M,e);O[e]?O[e].p(c,r):(O[e]=Ie(c),O[e].c(),O[e].m(j,null))}for(;e<O.length;e+=1)O[e].d(1);O.length=M.length}if(r&4){K=ie(t[2]);let e;for(e=0;e<K.length;e+=1){const c=Oe(t,K,e);R[e]?R[e].p(c,r):(R[e]=Ce(c),R[e].c(),R[e].m($,null))}for(;e<R.length;e+=1)R[e].d(1);R.length=K.length}},i:pe,o:pe,d(t){t&&(A(n),A(l),A(f),A(u),A(h),A(_),A(v),A(d),A(m)),de(T,t),de(O,t),de(R,t),H=!1,Ge(ee)}}}function cr(o,n,i){const l=["2342.png","sudoku.png","opencv_github.png","sudoku_colors.png"];let f=l[0],g=[],u=[];const h=async()=>{i(1,g=[]),i(2,u=[]);const v=await ir.createWorker("eng",1,{logger:m=>{i(2,u=[m,...u])}});await v.setParameters({tessedit_char_whitelist:"123456789"});const d=await v.recognize(ge+"/test-images/"+f);i(1,g=d.data.symbols),await v.terminate()},w=(v,d)=>v.bbox.y0-d.bbox.y0||v.bbox.x0-d.bbox.x0;Fe(()=>h());function _(){f=xe(this),i(0,f),i(3,l)}return[f,g,u,l,h,w,_]}class pr extends Be{constructor(n){super(),We(this,n,cr,lr,De,{})}}export{pr as component};
