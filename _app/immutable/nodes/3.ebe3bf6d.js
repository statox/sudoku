import{s as Bt,f as C,a as x,e as yt,g as w,h as z,H as $,c as T,d as y,j as ot,i as S,I as h,y as B,J as qt,C as It,D as Dt,l as Pt,m as Mt,K as Nt,G as Vt,E as Ft}from"../chunks/scheduler.71239b2e.js";import{S as At,i as zt,t as st,c as Wt,a as nt,b as xt,d as Tt,m as gt,e as jt,g as Jt}from"../chunks/index.8ab45ecd.js";import{a as Et}from"../chunks/store.fe58922c.js";import{d as ht,m as Kt,g as Lt,a as Qt,c as Xt,S as Yt,G as Zt,u as te,r as ee,s as Gt,b as oe,e as se,f as ne,h as Ot}from"../chunks/GridStatus.f55bb7cb.js";const le=e=>{const o=ht(e);return Ht(o),o},Ht=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Kt(e,{row:o,col:t},s)){if(e[o][t].value=s,Ht(e))return!0;e[o][t].value=void 0}return!1}return!0},Rt=()=>{const e=Lt(Qt()),o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)o.push({row:t,col:s});for(;o.length;){const t=Math.floor(Math.random()*o.length),{row:s,col:c}=o[t];o.splice(t,1);const l=e[s][c].value;e[s][c].value=void 0,e[s][c].notes=[],e[s][c].fixed=!1,Xt(e)!=="unique"&&(e[s][c].value=l)}for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value&&(e[t][s].fixed=!0);return e},ce=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0){const f=e[t][n].notes;for(const v of f)s[v]||(s[v]=[]),s[v].push({row:t,col:n})}if(e[n][t].value===void 0){const f=e[n][t].notes;for(const v of f)c[v]||(c[v]=[]),c[v].push({row:n,col:t})}const _=Math.floor(n/3),N=n%3,d=a+_,p=b+N;if(e[d][p].value===void 0){const f=e[d][p].notes;for(const v of f)l[v]||(l[v]=[]),l[v].push({row:d,col:p})}}for(const n of Object.keys(s)){const _=Number(n);if(s[_].length===1){const{row:N,col:d}=s[_][0];o.push({type:"hidden_single_row",cause:[{row:N,col:d,notes:[_]}]})}}for(const n of Object.keys(c)){const _=Number(n);if(c[_].length===1){const{row:N,col:d}=c[_][0];o.push({type:"hidden_single_col",cause:[{row:N,col:d,notes:[_]}]})}}for(const n of Object.keys(l)){const _=Number(n);if(l[_].length===1){const{row:N,col:d}=l[_][0];o.push({type:"hidden_single_square",cause:[{row:N,col:d,notes:[_]}]})}}}return o},re=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},ae=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0&&e[t][n].notes.length===2){const f=e[t][n].notes.join(",");if(!s[f])s[f]={row:t,col:n};else{const v={row:t,col:n,notes:[...e[t][n].notes]},g={row:s[f].row,col:s[f].col,notes:[...e[t][n].notes]},E=[];for(let k=0;k<9;k++)e[t][k].value!==void 0||e[t][k].notes.join(",")===f||E.push({row:t,col:k,notes:[...e[t][n].notes]});o.push({type:"naked_pair",cause:[v,g],effect:E})}}if(e[n][t].value===void 0&&e[n][t].notes.length===2){const f=e[n][t].notes.join(",");if(!c[f])c[f]={row:n,col:t};else{const v={row:n,col:t,notes:[...e[n][t].notes]},g={row:c[f].row,col:c[f].col,notes:[...e[n][t].notes]},E=[];for(let k=0;k<9;k++)e[k][t].value!==void 0||e[k][t].notes.join(",")===f||E.push({row:k,col:t,notes:[...e[n][t].notes]});o.push({type:"naked_pair",cause:[v,g],effect:E})}}const _=Math.floor(n/3),N=n%3,d=a+_,p=b+N;if(e[d][p].value===void 0&&e[d][p].notes.length===2){const f=e[d][p].notes.join(",");if(!l[f])l[f]={row:d,col:p};else{const v={row:d,col:p,notes:[...e[d][p].notes]},g={row:l[f].row,col:l[f].col,notes:[...e[d][p].notes]},E=[];for(let k=0;k<9;k++){const U=Math.floor(k/3),L=k%3,H=a+U,j=b+L;e[H][j].value!==void 0||e[H][j].notes.join(",")===f||E.push({row:H,col:j,notes:[...e[d][p].notes]})}o.push({type:"naked_pair",cause:[v,g],effect:E})}}}}return o};function $t(e,o,t){const s=e.slice();return s[19]=o[t],s}function St(e){let o,t,s,c;function l(){return e[18](e[19])}return{c(){o=C("button"),t=Pt(e[19]),this.h()},l(a){o=w(a,"BUTTON",{class:!0});var b=z(o);t=Mt(b,e[19]),b.forEach(y),this.h()},h(){ot(o,"class","svelte-1jeisuy"),Nt(o,"selected",e[1]===e[19])},m(a,b){S(a,o,b),h(o,t),s||(c=B(o,"click",l),s=!0)},p(a,b){e=a,b&2&&Nt(o,"selected",e[1]===e[19])},d(a){a&&y(o),s=!1,c()}}}function Ut(e){let o,t,s,c;return o=new Yt({props:{grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),s=new Zt({props:{grid:e[0]}}),{c(){xt(o.$$.fragment),t=x(),xt(s.$$.fragment)},l(l){Tt(o.$$.fragment,l),t=T(l),Tt(s.$$.fragment,l)},m(l,a){gt(o,l,a),S(l,t,a),gt(s,l,a),c=!0},p(l,a){const b={};a&1&&(b.grid=l[0]),o.$set(b);const n={};a&1&&(n.grid=l[0]),s.$set(n)},i(l){c||(nt(o.$$.fragment,l),nt(s.$$.fragment,l),c=!0)},o(l){st(o.$$.fragment,l),st(s.$$.fragment,l),c=!1},d(l){l&&y(t),jt(o,l),jt(s,l)}}}function ie(e){let o,t,s="Grid controls",c,l,a,b="Prev",n,_,N="New Grid",d,p,f="Solve grid",v,g,E="Reset grid",k,U,L="Remove fixed",H,j,i,W="Notes controls",lt,G,D,dt="Compute notes",ct,P,vt="Remove notes",rt,M,pt="Display hints",at,V,kt="Hide hints",Q,q,J,mt="Highlights controls",it,F,X,Y,Z,Ct=e[0],K,tt,ut,wt,ft=Et([1,2,3,4,5,6,7,8,9]),O=[];for(let r=0;r<9;r+=1)O[r]=St($t(e,ft,r));let R=Ut(e);return{c(){o=C("div"),t=C("h4"),t.textContent=s,c=x(),l=C("div"),a=C("button"),a.textContent=b,n=x(),_=C("button"),_.textContent=N,d=x(),p=C("button"),p.textContent=f,v=x(),g=C("button"),g.textContent=E,k=x(),U=C("button"),U.textContent=L,H=x(),j=C("div"),i=C("h4"),i.textContent=W,lt=x(),G=C("div"),D=C("button"),D.textContent=dt,ct=x(),P=C("button"),P.textContent=vt,rt=x(),M=C("button"),M.textContent=pt,at=x(),V=C("button"),V.textContent=kt,Q=x(),q=C("div"),J=C("h4"),J.textContent=mt,it=x(),F=C("div");for(let r=0;r<9;r+=1)O[r].c();X=x(),Y=C("br"),Z=x(),R.c(),K=yt(),this.h()},l(r){o=w(r,"DIV",{});var m=z(o);t=w(m,"H4",{"data-svelte-h":!0}),$(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=T(m),l=w(m,"DIV",{class:!0});var u=z(l);a=w(u,"BUTTON",{"data-svelte-h":!0}),$(a)!=="svelte-bivxk4"&&(a.textContent=b),n=T(u),_=w(u,"BUTTON",{"data-svelte-h":!0}),$(_)!=="svelte-1oh0e6u"&&(_.textContent=N),d=T(u),p=w(u,"BUTTON",{"data-svelte-h":!0}),$(p)!=="svelte-1wjgins"&&(p.textContent=f),v=T(u),g=w(u,"BUTTON",{"data-svelte-h":!0}),$(g)!=="svelte-hocye6"&&(g.textContent=E),k=T(u),U=w(u,"BUTTON",{"data-svelte-h":!0}),$(U)!=="svelte-g7g4he"&&(U.textContent=L),u.forEach(y),m.forEach(y),H=T(r),j=w(r,"DIV",{});var A=z(j);i=w(A,"H4",{"data-svelte-h":!0}),$(i)!=="svelte-8gx0az"&&(i.textContent=W),lt=T(A),G=w(A,"DIV",{class:!0});var I=z(G);D=w(I,"BUTTON",{"data-svelte-h":!0}),$(D)!=="svelte-12olw78"&&(D.textContent=dt),ct=T(I),P=w(I,"BUTTON",{"data-svelte-h":!0}),$(P)!=="svelte-16z5c15"&&(P.textContent=vt),rt=T(I),M=w(I,"BUTTON",{"data-svelte-h":!0}),$(M)!=="svelte-mp8c3v"&&(M.textContent=pt),at=T(I),V=w(I,"BUTTON",{"data-svelte-h":!0}),$(V)!=="svelte-eks63j"&&(V.textContent=kt),I.forEach(y),A.forEach(y),Q=T(r),q=w(r,"DIV",{});var et=z(q);J=w(et,"H4",{"data-svelte-h":!0}),$(J)!=="svelte-hclwgd"&&(J.textContent=mt),it=T(et),F=w(et,"DIV",{class:!0});var bt=z(F);for(let _t=0;_t<9;_t+=1)O[_t].l(bt);bt.forEach(y),et.forEach(y),X=T(r),Y=w(r,"BR",{}),Z=T(r),R.l(r),K=yt(),this.h()},h(){ot(l,"class","grid-controls svelte-1jeisuy"),ot(G,"class","notes-controls svelte-1jeisuy"),ot(F,"class","highlights-controls")},m(r,m){S(r,o,m),h(o,t),h(o,c),h(o,l),h(l,a),h(l,n),h(l,_),h(l,d),h(l,p),h(l,v),h(l,g),h(l,k),h(l,U),S(r,H,m),S(r,j,m),h(j,i),h(j,lt),h(j,G),h(G,D),h(G,ct),h(G,P),h(G,rt),h(G,M),h(G,at),h(G,V),S(r,Q,m),S(r,q,m),h(q,J),h(q,it),h(q,F);for(let u=0;u<9;u+=1)O[u]&&O[u].m(F,null);S(r,X,m),S(r,Y,m),S(r,Z,m),R.m(r,m),S(r,K,m),tt=!0,ut||(wt=[B(a,"click",e[9]),B(_,"click",e[10]),B(p,"click",e[11]),B(g,"click",e[12]),B(U,"click",e[13]),B(D,"click",e[14]),B(P,"click",e[15]),B(M,"click",e[16]),B(V,"click",e[17])],ut=!0)},p(r,[m]){if(m&2){ft=Et([1,2,3,4,5,6,7,8,9]);let u;for(u=0;u<9;u+=1){const A=$t(r,ft,u);O[u]?O[u].p(A,m):(O[u]=St(A),O[u].c(),O[u].m(F,null))}for(;u<9;u+=1)O[u].d(1)}m&1&&Bt(Ct,Ct=r[0])?(Jt(),st(R,1,1,Vt),Wt(),R=Ut(r),R.c(),nt(R,1),R.m(K.parentNode,K)):R.p(r,m)},i(r){tt||(nt(R),tt=!0)},o(r){st(R),tt=!1},d(r){r&&(y(o),y(H),y(j),y(Q),y(q),y(X),y(Y),y(Z),y(K)),qt(O,r),R.d(r),ut=!1,It(wt)}}}function ue(e,o,t){let s;Dt(e,Ot,i=>t(1,s=i));let c=Rt();const l=[ht(c)],a=i=>{te(i.detail.cell,i.detail.update),n()},b=i=>{ee(c,i.detail.position),n()},n=i=>{t(0,c),!(i!=null&&i.noHistory)&&l.push(ht(c))},_=()=>{t(0,c=le(c)),n()},N=()=>{for(let i=0;i<9;i++)for(let W=0;W<9;W++)t(0,c[i][W].fixed=!1,c)},d=i=>{Gt.set([...re(i),...ce(i),...ae(i)])};return[c,s,l,a,b,n,_,N,d,()=>{t(0,c=l.pop()),n({noHistory:!0})},()=>{t(0,c=Rt()),n()},()=>{_(),n()},()=>{oe(c),n()},()=>{N(),n()},()=>{se(c),n()},()=>{ne(c),n()},()=>{d(c),n()},()=>{Gt.set([]),n()},i=>{Ft(Ot,s=s===i?void 0:i,s)}]}class ve extends At{constructor(o){super(),zt(this,o,ue,ie,Bt,{})}}export{ve as component};
