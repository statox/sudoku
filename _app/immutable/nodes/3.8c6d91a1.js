import{s as Me,f as y,a as R,l as Y,e as ge,g as N,h as B,H as I,c as j,d as w,m as Z,j as ae,i as D,I as d,y as z,n as Re,J as Ae,C as Fe,D as Je,G as $e,K as je,E as Ke}from"../chunks/scheduler.71239b2e.js";import{S as Le,i as Qe,t as ie,c as We,a as ue,b as He,d as qe,m as Ge,e as Oe,g as Xe}from"../chunks/index.8ab45ecd.js";import{a as De}from"../chunks/store.fe58922c.js";import{d as Ce,m as Ye,S as Ze,g as Se,G as et,u as tt,r as ot,a as st,b as nt,s as Ue,c as lt}from"../chunks/GridStatus.9f861262.js";import{g as Be}from"../chunks/game.1aaf1b61.js";const ct=e=>{const o=Ce(e);return xe(o),o},xe=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let n=1;n<=9;n++)if(Ye(e,{row:o,col:t},n)){if(e[o][t].value=n,xe(e))return!0;e[o][t].value=void 0}return!1}return!0},rt=e=>{const o=[];for(let t=0;t<9;t++){const n={},r={},s={},i=3*Math.floor(t/3),p=3*(t%3);for(let l=0;l<9;l++){if(e[t][l].value===void 0){const f=e[t][l].notes;for(const m of f)n[m]||(n[m]=[]),n[m].push({row:t,col:l})}if(e[l][t].value===void 0){const f=e[l][t].notes;for(const m of f)r[m]||(r[m]=[]),r[m].push({row:l,col:t})}const _=Math.floor(l/3),C=l%3,a=i+_,u=p+C;if(e[a][u].value===void 0){const f=e[a][u].notes;for(const m of f)s[m]||(s[m]=[]),s[m].push({row:a,col:u})}}for(const l of Object.keys(n)){const _=Number(l);if(n[_].length===1){const{row:C,col:a}=n[_][0];o.push({type:"hidden_single_row",cause:[{row:C,col:a,notes:[_]}],effect:[{row:C,col:a,notes:e[C][a].notes.filter(u=>u!==_)}]})}}for(const l of Object.keys(r)){const _=Number(l);if(r[_].length===1){const{row:C,col:a}=r[_][0];o.push({type:"hidden_single_col",cause:[{row:C,col:a,notes:[_]}],effect:[{row:C,col:a,notes:e[C][a].notes.filter(u=>u!==_)}]})}}for(const l of Object.keys(s)){const _=Number(l);if(s[_].length===1){const{row:C,col:a}=s[_][0];o.push({type:"hidden_single_square",cause:[{row:C,col:a,notes:[_]}],effect:[{row:C,col:a,notes:e[C][a].notes.filter(u=>u!==_)}]})}}}return o},at=e=>{const o=[];for(let t=0;t<9;t++)for(let n=0;n<9;n++)e[t][n].value===void 0&&e[t][n].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:n,notes:[e[t][n].notes[0]]}],effect:[]});return o},it=e=>{const o=[];for(let t=0;t<9;t++){const n={},r={},s={},i=3*Math.floor(t/3),p=3*(t%3);for(let l=0;l<9;l++){if(e[t][l].value===void 0&&e[t][l].notes.length===2){const f=e[t][l].notes.join(",");if(!n[f])n[f]={row:t,col:l};else{const m={row:t,col:l,notes:[...e[t][l].notes]},g={row:n[f].row,col:n[f].col,notes:[...e[t][l].notes]},q=[];for(let b=0;b<9;b++)e[t][b].value!==void 0||e[t][b].notes.join(",")===f||q.push({row:t,col:b,notes:[...e[t][l].notes]});o.push({type:"naked_pair",cause:[m,g],effect:q})}}if(e[l][t].value===void 0&&e[l][t].notes.length===2){const f=e[l][t].notes.join(",");if(!r[f])r[f]={row:l,col:t};else{const m={row:l,col:t,notes:[...e[l][t].notes]},g={row:r[f].row,col:r[f].col,notes:[...e[l][t].notes]},q=[];for(let b=0;b<9;b++)e[b][t].value!==void 0||e[b][t].notes.join(",")===f||q.push({row:b,col:t,notes:[...e[l][t].notes]});o.push({type:"naked_pair",cause:[m,g],effect:q})}}const _=Math.floor(l/3),C=l%3,a=i+_,u=p+C;if(e[a][u].value===void 0&&e[a][u].notes.length===2){const f=e[a][u].notes.join(",");if(!s[f])s[f]={row:a,col:u};else{const m={row:a,col:u,notes:[...e[a][u].notes]},g={row:s[f].row,col:s[f].col,notes:[...e[a][u].notes]},q=[];for(let b=0;b<9;b++){const S=Math.floor(b/3),Q=b%3,U=i+S,H=p+Q;e[U][H].value!==void 0||e[U][H].notes.join(",")===f||q.push({row:U,col:H,notes:[...e[a][u].notes]})}o.push({type:"naked_pair",cause:[m,g],effect:q})}}}}return o};function Ie(e,o,t){const n=e.slice();return n[21]=o[t],n}function ze(e){let o,t="Remove notes",n,r;return{c(){o=y("button"),o.textContent=t},l(s){o=N(s,"BUTTON",{"data-svelte-h":!0}),I(o)!=="svelte-16z5c15"&&(o.textContent=t)},m(s,i){D(s,o,i),n||(r=z(o,"click",e[17]),n=!0)},p:$e,d(s){s&&w(o),n=!1,r()}}}function Pe(e){let o,t,n,r;function s(){return e[19](e[21])}return{c(){o=y("button"),t=Y(e[21]),this.h()},l(i){o=N(i,"BUTTON",{class:!0});var p=B(o);t=Z(p,e[21]),p.forEach(w),this.h()},h(){ae(o,"class","svelte-zwzkqm"),je(o,"selected",e[4]===e[21])},m(i,p){D(i,o,p),d(o,t),n||(r=z(o,"click",s),n=!0)},p(i,p){e=i,p&16&&je(o,"selected",e[4]===e[21])},d(i){i&&w(o),n=!1,r()}}}function Ve(e){let o,t,n,r;return o=new Ze({props:{gridErrors:Se(e[0]),strategiesResults:e[1],grid:e[0]}}),o.$on("cellUpdate",e[6]),o.$on("computeCellNotes",e[7]),n=new et({props:{grid:e[0]}}),{c(){He(o.$$.fragment),t=R(),He(n.$$.fragment)},l(s){qe(o.$$.fragment,s),t=j(s),qe(n.$$.fragment,s)},m(s,i){Ge(o,s,i),D(s,t,i),Ge(n,s,i),r=!0},p(s,i){const p={};i&1&&(p.gridErrors=Se(s[0])),i&2&&(p.strategiesResults=s[1]),i&1&&(p.grid=s[0]),o.$set(p);const l={};i&1&&(l.grid=s[0]),n.$set(l)},i(s){r||(ue(o.$$.fragment,s),ue(n.$$.fragment,s),r=!0)},o(s){ie(o.$$.fragment,s),ie(n.$$.fragment,s),r=!1},d(s){s&&w(t),Oe(o,s),Oe(n,s)}}}function ut(e){let o,t,n="Grid controls",r,s,i,p="Prev",l,_,C="New Grid",a,u,f="Solve grid",m,g,q="Reset grid",b,S,Q="Remove fixed",U,H,V,fe="Notes controls",v,E,M,W=e[2]?"Disable":"Enable",ee,_e,he,te,$,X=e[3]?"Hide":"Display",oe,de,se,P,F,ye="Highlights controls",ve,x,ne,le,ce,Ne=e[0],J,K,pe,Te,T=!e[2]&&ze(e),me=De([1,2,3,4,5,6,7,8,9]),G=[];for(let c=0;c<9;c+=1)G[c]=Pe(Ie(e,me,c));let O=Ve(e);return{c(){o=y("div"),t=y("h4"),t.textContent=n,r=R(),s=y("div"),i=y("button"),i.textContent=p,l=R(),_=y("button"),_.textContent=C,a=R(),u=y("button"),u.textContent=f,m=R(),g=y("button"),g.textContent=q,b=R(),S=y("button"),S.textContent=Q,U=R(),H=y("div"),V=y("h4"),V.textContent=fe,v=R(),E=y("div"),M=y("button"),ee=Y(W),_e=Y(" notes auto-refresh"),he=R(),T&&T.c(),te=R(),$=y("button"),oe=Y(X),de=Y(" hints"),se=R(),P=y("div"),F=y("h4"),F.textContent=ye,ve=R(),x=y("div");for(let c=0;c<9;c+=1)G[c].c();ne=R(),le=y("br"),ce=R(),O.c(),J=ge(),this.h()},l(c){o=N(c,"DIV",{});var k=B(o);t=N(k,"H4",{"data-svelte-h":!0}),I(t)!=="svelte-1h8cvtc"&&(t.textContent=n),r=j(k),s=N(k,"DIV",{class:!0});var h=B(s);i=N(h,"BUTTON",{"data-svelte-h":!0}),I(i)!=="svelte-bivxk4"&&(i.textContent=p),l=j(h),_=N(h,"BUTTON",{"data-svelte-h":!0}),I(_)!=="svelte-1oh0e6u"&&(_.textContent=C),a=j(h),u=N(h,"BUTTON",{"data-svelte-h":!0}),I(u)!=="svelte-1wjgins"&&(u.textContent=f),m=j(h),g=N(h,"BUTTON",{"data-svelte-h":!0}),I(g)!=="svelte-hocye6"&&(g.textContent=q),b=j(h),S=N(h,"BUTTON",{"data-svelte-h":!0}),I(S)!=="svelte-g7g4he"&&(S.textContent=Q),h.forEach(w),k.forEach(w),U=j(c),H=N(c,"DIV",{});var A=B(H);V=N(A,"H4",{"data-svelte-h":!0}),I(V)!=="svelte-8gx0az"&&(V.textContent=fe),v=j(A),E=N(A,"DIV",{class:!0});var L=B(E);M=N(L,"BUTTON",{});var ke=B(M);ee=Z(ke,W),_e=Z(ke," notes auto-refresh"),ke.forEach(w),he=j(L),T&&T.l(L),te=j(L),$=N(L,"BUTTON",{});var be=B($);oe=Z(be,X),de=Z(be," hints"),be.forEach(w),L.forEach(w),A.forEach(w),se=j(c),P=N(c,"DIV",{});var re=B(P);F=N(re,"H4",{"data-svelte-h":!0}),I(F)!=="svelte-hclwgd"&&(F.textContent=ye),ve=j(re),x=N(re,"DIV",{class:!0});var Ee=B(x);for(let we=0;we<9;we+=1)G[we].l(Ee);Ee.forEach(w),re.forEach(w),ne=j(c),le=N(c,"BR",{}),ce=j(c),O.l(c),J=ge(),this.h()},h(){ae(s,"class","grid-controls svelte-zwzkqm"),ae(E,"class","notes-controls svelte-zwzkqm"),ae(x,"class","highlights-controls")},m(c,k){D(c,o,k),d(o,t),d(o,r),d(o,s),d(s,i),d(s,l),d(s,_),d(s,a),d(s,u),d(s,m),d(s,g),d(s,b),d(s,S),D(c,U,k),D(c,H,k),d(H,V),d(H,v),d(H,E),d(E,M),d(M,ee),d(M,_e),d(E,he),T&&T.m(E,null),d(E,te),d(E,$),d($,oe),d($,de),D(c,se,k),D(c,P,k),d(P,F),d(P,ve),d(P,x);for(let h=0;h<9;h+=1)G[h]&&G[h].m(x,null);D(c,ne,k),D(c,le,k),D(c,ce,k),O.m(c,k),D(c,J,k),K=!0,pe||(Te=[z(i,"click",e[11]),z(_,"click",e[12]),z(u,"click",e[13]),z(g,"click",e[14]),z(S,"click",e[15]),z(M,"click",e[16]),z($,"click",e[18])],pe=!0)},p(c,[k]){if((!K||k&4)&&W!==(W=c[2]?"Disable":"Enable")&&Re(ee,W),c[2]?T&&(T.d(1),T=null):T?T.p(c,k):(T=ze(c),T.c(),T.m(E,te)),(!K||k&8)&&X!==(X=c[3]?"Hide":"Display")&&Re(oe,X),k&16){me=De([1,2,3,4,5,6,7,8,9]);let h;for(h=0;h<9;h+=1){const A=Ie(c,me,h);G[h]?G[h].p(A,k):(G[h]=Pe(A),G[h].c(),G[h].m(x,null))}for(;h<9;h+=1)G[h].d(1)}k&1&&Me(Ne,Ne=c[0])?(Xe(),ie(O,1,1,$e),We(),O=Ve(c),O.c(),ue(O,1),O.m(J.parentNode,J)):O.p(c,k)},i(c){K||(ue(O),K=!0)},o(c){ie(O),K=!1},d(c){c&&(w(o),w(U),w(H),w(se),w(P),w(ne),w(le),w(ce),w(J)),T&&T.d(),Ae(G,c),O.d(c),pe=!1,Fe(Te)}}}function ft(e,o,t){let n;Je(e,Ue,v=>t(4,n=v));let r=Be(),s=[];const i=[Ce(r)];let p=!1,l=!1;const _=v=>{tt(v.detail.cell,v.detail.update),a()},C=v=>{ot(r,v.detail.position),a()},a=v=>{p&&lt(r),l?m(r):t(1,s=[]),t(0,r),!(v!=null&&v.noHistory)&&i.push(Ce(r))},u=()=>{t(0,r=ct(r)),a()},f=()=>{for(let v=0;v<9;v++)for(let E=0;E<9;E++)t(0,r[v][E].fixed=!1,r)},m=v=>{t(1,s=[...at(v),...rt(v),...it(v)])};return[r,s,p,l,n,i,_,C,a,u,f,()=>{t(0,r=i.pop()),a({noHistory:!0})},()=>{t(0,r=Be()),a()},()=>{u(),a()},()=>{st(r),a()},()=>{f(),a()},()=>{t(2,p=!p),a()},()=>{nt(r),a()},()=>{t(3,l=!l),a()},v=>{Ke(Ue,n=n===v?void 0:v,n)}]}class mt extends Le{constructor(o){super(),Qe(this,o,ft,ut,Me,{})}}export{mt as component};
