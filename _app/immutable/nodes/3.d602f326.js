import{s as Ht,f as C,a as T,e as yt,g as w,h as K,H as U,c as j,d as N,j as nt,i as B,I as h,y as S,J as qt,C as It,D as Dt,l as Mt,m as Pt,K as Nt,G as Vt,E as Ft}from"../chunks/scheduler.71239b2e.js";import{S as zt,i as At,t as st,c as Jt,a as lt,b as xt,d as Tt,m as jt,e as gt,g as Kt}from"../chunks/index.8ab45ecd.js";import{a as Ot}from"../chunks/store.fe58922c.js";import{d as ht,m as Lt,g as Wt,c as Qt,S as Xt,G as Yt,u as Zt,r as te,s as Rt,a as ee,b as oe,e as $t}from"../chunks/GridStatus.2128ccbc.js";const ne=e=>{const o=ht(e);return St(o),o},St=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let n=1;n<=9;n++)if(Lt(e,{row:o,col:t},n)){if(e[o][t].value=n,St(e))return!0;e[o][t].value=void 0}return!1}return!0},Et=()=>{const e=Wt(),o=[];for(let t=0;t<9;t++)for(let n=0;n<9;n++)o.push({row:t,col:n});for(;o.length;){const t=Math.floor(Math.random()*o.length),{row:n,col:c}=o[t];o.splice(t,1);const l=e[n][c].value;e[n][c].value=void 0,e[n][c].notes=[],e[n][c].fixed=!1,Qt(e)!=="unique"&&(e[n][c].value=l)}for(let t=0;t<9;t++)for(let n=0;n<9;n++)e[t][n].value&&(e[t][n].fixed=!0);return e},se=e=>{const o=[];for(let t=0;t<9;t++){const n={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let s=0;s<9;s++){if(e[t][s].value===void 0){const f=e[t][s].notes;for(const p of f)n[p]||(n[p]=[]),n[p].push({row:t,col:s})}if(e[s][t].value===void 0){const f=e[s][t].notes;for(const p of f)c[p]||(c[p]=[]),c[p].push({row:s,col:t})}const _=Math.floor(s/3),x=s%3,d=a+_,v=b+x;if(e[d][v].value===void 0){const f=e[d][v].notes;for(const p of f)l[p]||(l[p]=[]),l[p].push({row:d,col:v})}}for(const s of Object.keys(n)){const _=Number(s);if(n[_].length===1){const{row:x,col:d}=n[_][0];o.push({type:"hidden_single_row",cause:[{row:x,col:d,notes:[_]}]})}}for(const s of Object.keys(c)){const _=Number(s);if(c[_].length===1){const{row:x,col:d}=c[_][0];o.push({type:"hidden_single_col",cause:[{row:x,col:d,notes:[_]}]})}}for(const s of Object.keys(l)){const _=Number(s);if(l[_].length===1){const{row:x,col:d}=l[_][0];o.push({type:"hidden_single_square",cause:[{row:x,col:d,notes:[_]}]})}}}return o},le=e=>{const o=[];for(let t=0;t<9;t++)for(let n=0;n<9;n++)e[t][n].value===void 0&&e[t][n].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:n,notes:[e[t][n].notes[0]]}]});return o},ce=e=>{const o=[];for(let t=0;t<9;t++){const n={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let s=0;s<9;s++){if(e[t][s].value===void 0&&e[t][s].notes.length===2){const f=e[t][s].notes.join(",");if(!n[f])n[f]={row:t,col:s};else{const p={row:t,col:s,notes:[...e[t][s].notes]},g={row:n[f].row,col:n[f].col,notes:[...e[t][s].notes]},$=[];for(let k=0;k<9;k++)e[t][k].value!==void 0||e[t][k].notes.join(",")===f||$.push({row:t,col:k,notes:[...e[t][s].notes]});o.push({type:"naked_pair",cause:[p,g],effect:$})}}if(e[s][t].value===void 0&&e[s][t].notes.length===2){const f=e[s][t].notes.join(",");if(!c[f])c[f]={row:s,col:t};else{const p={row:s,col:t,notes:[...e[s][t].notes]},g={row:c[f].row,col:c[f].col,notes:[...e[s][t].notes]},$=[];for(let k=0;k<9;k++)e[k][t].value!==void 0||e[k][t].notes.join(",")===f||$.push({row:k,col:t,notes:[...e[s][t].notes]});o.push({type:"naked_pair",cause:[p,g],effect:$})}}const _=Math.floor(s/3),x=s%3,d=a+_,v=b+x;if(e[d][v].value===void 0&&e[d][v].notes.length===2){const f=e[d][v].notes.join(",");if(!l[f])l[f]={row:d,col:v};else{const p={row:d,col:v,notes:[...e[d][v].notes]},g={row:l[f].row,col:l[f].col,notes:[...e[d][v].notes]},$=[];for(let k=0;k<9;k++){const H=Math.floor(k/3),Q=k%3,q=a+H,O=b+Q;e[q][O].value!==void 0||e[q][O].notes.join(",")===f||$.push({row:q,col:O,notes:[...e[d][v].notes]})}o.push({type:"naked_pair",cause:[p,g],effect:$})}}}}return o};function Gt(e,o,t){const n=e.slice();return n[20]=o[t],n}function Ut(e){let o,t,n,c;function l(){return e[19](e[20])}return{c(){o=C("button"),t=Mt(e[20]),this.h()},l(a){o=w(a,"BUTTON",{class:!0});var b=K(o);t=Pt(b,e[20]),b.forEach(N),this.h()},h(){nt(o,"class","svelte-1jeisuy"),Nt(o,"selected",e[1]===e[20])},m(a,b){B(a,o,b),h(o,t),n||(c=S(o,"click",l),n=!0)},p(a,b){e=a,b&2&&Nt(o,"selected",e[1]===e[20])},d(a){a&&N(o),n=!1,c()}}}function Bt(e){let o,t,n,c;return o=new Xt({props:{grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),n=new Yt({props:{grid:e[0]}}),{c(){xt(o.$$.fragment),t=T(),xt(n.$$.fragment)},l(l){Tt(o.$$.fragment,l),t=j(l),Tt(n.$$.fragment,l)},m(l,a){jt(o,l,a),B(l,t,a),jt(n,l,a),c=!0},p(l,a){const b={};a&1&&(b.grid=l[0]),o.$set(b);const s={};a&1&&(s.grid=l[0]),n.$set(s)},i(l){c||(lt(o.$$.fragment,l),lt(n.$$.fragment,l),c=!0)},o(l){st(o.$$.fragment,l),st(n.$$.fragment,l),c=!1},d(l){l&&N(t),gt(o,l),gt(n,l)}}}function re(e){let o,t,n="Grid controls",c,l,a,b="Prev",s,_,x="New Grid",d,v,f="Solve grid",p,g,$="Reset grid",k,H,Q="Remove fixed",q,O,M,i="Notes controls",R,y,P,dt="Compute notes",ct,V,vt="Remove notes",rt,F,pt="Display hints",at,z,kt="Hide hints",X,I,L,mt="Highlights controls",it,A,Y,Z,tt,Ct=e[0],W,et,ut,wt,ft=Ot([1,2,3,4,5,6,7,8,9]),E=[];for(let r=0;r<9;r+=1)E[r]=Ut(Gt(e,ft,r));let G=Bt(e);return{c(){o=C("div"),t=C("h4"),t.textContent=n,c=T(),l=C("div"),a=C("button"),a.textContent=b,s=T(),_=C("button"),_.textContent=x,d=T(),v=C("button"),v.textContent=f,p=T(),g=C("button"),g.textContent=$,k=T(),H=C("button"),H.textContent=Q,q=T(),O=C("div"),M=C("h4"),M.textContent=i,R=T(),y=C("div"),P=C("button"),P.textContent=dt,ct=T(),V=C("button"),V.textContent=vt,rt=T(),F=C("button"),F.textContent=pt,at=T(),z=C("button"),z.textContent=kt,X=T(),I=C("div"),L=C("h4"),L.textContent=mt,it=T(),A=C("div");for(let r=0;r<9;r+=1)E[r].c();Y=T(),Z=C("br"),tt=T(),G.c(),W=yt(),this.h()},l(r){o=w(r,"DIV",{});var m=K(o);t=w(m,"H4",{"data-svelte-h":!0}),U(t)!=="svelte-1h8cvtc"&&(t.textContent=n),c=j(m),l=w(m,"DIV",{class:!0});var u=K(l);a=w(u,"BUTTON",{"data-svelte-h":!0}),U(a)!=="svelte-bivxk4"&&(a.textContent=b),s=j(u),_=w(u,"BUTTON",{"data-svelte-h":!0}),U(_)!=="svelte-1oh0e6u"&&(_.textContent=x),d=j(u),v=w(u,"BUTTON",{"data-svelte-h":!0}),U(v)!=="svelte-1wjgins"&&(v.textContent=f),p=j(u),g=w(u,"BUTTON",{"data-svelte-h":!0}),U(g)!=="svelte-69m1bk"&&(g.textContent=$),k=j(u),H=w(u,"BUTTON",{"data-svelte-h":!0}),U(H)!=="svelte-g7g4he"&&(H.textContent=Q),u.forEach(N),m.forEach(N),q=j(r),O=w(r,"DIV",{});var J=K(O);M=w(J,"H4",{"data-svelte-h":!0}),U(M)!=="svelte-8gx0az"&&(M.textContent=i),R=j(J),y=w(J,"DIV",{class:!0});var D=K(y);P=w(D,"BUTTON",{"data-svelte-h":!0}),U(P)!=="svelte-12olw78"&&(P.textContent=dt),ct=j(D),V=w(D,"BUTTON",{"data-svelte-h":!0}),U(V)!=="svelte-16z5c15"&&(V.textContent=vt),rt=j(D),F=w(D,"BUTTON",{"data-svelte-h":!0}),U(F)!=="svelte-mp8c3v"&&(F.textContent=pt),at=j(D),z=w(D,"BUTTON",{"data-svelte-h":!0}),U(z)!=="svelte-eks63j"&&(z.textContent=kt),D.forEach(N),J.forEach(N),X=j(r),I=w(r,"DIV",{});var ot=K(I);L=w(ot,"H4",{"data-svelte-h":!0}),U(L)!=="svelte-hclwgd"&&(L.textContent=mt),it=j(ot),A=w(ot,"DIV",{class:!0});var bt=K(A);for(let _t=0;_t<9;_t+=1)E[_t].l(bt);bt.forEach(N),ot.forEach(N),Y=j(r),Z=w(r,"BR",{}),tt=j(r),G.l(r),W=yt(),this.h()},h(){nt(l,"class","grid-controls svelte-1jeisuy"),nt(y,"class","notes-controls svelte-1jeisuy"),nt(A,"class","highlights-controls")},m(r,m){B(r,o,m),h(o,t),h(o,c),h(o,l),h(l,a),h(l,s),h(l,_),h(l,d),h(l,v),h(l,p),h(l,g),h(l,k),h(l,H),B(r,q,m),B(r,O,m),h(O,M),h(O,R),h(O,y),h(y,P),h(y,ct),h(y,V),h(y,rt),h(y,F),h(y,at),h(y,z),B(r,X,m),B(r,I,m),h(I,L),h(I,it),h(I,A);for(let u=0;u<9;u+=1)E[u]&&E[u].m(A,null);B(r,Y,m),B(r,Z,m),B(r,tt,m),G.m(r,m),B(r,W,m),et=!0,ut||(wt=[S(a,"click",e[10]),S(_,"click",e[11]),S(v,"click",e[12]),S(g,"click",e[13]),S(H,"click",e[14]),S(P,"click",e[15]),S(V,"click",e[16]),S(F,"click",e[17]),S(z,"click",e[18])],ut=!0)},p(r,[m]){if(m&2){ft=Ot([1,2,3,4,5,6,7,8,9]);let u;for(u=0;u<9;u+=1){const J=Gt(r,ft,u);E[u]?E[u].p(J,m):(E[u]=Ut(J),E[u].c(),E[u].m(A,null))}for(;u<9;u+=1)E[u].d(1)}m&1&&Ht(Ct,Ct=r[0])?(Kt(),st(G,1,1,Vt),Jt(),G=Bt(r),G.c(),lt(G,1),G.m(W.parentNode,W)):G.p(r,m)},i(r){et||(lt(G),et=!0)},o(r){st(G),et=!1},d(r){r&&(N(o),N(q),N(O),N(X),N(I),N(Y),N(Z),N(tt),N(W)),qt(E,r),G.d(r),ut=!1,It(wt)}}}function ae(e,o,t){let n;Dt(e,$t,i=>t(1,n=i));let c=Et();const l=[ht(c)],a=i=>{Zt(i.detail.cell,i.detail.update),s()},b=i=>{te(c,i.detail.position),s()},s=i=>{t(0,c),!(i!=null&&i.noHistory)&&l.push(ht(c))},_=i=>{for(let R=0;R<9;R++)for(let y=0;y<9;y++)i[R][y].fixed||(i[R][y].value=void 0,i[R][y].notes=[])},x=()=>{const i=ne(c);t(0,c=i),s()},d=()=>{for(let i=0;i<9;i++)for(let R=0;R<9;R++)t(0,c[i][R].fixed=!1,c)},v=i=>{Rt.set([...le(i),...se(i),...ce(i)])};return[c,n,l,a,b,s,_,x,d,v,()=>{t(0,c=l.pop()),s({noHistory:!0})},()=>{t(0,c=Et()),s()},()=>{x(),s()},()=>{_(c),s()},()=>{d(),s()},()=>{ee(c),s()},()=>{oe(c),s()},()=>{v(c),s()},()=>{Rt.set([]),s()},i=>{Ft($t,n=n===i?void 0:i,n)}]}class he extends zt{constructor(o){super(),At(this,o,ae,re,Ht,{})}}export{he as component};
