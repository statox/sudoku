import{s as ut,f as k,a as S,e as st,g as N,H as q,c as O,i as C,y as H,d as c,C as vt,l as g,h as z,m as K,j as W,J as M,I as p,n as L,G as _t}from"../chunks/scheduler.f51c602a.js";import{S as dt,i as pt,t as Y,c as Ct,a as Z,b as ht,d as mt,m as kt,e as Nt,g as bt}from"../chunks/index.aa7fb691.js";import{b as $,c as tt,e as nt,a as rt,S as St,u as Ot,g as wt}from"../chunks/Sudoku.c4722781.js";const Q=(l,o,s,t)=>{if(!t||l[o][s].value)return!1;const r=l[o][s].notes.indexOf(t);return r===-1?!1:(l[o][s].notes.splice(r,1),!0)},Tt=l=>{for(let o=0;o<9;o++)for(let s=0;s<9;s++)l[o][s].value?l[o][s].notes=[]:l[o][s].notes=[1,2,3,4,5,6,7,8,9];for(let o=0;o<9;o++)for(let s=0;s<9;s++){const{value:t}=l[o][s];if(t)continue;for(let v=0;v<9;v++){const i=l[v][s].value;Q(l,o,s,i);const w=l[o][v].value;Q(l,o,s,w)}const r=Math.floor(s/3),_=Math.floor(o/3);for(let v=0;v<3;v++)for(let i=0;i<3;i++){const w=l[3*_+v][3*r+i].value;Q(l,o,s,w)}}},xt=l=>{console.log(l.map(o=>o.map(s=>s.value??".").join(" ")).join(`
`))},It=l=>{const o=JSON.parse(JSON.stringify(l));return ft(o),o},X=l=>{if($(l))return tt(l)?"unique":"none";const o=JSON.parse(JSON.stringify(l));let s=0;for(let r=0;r<9;r++)for(let _=0;_<9;_++)l[r][_].value!==void 0&&s++;const t=[];return at(o,t,s),console.log("found",t.length,"solutions"),t.forEach(xt),t.length===0?"none":t.length===1?"unique":"notUnique"},at=(l,o,s)=>{for(let t=0;t<9;t++)for(let r=0;r<9;r++)if(l[t][r].value===void 0){for(let _=1;_<=9;_++)if(ct(l,{row:t,col:r},_)){if(l[t][r].value=_,at(l,o,s+1)&&(s===80&&o.push(JSON.parse(JSON.stringify(l))),o.length>=2))return!0;l[t][r].value=void 0}return!1}return!0},ft=l=>{for(let o=0;o<9;o++)for(let s=0;s<9;s++)if(l[o][s].value===void 0){for(let t=1;t<=9;t++)if(ct(l,{row:o,col:s},t)){if(l[o][s].value=t,ft(l))return!0;l[o][s].value=void 0}return!1}return!0},ct=(l,o,s)=>{const{col:t,row:r}=o;if(l[r][t].value!==void 0)return!1;const _=Math.floor(t/3),v=Math.floor(r/3);for(let i=0;i<9;i++){if(l[r][i].value===s||l[i][t].value===s)return!1;const w=Math.floor(i/3),x=i%3;if(l[3*v+w][3*_+x].value===s)return!1}return!0};function it(l){let o,s,t,r,_="grid has errors",v,i,w="grid is filled",x,a,B="grid is valid",y,h,F="grid has solutions",D,m,G=l[1]?"Has errors":"No errors",U,T,I,E=l[2]?"Is filled":"Not filled",u,b,d,R=l[3]?"Is valid":"Not valid",J,j,V,P,f;return o=new St({props:{grid:l[0]}}),o.$on("cellUpdate",l[6]),{c(){ht(o.$$.fragment),s=S(),t=k("div"),r=k("div"),r.textContent=_,v=S(),i=k("div"),i.textContent=w,x=S(),a=k("div"),a.textContent=B,y=S(),h=k("div"),h.textContent=F,D=S(),m=k("div"),U=g(G),T=S(),I=k("div"),u=g(E),b=S(),d=k("div"),J=g(R),j=S(),V=k("div"),P=g(l[4]),this.h()},l(e){mt(o.$$.fragment,e),s=O(e),t=N(e,"DIV",{class:!0});var n=z(t);r=N(n,"DIV",{"data-svelte-h":!0}),q(r)!=="svelte-1hlqbal"&&(r.textContent=_),v=O(n),i=N(n,"DIV",{"data-svelte-h":!0}),q(i)!=="svelte-ekf37s"&&(i.textContent=w),x=O(n),a=N(n,"DIV",{"data-svelte-h":!0}),q(a)!=="svelte-16e0vl8"&&(a.textContent=B),y=O(n),h=N(n,"DIV",{"data-svelte-h":!0}),q(h)!=="svelte-1tjrozg"&&(h.textContent=F),D=O(n),m=N(n,"DIV",{class:!0});var A=z(m);U=K(A,G),A.forEach(c),T=O(n),I=N(n,"DIV",{class:!0});var et=z(I);u=K(et,E),et.forEach(c),b=O(n),d=N(n,"DIV",{class:!0});var lt=z(d);J=K(lt,R),lt.forEach(c),j=O(n),V=N(n,"DIV",{class:!0});var ot=z(V);P=K(ot,l[4]),ot.forEach(c),n.forEach(c),this.h()},h(){W(m,"class","status svelte-1csoeu4"),M(m,"red",l[1]),W(I,"class","status svelte-1csoeu4"),M(I,"red",!l[2]),W(d,"class","status svelte-1csoeu4"),M(d,"red",!l[3]),W(V,"class","status svelte-1csoeu4"),M(V,"red",l[4]!=="unique"),W(t,"class","grid-status svelte-1csoeu4")},m(e,n){kt(o,e,n),C(e,s,n),C(e,t,n),p(t,r),p(t,v),p(t,i),p(t,x),p(t,a),p(t,y),p(t,h),p(t,D),p(t,m),p(m,U),p(t,T),p(t,I),p(I,u),p(t,b),p(t,d),p(d,J),p(t,j),p(t,V),p(V,P),f=!0},p(e,n){const A={};n&1&&(A.grid=e[0]),o.$set(A),(!f||n&2)&&G!==(G=e[1]?"Has errors":"No errors")&&L(U,G),(!f||n&2)&&M(m,"red",e[1]),(!f||n&4)&&E!==(E=e[2]?"Is filled":"Not filled")&&L(u,E),(!f||n&4)&&M(I,"red",!e[2]),(!f||n&8)&&R!==(R=e[3]?"Is valid":"Not valid")&&L(J,R),(!f||n&8)&&M(d,"red",!e[3]),(!f||n&16)&&L(P,e[4]),(!f||n&16)&&M(V,"red",e[4]!=="unique")},i(e){f||(Z(o.$$.fragment,e),f=!0)},o(e){Y(o.$$.fragment,e),f=!1},d(e){e&&(c(s),c(t)),Nt(o,e)}}}function Vt(l){let o,s="Prev",t,r,_="Empty grid",v,i,w="New Grid",x,a,B="Compute notes",y,h,F="Solve grid",D,m,G="Count solutions",U,T,I="Reset grid",E,u,b="Remove fixed",d,R=l[0],J,j,V,P,f=it(l);return{c(){o=k("button"),o.textContent=s,t=S(),r=k("button"),r.textContent=_,v=S(),i=k("button"),i.textContent=w,x=S(),a=k("button"),a.textContent=B,y=S(),h=k("button"),h.textContent=F,D=S(),m=k("button"),m.textContent=G,U=S(),T=k("button"),T.textContent=I,E=S(),u=k("button"),u.textContent=b,d=S(),f.c(),J=st()},l(e){o=N(e,"BUTTON",{"data-svelte-h":!0}),q(o)!=="svelte-bivxk4"&&(o.textContent=s),t=O(e),r=N(e,"BUTTON",{"data-svelte-h":!0}),q(r)!=="svelte-1wlhii8"&&(r.textContent=_),v=O(e),i=N(e,"BUTTON",{"data-svelte-h":!0}),q(i)!=="svelte-nbv2dw"&&(i.textContent=w),x=O(e),a=N(e,"BUTTON",{"data-svelte-h":!0}),q(a)!=="svelte-12olw78"&&(a.textContent=B),y=O(e),h=N(e,"BUTTON",{"data-svelte-h":!0}),q(h)!=="svelte-1wjgins"&&(h.textContent=F),D=O(e),m=N(e,"BUTTON",{"data-svelte-h":!0}),q(m)!=="svelte-3qjsdq"&&(m.textContent=G),U=O(e),T=N(e,"BUTTON",{"data-svelte-h":!0}),q(T)!=="svelte-69m1bk"&&(T.textContent=I),E=O(e),u=N(e,"BUTTON",{"data-svelte-h":!0}),q(u)!=="svelte-g7g4he"&&(u.textContent=b),d=O(e),f.l(e),J=st()},m(e,n){C(e,o,n),C(e,t,n),C(e,r,n),C(e,v,n),C(e,i,n),C(e,x,n),C(e,a,n),C(e,y,n),C(e,h,n),C(e,D,n),C(e,m,n),C(e,U,n),C(e,T,n),C(e,E,n),C(e,u,n),C(e,d,n),f.m(e,n),C(e,J,n),j=!0,V||(P=[H(o,"click",l[11]),H(r,"click",l[12]),H(i,"click",l[13]),H(a,"click",l[14]),H(h,"click",l[15]),H(m,"click",l[16]),H(T,"click",l[17]),H(u,"click",l[18])],V=!0)},p(e,[n]){n&1&&ut(R,R=e[0])?(bt(),Y(f,1,1,_t),Ct(),f=it(e),f.c(),Z(f,1),f.m(J.parentNode,J)):f.p(e,n)},i(e){j||(Z(f),j=!0)},o(e){Y(f),j=!1},d(e){e&&(c(o),c(t),c(r),c(v),c(i),c(x),c(a),c(y),c(h),c(D),c(m),c(U),c(T),c(E),c(u),c(d),c(J)),f.d(e),V=!1,vt(P)}}}function qt(l,o,s){let t=nt();const r=[JSON.parse(JSON.stringify(t))];let _=rt(t),v=$(t),i=tt(t),w=X(t);const x=u=>{Ot(u.detail.cell,u.detail.update),a()},a=u=>{s(1,_=rt(t)),s(2,v=$(t)),s(3,i=tt(t)),s(4,w=X(t)),s(0,t),!(u!=null&&u.noHistory)&&r.push(JSON.parse(JSON.stringify(t)))},B=u=>{for(let b=0;b<9;b++)for(let d=0;d<9;d++)u[b][d].fixed||(u[b][d].value=void 0,u[b][d].notes=[])},y=()=>{const u=It(t);s(0,t=u),a()},h=()=>{for(let u=0;u<9;u++)for(let b=0;b<9;b++)s(0,t[u][b].fixed=!1,t)};return[t,_,v,i,w,r,x,a,B,y,h,()=>{s(0,t=r.pop()),a({noHistory:!0})},()=>{s(0,t=wt()),a()},()=>{s(0,t=nt(20)),a()},()=>{Tt(t),a()},()=>{y(),a()},()=>{X(t)},()=>{B(t),a()},()=>{h(),a()}]}class Ut extends dt{constructor(o){super(),pt(this,o,qt,Vt,ut,{})}}export{Ut as component};
