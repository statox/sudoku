import{s as de,f as p,J as je,g as v,d as f,j as k,I as u,G as se,a as G,l as B,e as re,c as H,h as S,m as R,i as D,y as q,n as j,K as qe,C as Re,D as Ce,o as Qe,H as Fe,L as Ge,E as We}from"../chunks/scheduler.193db7c4.js";import{S as Me,i as Ve,b as _e,d as he,m as me,t as X,c as Je,a as Q,e as pe,g as ze}from"../chunks/index.9bea933b.js";import{a as He}from"../chunks/store.8b4149bb.js";import{p as Xe}from"../chunks/stores.432e74ee.js";import{d as fe,m as Ye,S as Ze,g as De,u as $e,r as xe,a as et,b as tt,s as Ie,G as lt,c as ot}from"../chunks/GridStatus.413d63da.js";import{g as ye,a as nt}from"../chunks/helpers.77b76155.js";import{b as st}from"../chunks/paths.13ccb110.js";const rt=l=>{const e=fe(l);return Ke(e),e},Ke=l=>{for(let e=0;e<9;e++)for(let n=0;n<9;n++)if(l[e][n].value===void 0){for(let s=1;s<=9;s++)if(Ye(l,{row:e,col:n},s)){if(l[e][n].value=s,Ke(l))return!0;l[e][n].value=void 0}return!1}return!0};function it(l){let e,n,s,i,t,o;return document.title=e=l[0],{c(){n=p("meta"),s=p("link"),i=p("meta"),t=p("meta"),o=p("meta"),this.h()},l(c){const a=je("svelte-illghk",document.head);n=v(a,"META",{name:!0,content:!0}),s=v(a,"LINK",{rel:!0,href:!0}),i=v(a,"META",{name:!0,content:!0}),t=v(a,"META",{name:!0,content:!0}),o=v(a,"META",{name:!0,content:!0}),a.forEach(f),this.h()},h(){k(n,"name","description"),k(n,"content",l[1]),k(s,"rel","apple-touch-icon"),k(s,"href",l[2]),k(i,"name","apple-mobile-web-app-title"),k(i,"content",l[0]),k(t,"name","apple-mobile-web-app-capable"),k(t,"content","yes"),k(o,"name","apple-mobile-web-app-status-bar-style"),k(o,"content","black")},m(c,a){u(document.head,n),u(document.head,s),u(document.head,i),u(document.head,t),u(document.head,o)},p(c,[a]){a&1&&e!==(e=c[0])&&(document.title=e),a&2&&k(n,"content",c[1]),a&4&&k(s,"href",c[2]),a&1&&k(i,"content",c[0])},i:se,o:se,d(c){f(n),f(s),f(i),f(t),f(o)}}}function at(l,e,n){let{title:s}=e,{description:i}=e,{iconPath:t=`${st}/favicon.png`}=e;return l.$$set=o=>{"title"in o&&n(0,s=o.title),"description"in o&&n(1,i=o.description),"iconPath"in o&&n(2,t=o.iconPath)},[s,i,t]}class ct extends Me{constructor(e){super(),Ve(this,e,at,it,de,{title:0,description:1,iconPath:2})}}const Le="sudoku-game-grid-v1",ut=l=>{localStorage.setItem(Le,JSON.stringify(l))},ft=()=>{try{const l=localStorage.getItem(Le);return l?JSON.parse(l):void 0}catch{return}};function we(l,e,n){const s=l.slice();return s[21]=e[n],s}function Ae(l){let e,n,s="Notes controls",i,t,o,c=l[2]?"Disable":"Enable",a,N,w,P,I,h=l[3]?"Hide":"Display",y,F,K,M,m=!l[2]&&Oe(l);return{c(){e=p("div"),n=p("h4"),n.textContent=s,i=G(),t=p("div"),o=p("button"),a=B(c),N=B(" notes auto-refresh"),w=G(),m&&m.c(),P=G(),I=p("button"),y=B(h),F=B(" hints"),this.h()},l(g){e=v(g,"DIV",{});var T=S(e);n=v(T,"H4",{"data-svelte-h":!0}),Fe(n)!=="svelte-8gx0az"&&(n.textContent=s),i=H(T),t=v(T,"DIV",{class:!0});var C=S(t);o=v(C,"BUTTON",{});var V=S(o);a=R(V,c),N=R(V," notes auto-refresh"),V.forEach(f),w=H(C),m&&m.l(C),P=H(C),I=v(C,"BUTTON",{});var z=S(I);y=R(z,h),F=R(z," hints"),z.forEach(f),C.forEach(f),T.forEach(f),this.h()},h(){k(t,"class","notes-controls svelte-npryvf")},m(g,T){D(g,e,T),u(e,n),u(e,i),u(e,t),u(t,o),u(o,a),u(o,N),u(t,w),m&&m.m(t,null),u(t,P),u(t,I),u(I,y),u(I,F),K||(M=[q(o,"click",l[15]),q(I,"click",l[17])],K=!0)},p(g,T){T&4&&c!==(c=g[2]?"Disable":"Enable")&&j(a,c),g[2]?m&&(m.d(1),m=null):m?m.p(g,T):(m=Oe(g),m.c(),m.m(t,P)),T&8&&h!==(h=g[3]?"Hide":"Display")&&j(y,h)},d(g){g&&f(e),m&&m.d(),K=!1,Re(M)}}}function Oe(l){let e,n="Remove notes",s,i;return{c(){e=p("button"),e.textContent=n},l(t){e=v(t,"BUTTON",{"data-svelte-h":!0}),Fe(e)!=="svelte-16z5c15"&&(e.textContent=n)},m(t,o){D(t,e,o),s||(i=q(e,"click",l[16]),s=!0)},p:se,d(t){t&&f(e),s=!1,i()}}}function Pe(l){let e,n,s,i;function t(){return l[18](l[21])}return{c(){e=p("button"),n=B(l[21]),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var c=S(e);n=R(c,l[21]),c.forEach(f),this.h()},h(){k(e,"class","svelte-npryvf"),Ge(e,"selected",l[5]===l[21])},m(o,c){D(o,e,c),u(e,n),s||(i=q(e,"click",t),s=!0)},p(o,c){l=o,c&32&&Ge(e,"selected",l[5]===l[21])},d(o){o&&f(e),s=!1,i()}}}function Ue(l){let e,n;return e=new lt({props:{grid:l[0]}}),{c(){_e(e.$$.fragment)},l(s){he(e.$$.fragment,s)},m(s,i){me(e,s,i),n=!0},p(s,i){const t={};i&1&&(t.grid=s[0]),e.$set(t)},i(s){n||(Q(e.$$.fragment,s),n=!0)},o(s){X(e.$$.fragment,s),n=!1},d(s){pe(e,s)}}}function Be(l){let e,n,s,i;e=new Ze({props:{gridErrors:De(l[0]),hints:l[1],grid:l[0]}}),e.$on("cellUpdate",l[7]),e.$on("computeCellNotes",l[8]);let t=!l[4]&&Ue(l);return{c(){_e(e.$$.fragment),n=G(),t&&t.c(),s=re()},l(o){he(e.$$.fragment,o),n=H(o),t&&t.l(o),s=re()},m(o,c){me(e,o,c),D(o,n,c),t&&t.m(o,c),D(o,s,c),i=!0},p(o,c){const a={};c&1&&(a.gridErrors=De(o[0])),c&2&&(a.hints=o[1]),c&1&&(a.grid=o[0]),e.$set(a),o[4]?t&&(ze(),X(t,1,1,()=>{t=null}),Je()):t?(t.p(o,c),c&16&&Q(t,1)):(t=Ue(o),t.c(),Q(t,1),t.m(s.parentNode,s))},i(o){i||(Q(e.$$.fragment,o),Q(t),i=!0)},o(o){X(e.$$.fragment,o),X(t),i=!1},d(o){o&&(f(n),f(s)),pe(e,o),t&&t.d(o)}}}function dt(l){let e,n,s,i,t=l[4]?"Contrôles de la grille":"Grid controls",o,c,a,N,w=l[4]?"Annuler":"Prev",P,I,h,y=l[4]?"Nouvelle grille":"New Grid",F,K,M,m=l[4]?"Résoudre":"Solve grid",g,T,C,V=l[4]?"Recommencer":"Reset grid",z,_,Y,L,$,x=l[4]?"Surligner":"Highlight controls",ee,ie,W,te,le,oe,ve=l[0],Z,J,ae,be;e=new ct({props:{title:"Sudoku",description:"Play Sudoku"}});let E=!l[4]&&Ae(l),ce=He([1,2,3,4,5,6,7,8,9]),A=[];for(let r=0;r<9;r+=1)A[r]=Pe(we(l,ce,r));let O=Be(l);return{c(){_e(e.$$.fragment),n=G(),s=p("div"),i=p("h4"),o=B(t),c=G(),a=p("div"),N=p("button"),P=B(w),I=G(),h=p("button"),F=B(y),K=G(),M=p("button"),g=B(m),T=G(),C=p("button"),z=B(V),_=G(),E&&E.c(),Y=G(),L=p("div"),$=p("h4"),ee=B(x),ie=G(),W=p("div");for(let r=0;r<9;r+=1)A[r].c();te=G(),le=p("br"),oe=G(),O.c(),Z=re(),this.h()},l(r){he(e.$$.fragment,r),n=H(r),s=v(r,"DIV",{});var d=S(s);i=v(d,"H4",{});var b=S(i);o=R(b,t),b.forEach(f),c=H(d),a=v(d,"DIV",{class:!0});var U=S(a);N=v(U,"BUTTON",{});var ge=S(N);P=R(ge,w),ge.forEach(f),I=H(U),h=v(U,"BUTTON",{});var ke=S(h);F=R(ke,y),ke.forEach(f),K=H(U),M=v(U,"BUTTON",{});var Ee=S(M);g=R(Ee,m),Ee.forEach(f),T=H(U),C=v(U,"BUTTON",{});var Ne=S(C);z=R(Ne,V),Ne.forEach(f),U.forEach(f),d.forEach(f),_=H(r),E&&E.l(r),Y=H(r),L=v(r,"DIV",{});var ne=S(L);$=v(ne,"H4",{});var Te=S($);ee=R(Te,x),Te.forEach(f),ie=H(ne),W=v(ne,"DIV",{class:!0});var Se=S(W);for(let ue=0;ue<9;ue+=1)A[ue].l(Se);Se.forEach(f),ne.forEach(f),te=H(r),le=v(r,"BR",{}),oe=H(r),O.l(r),Z=re(),this.h()},h(){k(a,"class","grid-controls svelte-npryvf"),k(W,"class","highlights-controls svelte-npryvf")},m(r,d){me(e,r,d),D(r,n,d),D(r,s,d),u(s,i),u(i,o),u(s,c),u(s,a),u(a,N),u(N,P),u(a,I),u(a,h),u(h,F),u(a,K),u(a,M),u(M,g),u(a,T),u(a,C),u(C,z),D(r,_,d),E&&E.m(r,d),D(r,Y,d),D(r,L,d),u(L,$),u($,ee),u(L,ie),u(L,W);for(let b=0;b<9;b+=1)A[b]&&A[b].m(W,null);D(r,te,d),D(r,le,d),D(r,oe,d),O.m(r,d),D(r,Z,d),J=!0,ae||(be=[q(N,"click",l[11]),q(h,"click",l[12]),q(M,"click",l[13]),q(C,"click",l[14])],ae=!0)},p(r,[d]){if((!J||d&16)&&t!==(t=r[4]?"Contrôles de la grille":"Grid controls")&&j(o,t),(!J||d&16)&&w!==(w=r[4]?"Annuler":"Prev")&&j(P,w),(!J||d&16)&&y!==(y=r[4]?"Nouvelle grille":"New Grid")&&j(F,y),(!J||d&16)&&m!==(m=r[4]?"Résoudre":"Solve grid")&&j(g,m),(!J||d&16)&&V!==(V=r[4]?"Recommencer":"Reset grid")&&j(z,V),r[4]?E&&(E.d(1),E=null):E?E.p(r,d):(E=Ae(r),E.c(),E.m(Y.parentNode,Y)),(!J||d&16)&&x!==(x=r[4]?"Surligner":"Highlight controls")&&j(ee,x),d&32){ce=He([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const U=we(r,ce,b);A[b]?A[b].p(U,d):(A[b]=Pe(U),A[b].c(),A[b].m(W,null))}for(;b<9;b+=1)A[b].d(1)}d&1&&de(ve,ve=r[0])?(ze(),X(O,1,1,se),Je(),O=Be(r),O.c(),Q(O,1),O.m(Z.parentNode,Z)):O.p(r,d)},i(r){J||(Q(e.$$.fragment,r),Q(O),J=!0)},o(r){X(e.$$.fragment,r),X(O),J=!1},d(r){r&&(f(n),f(s),f(_),f(Y),f(L),f(te),f(le),f(oe),f(Z)),pe(e,r),E&&E.d(r),qe(A,r),O.d(r),ae=!1,Re(be)}}}function _t(l,e,n){let s,i;Ce(l,Xe,_=>n(19,s=_)),Ce(l,Ie,_=>n(5,i=_));let t=ye(),o=[];const c=[fe(t)];let a=!1,N=!1,w=!1;const P=_=>{$e(_.detail.cell,_.detail.update),h()},I=_=>{xe(t,_.detail.position),h()},h=_=>{a&&ot(t),N?F(t):n(1,o=[]),ut(t),n(0,t),!(_!=null&&_.noHistory)&&c.push(fe(t))},y=()=>{n(0,t=rt(t)),h()},F=_=>{n(1,o=nt(_))};return Qe(()=>{const _=ft();_&&n(0,t={..._}),n(4,w=s.url.searchParams.has("fr"))}),[t,o,a,N,w,i,c,P,I,h,y,()=>{n(0,t=c.pop()),h({noHistory:!0})},()=>{n(0,t=ye()),h()},()=>{y(),h()},()=>{et(t),h()},()=>{n(2,a=!a),h()},()=>{tt(t),h()},()=>{n(3,N=!N),h()},_=>{We(Ie,i=i===_?void 0:_,i)}]}class Et extends Me{constructor(e){super(),Ve(this,e,_t,dt,de,{})}}export{Et as component};
