import{s as it,f as b,a as m,l as j,e as et,g as d,H as w,c as h,h as ct,m as Z,d as i,i as f,I as D,y as x,n as nt,C as pt,G as _t}from"../chunks/scheduler.71239b2e.js";import{S as mt,i as ht,t as z,c as kt,a as A,b as st,d as lt,m as ot,e as rt,g as Ct}from"../chunks/index.8ab45ecd.js";import{f as L,h as Q,d as J,a as bt,i as dt,j as ut,S as vt,G as yt,u as Nt,w as Tt,g as wt}from"../chunks/GridStatus.2dcb34a0.js";const xt=(s,o)=>{if(L(s)||Q(s))return s;const l=J(s);bt(l);const n=[l];for(;n.length;){const t=n.pop();if(o.push(J(t)),L(t))continue;if(Q(t)){if(dt(t))return t;continue}const r=Mt(t);if(!r.length)continue;const c=Math.floor(Math.random()*r.length),u=r[c],p=J(t);p[u.row][u.col].notes=p[u.row][u.col].notes.filter(T=>T!==u.value),n.push(p),Ht(t,u),ft(t),n.push(t)}return l},K=(s,o,l,n)=>{if(s[o][l].value)return!1;const t=s[o][l].notes.indexOf(n);return t===-1?!1:(s[o][l].notes.splice(t,1),s[o][l].notes.length===1?(s[o][l].value=s[o][l].notes.pop(),!0):!1)},ft=s=>{if(Q(s)||L(s))return;let o=!1;for(let l=0;l<9;l++)for(let n=0;n<9;n++){const{value:t}=s[l][n];if(!t)continue;for(let u=0;u<9;u++)o=o||K(s,u,n,t),o=o||K(s,l,u,t);const r=Math.floor(n/3),c=Math.floor(l/3);for(let u=0;u<3;u++)for(let p=0;p<3;p++)o=o||K(s,3*c+u,3*r+p,t)}o&&ft(s)},gt=(s,o)=>{const{row:l,col:n,value:t}=o;return!(s[l][n].value||!s[l][n].notes.includes(t))},Ht=(s,o)=>{if(!gt(s,o))return;const{row:l,col:n,value:t}=o;s[l][n].value=t,s[l][n].notes=[]},Mt=s=>{let o=[],l=9;for(let n=0;n<9;n++)for(let t=0;t<9;t++){if(s[n][t].value!==void 0)continue;const{notes:r}=s[n][t];if(r.length<l&&(l=r.length,o=[]),r.length===l)for(const c of s[n][t].notes)o.push({row:n,col:t,value:c})}return o};function at(s){let o,l,n,t;return o=new vt({props:{grid:s[0]}}),o.$on("cellUpdate",s[3]),n=new yt({props:{grid:s[0]}}),{c(){st(o.$$.fragment),l=m(),st(n.$$.fragment)},l(r){lt(o.$$.fragment,r),l=h(r),lt(n.$$.fragment,r)},m(r,c){ot(o,r,c),f(r,l,c),ot(n,r,c),t=!0},p(r,c){const u={};c&1&&(u.grid=r[0]),o.$set(u);const p={};c&1&&(p.grid=r[0]),n.$set(p)},i(r){t||(A(o.$$.fragment,r),A(n.$$.fragment,r),t=!0)},o(r){z(o.$$.fragment,r),z(n.$$.fragment,r),t=!1},d(r){r&&i(l),rt(o,r),rt(n,r)}}}function Ut(s){let o,l="Reset grid",n,t,r="Run one step",c,u,p="Generate complete grid",T,M,U,k,E="Generate complete grid (new algo)",B,C,G="Zero history",S,v,X="Prev in history",P,y,Y="Next in history",R,N,q,V,O=s[1].length+"",F,I,$=s[0],g,H,W,tt,_=at(s);return{c(){o=b("button"),o.textContent=l,n=m(),t=b("button"),t.textContent=r,c=m(),u=b("button"),u.textContent=p,T=m(),M=b("br"),U=m(),k=b("button"),k.textContent=E,B=m(),C=b("button"),C.textContent=G,S=m(),v=b("button"),v.textContent=X,P=m(),y=b("button"),y.textContent=Y,R=m(),N=b("span"),q=j(s[2]),V=j(" / "),F=j(O),I=m(),_.c(),g=et()},l(e){o=d(e,"BUTTON",{"data-svelte-h":!0}),w(o)!=="svelte-cddr2q"&&(o.textContent=l),n=h(e),t=d(e,"BUTTON",{"data-svelte-h":!0}),w(t)!=="svelte-fjkgb7"&&(t.textContent=r),c=h(e),u=d(e,"BUTTON",{"data-svelte-h":!0}),w(u)!=="svelte-i6tsy6"&&(u.textContent=p),T=h(e),M=d(e,"BR",{}),U=h(e),k=d(e,"BUTTON",{"data-svelte-h":!0}),w(k)!=="svelte-1lb1nf1"&&(k.textContent=E),B=h(e),C=d(e,"BUTTON",{"data-svelte-h":!0}),w(C)!=="svelte-1t24f4y"&&(C.textContent=G),S=h(e),v=d(e,"BUTTON",{"data-svelte-h":!0}),w(v)!=="svelte-13tmk0z"&&(v.textContent=X),P=h(e),y=d(e,"BUTTON",{"data-svelte-h":!0}),w(y)!=="svelte-ygfhk3"&&(y.textContent=Y),R=h(e),N=d(e,"SPAN",{});var a=ct(N);q=Z(a,s[2]),V=Z(a," / "),F=Z(a,O),a.forEach(i),I=h(e),_.l(e),g=et()},m(e,a){f(e,o,a),f(e,n,a),f(e,t,a),f(e,c,a),f(e,u,a),f(e,T,a),f(e,M,a),f(e,U,a),f(e,k,a),f(e,B,a),f(e,C,a),f(e,S,a),f(e,v,a),f(e,P,a),f(e,y,a),f(e,R,a),f(e,N,a),D(N,q),D(N,V),D(N,F),f(e,I,a),_.m(e,a),f(e,g,a),H=!0,W||(tt=[x(o,"click",s[9]),x(t,"click",s[10]),x(u,"click",s[11]),x(k,"click",s[12]),x(C,"click",s[6]),x(v,"click",s[8]),x(y,"click",s[7])],W=!0)},p(e,[a]){(!H||a&4)&&nt(q,e[2]),(!H||a&2)&&O!==(O=e[1].length+"")&&nt(F,O),a&1&&it($,$=e[0])?(Ct(),z(_,1,1,_t),kt(),_=at(e),_.c(),A(_,1),_.m(g.parentNode,g)):_.p(e,a)},i(e){H||(A(_),H=!0)},o(e){z(_),H=!1},d(e){e&&(i(o),i(n),i(t),i(c),i(u),i(T),i(M),i(U),i(k),i(B),i(C),i(S),i(v),i(P),i(y),i(R),i(N),i(I),i(g)),_.d(e),W=!1,pt(tt)}}}function Bt(s,o,l){let n=ut(),t=[],r=0;const c=G=>{Nt(G.detail.cell,G.detail.update),u()},u=()=>{l(0,n)},p=()=>{l(1,t=[]),l(2,r=0),xt(n,t),l(2,r=t.length-1),l(0,n=t[r])};return[n,t,r,c,u,p,()=>{l(2,r=0),l(0,n=t[r])},()=>{l(2,r=Math.min(r+1,t.length-1)),l(0,n=t[r])},()=>{l(2,r=Math.max(r-1,0)),l(0,n=t[r])},()=>{l(0,n=ut()),u()},()=>{Tt(n),u()},()=>{l(0,n=wt()),u()},()=>{p()}]}class Pt extends mt{constructor(o){super(),ht(this,o,Bt,Ut,it,{})}}export{Pt as component};
