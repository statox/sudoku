import{s as Ht,f as C,a as T,e as yt,g as w,h as J,H as U,c as g,d as N,j as st,i as B,I as h,y as S,J as qt,C as It,D as Dt,l as Pt,m as Mt,K as Nt,G as Vt,E as At}from"../chunks/scheduler.71239b2e.js";import{S as Ft,i as zt,t as nt,c as Wt,a as lt,b as xt,d as Tt,m as gt,e as jt,g as Jt}from"../chunks/index.8ab45ecd.js";import{a as Et}from"../chunks/store.fe58922c.js";import{d as ht,m as Kt,g as Lt,a as Qt,c as Xt,S as Yt,G as Zt,u as te,r as ee,s as Gt,b as oe,e as se,f as Ot}from"../chunks/GridStatus.180befb4.js";const ne=e=>{const o=ht(e);return St(o),o},St=e=>{for(let o=0;o<9;o++)for(let t=0;t<9;t++)if(e[o][t].value===void 0){for(let s=1;s<=9;s++)if(Kt(e,{row:o,col:t},s)){if(e[o][t].value=s,St(e))return!0;e[o][t].value=void 0}return!1}return!0},Rt=()=>{const e=Lt(Qt()),o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)o.push({row:t,col:s});for(;o.length;){const t=Math.floor(Math.random()*o.length),{row:s,col:c}=o[t];o.splice(t,1);const l=e[s][c].value;e[s][c].value=void 0,e[s][c].notes=[],e[s][c].fixed=!1,Xt(e)!=="unique"&&(e[s][c].value=l)}for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value&&(e[t][s].fixed=!0);return e},le=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0){const f=e[t][n].notes;for(const p of f)s[p]||(s[p]=[]),s[p].push({row:t,col:n})}if(e[n][t].value===void 0){const f=e[n][t].notes;for(const p of f)c[p]||(c[p]=[]),c[p].push({row:n,col:t})}const _=Math.floor(n/3),x=n%3,d=a+_,v=b+x;if(e[d][v].value===void 0){const f=e[d][v].notes;for(const p of f)l[p]||(l[p]=[]),l[p].push({row:d,col:v})}}for(const n of Object.keys(s)){const _=Number(n);if(s[_].length===1){const{row:x,col:d}=s[_][0];o.push({type:"hidden_single_row",cause:[{row:x,col:d,notes:[_]}]})}}for(const n of Object.keys(c)){const _=Number(n);if(c[_].length===1){const{row:x,col:d}=c[_][0];o.push({type:"hidden_single_col",cause:[{row:x,col:d,notes:[_]}]})}}for(const n of Object.keys(l)){const _=Number(n);if(l[_].length===1){const{row:x,col:d}=l[_][0];o.push({type:"hidden_single_square",cause:[{row:x,col:d,notes:[_]}]})}}}return o},ce=e=>{const o=[];for(let t=0;t<9;t++)for(let s=0;s<9;s++)e[t][s].value===void 0&&e[t][s].notes.length===1&&o.push({type:"lone_single",cause:[{row:t,col:s,notes:[e[t][s].notes[0]]}]});return o},re=e=>{const o=[];for(let t=0;t<9;t++){const s={},c={},l={},a=3*Math.floor(t/3),b=3*(t%3);for(let n=0;n<9;n++){if(e[t][n].value===void 0&&e[t][n].notes.length===2){const f=e[t][n].notes.join(",");if(!s[f])s[f]={row:t,col:n};else{const p={row:t,col:n,notes:[...e[t][n].notes]},j={row:s[f].row,col:s[f].col,notes:[...e[t][n].notes]},O=[];for(let k=0;k<9;k++)e[t][k].value!==void 0||e[t][k].notes.join(",")===f||O.push({row:t,col:k,notes:[...e[t][n].notes]});o.push({type:"naked_pair",cause:[p,j],effect:O})}}if(e[n][t].value===void 0&&e[n][t].notes.length===2){const f=e[n][t].notes.join(",");if(!c[f])c[f]={row:n,col:t};else{const p={row:n,col:t,notes:[...e[n][t].notes]},j={row:c[f].row,col:c[f].col,notes:[...e[n][t].notes]},O=[];for(let k=0;k<9;k++)e[k][t].value!==void 0||e[k][t].notes.join(",")===f||O.push({row:k,col:t,notes:[...e[n][t].notes]});o.push({type:"naked_pair",cause:[p,j],effect:O})}}const _=Math.floor(n/3),x=n%3,d=a+_,v=b+x;if(e[d][v].value===void 0&&e[d][v].notes.length===2){const f=e[d][v].notes.join(",");if(!l[f])l[f]={row:d,col:v};else{const p={row:d,col:v,notes:[...e[d][v].notes]},j={row:l[f].row,col:l[f].col,notes:[...e[d][v].notes]},O=[];for(let k=0;k<9;k++){const H=Math.floor(k/3),Q=k%3,q=a+H,E=b+Q;e[q][E].value!==void 0||e[q][E].notes.join(",")===f||O.push({row:q,col:E,notes:[...e[d][v].notes]})}o.push({type:"naked_pair",cause:[p,j],effect:O})}}}}return o};function $t(e,o,t){const s=e.slice();return s[20]=o[t],s}function Ut(e){let o,t,s,c;function l(){return e[19](e[20])}return{c(){o=C("button"),t=Pt(e[20]),this.h()},l(a){o=w(a,"BUTTON",{class:!0});var b=J(o);t=Mt(b,e[20]),b.forEach(N),this.h()},h(){st(o,"class","svelte-1jeisuy"),Nt(o,"selected",e[1]===e[20])},m(a,b){B(a,o,b),h(o,t),s||(c=S(o,"click",l),s=!0)},p(a,b){e=a,b&2&&Nt(o,"selected",e[1]===e[20])},d(a){a&&N(o),s=!1,c()}}}function Bt(e){let o,t,s,c;return o=new Yt({props:{grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),s=new Zt({props:{grid:e[0]}}),{c(){xt(o.$$.fragment),t=T(),xt(s.$$.fragment)},l(l){Tt(o.$$.fragment,l),t=g(l),Tt(s.$$.fragment,l)},m(l,a){gt(o,l,a),B(l,t,a),gt(s,l,a),c=!0},p(l,a){const b={};a&1&&(b.grid=l[0]),o.$set(b);const n={};a&1&&(n.grid=l[0]),s.$set(n)},i(l){c||(lt(o.$$.fragment,l),lt(s.$$.fragment,l),c=!0)},o(l){nt(o.$$.fragment,l),nt(s.$$.fragment,l),c=!1},d(l){l&&N(t),jt(o,l),jt(s,l)}}}function ae(e){let o,t,s="Grid controls",c,l,a,b="Prev",n,_,x="New Grid",d,v,f="Solve grid",p,j,O="Reset grid",k,H,Q="Remove fixed",q,E,P,i="Notes controls",G,y,M,dt="Compute notes",ct,V,vt="Remove notes",rt,A,pt="Display hints",at,F,kt="Hide hints",X,I,K,mt="Highlights controls",it,z,Y,Z,tt,Ct=e[0],L,et,ut,wt,ft=Et([1,2,3,4,5,6,7,8,9]),R=[];for(let r=0;r<9;r+=1)R[r]=Ut($t(e,ft,r));let $=Bt(e);return{c(){o=C("div"),t=C("h4"),t.textContent=s,c=T(),l=C("div"),a=C("button"),a.textContent=b,n=T(),_=C("button"),_.textContent=x,d=T(),v=C("button"),v.textContent=f,p=T(),j=C("button"),j.textContent=O,k=T(),H=C("button"),H.textContent=Q,q=T(),E=C("div"),P=C("h4"),P.textContent=i,G=T(),y=C("div"),M=C("button"),M.textContent=dt,ct=T(),V=C("button"),V.textContent=vt,rt=T(),A=C("button"),A.textContent=pt,at=T(),F=C("button"),F.textContent=kt,X=T(),I=C("div"),K=C("h4"),K.textContent=mt,it=T(),z=C("div");for(let r=0;r<9;r+=1)R[r].c();Y=T(),Z=C("br"),tt=T(),$.c(),L=yt(),this.h()},l(r){o=w(r,"DIV",{});var m=J(o);t=w(m,"H4",{"data-svelte-h":!0}),U(t)!=="svelte-1h8cvtc"&&(t.textContent=s),c=g(m),l=w(m,"DIV",{class:!0});var u=J(l);a=w(u,"BUTTON",{"data-svelte-h":!0}),U(a)!=="svelte-bivxk4"&&(a.textContent=b),n=g(u),_=w(u,"BUTTON",{"data-svelte-h":!0}),U(_)!=="svelte-1oh0e6u"&&(_.textContent=x),d=g(u),v=w(u,"BUTTON",{"data-svelte-h":!0}),U(v)!=="svelte-1wjgins"&&(v.textContent=f),p=g(u),j=w(u,"BUTTON",{"data-svelte-h":!0}),U(j)!=="svelte-69m1bk"&&(j.textContent=O),k=g(u),H=w(u,"BUTTON",{"data-svelte-h":!0}),U(H)!=="svelte-g7g4he"&&(H.textContent=Q),u.forEach(N),m.forEach(N),q=g(r),E=w(r,"DIV",{});var W=J(E);P=w(W,"H4",{"data-svelte-h":!0}),U(P)!=="svelte-8gx0az"&&(P.textContent=i),G=g(W),y=w(W,"DIV",{class:!0});var D=J(y);M=w(D,"BUTTON",{"data-svelte-h":!0}),U(M)!=="svelte-12olw78"&&(M.textContent=dt),ct=g(D),V=w(D,"BUTTON",{"data-svelte-h":!0}),U(V)!=="svelte-16z5c15"&&(V.textContent=vt),rt=g(D),A=w(D,"BUTTON",{"data-svelte-h":!0}),U(A)!=="svelte-mp8c3v"&&(A.textContent=pt),at=g(D),F=w(D,"BUTTON",{"data-svelte-h":!0}),U(F)!=="svelte-eks63j"&&(F.textContent=kt),D.forEach(N),W.forEach(N),X=g(r),I=w(r,"DIV",{});var ot=J(I);K=w(ot,"H4",{"data-svelte-h":!0}),U(K)!=="svelte-hclwgd"&&(K.textContent=mt),it=g(ot),z=w(ot,"DIV",{class:!0});var bt=J(z);for(let _t=0;_t<9;_t+=1)R[_t].l(bt);bt.forEach(N),ot.forEach(N),Y=g(r),Z=w(r,"BR",{}),tt=g(r),$.l(r),L=yt(),this.h()},h(){st(l,"class","grid-controls svelte-1jeisuy"),st(y,"class","notes-controls svelte-1jeisuy"),st(z,"class","highlights-controls")},m(r,m){B(r,o,m),h(o,t),h(o,c),h(o,l),h(l,a),h(l,n),h(l,_),h(l,d),h(l,v),h(l,p),h(l,j),h(l,k),h(l,H),B(r,q,m),B(r,E,m),h(E,P),h(E,G),h(E,y),h(y,M),h(y,ct),h(y,V),h(y,rt),h(y,A),h(y,at),h(y,F),B(r,X,m),B(r,I,m),h(I,K),h(I,it),h(I,z);for(let u=0;u<9;u+=1)R[u]&&R[u].m(z,null);B(r,Y,m),B(r,Z,m),B(r,tt,m),$.m(r,m),B(r,L,m),et=!0,ut||(wt=[S(a,"click",e[10]),S(_,"click",e[11]),S(v,"click",e[12]),S(j,"click",e[13]),S(H,"click",e[14]),S(M,"click",e[15]),S(V,"click",e[16]),S(A,"click",e[17]),S(F,"click",e[18])],ut=!0)},p(r,[m]){if(m&2){ft=Et([1,2,3,4,5,6,7,8,9]);let u;for(u=0;u<9;u+=1){const W=$t(r,ft,u);R[u]?R[u].p(W,m):(R[u]=Ut(W),R[u].c(),R[u].m(z,null))}for(;u<9;u+=1)R[u].d(1)}m&1&&Ht(Ct,Ct=r[0])?(Jt(),nt($,1,1,Vt),Wt(),$=Bt(r),$.c(),lt($,1),$.m(L.parentNode,L)):$.p(r,m)},i(r){et||(lt($),et=!0)},o(r){nt($),et=!1},d(r){r&&(N(o),N(q),N(E),N(X),N(I),N(Y),N(Z),N(tt),N(L)),qt(R,r),$.d(r),ut=!1,It(wt)}}}function ie(e,o,t){let s;Dt(e,Ot,i=>t(1,s=i));let c=Rt();const l=[ht(c)],a=i=>{te(i.detail.cell,i.detail.update),n()},b=i=>{ee(c,i.detail.position),n()},n=i=>{t(0,c),!(i!=null&&i.noHistory)&&l.push(ht(c))},_=i=>{for(let G=0;G<9;G++)for(let y=0;y<9;y++)i[G][y].fixed||(i[G][y].value=void 0,i[G][y].notes=[])},x=()=>{const i=ne(c);t(0,c=i),n()},d=()=>{for(let i=0;i<9;i++)for(let G=0;G<9;G++)t(0,c[i][G].fixed=!1,c)},v=i=>{Gt.set([...ce(i),...le(i),...re(i)])};return[c,s,l,a,b,n,_,x,d,v,()=>{t(0,c=l.pop()),n({noHistory:!0})},()=>{t(0,c=Rt()),n()},()=>{x(),n()},()=>{_(c),n()},()=>{d(),n()},()=>{oe(c),n()},()=>{se(c),n()},()=>{v(c),n()},()=>{Gt.set([]),n()},i=>{At(Ot,s=s===i?void 0:i,s)}]}class de extends Ft{constructor(o){super(),zt(this,o,ie,ae,Ht,{})}}export{de as component};
