import{s as se,e as te,i as Q,y as Z,G as ie,d as M,C as Pe,D as He,o as Ye,f as j,l as $,a as O,g as G,h as H,m as x,c as y,H as ue,j as P,k as pe,I as w,M as Qe,n as ve,K as Ce,L as F,N as Ue,p as Ie,O as me,P as I}from"./scheduler.193db7c4.js";import{S as he,i as de,b as L,d as X,m as K,a as W,t as z,e as J}from"./index.9bea933b.js";import{a as fe,b as Fe,d as Ze}from"./store.8b4149bb.js";import{p as $e}from"./stores.39ac649e.js";import{w as xe}from"./index.33e6b952.js";const et=(e,t)=>{if(e<0||e>8)throw new Error(`unexpected square position: ${e}`);const o=Math.floor(e/3),l=e%3,n=3*o,s=3*l;return[t[n][s],t[n][s+1],t[n][s+2],t[n+1][s],t[n+1][s+1],t[n+1][s+2],t[n+2][s],t[n+2][s+1],t[n+2][s+2]]};function tt(e){return e.notes!==void 0}function ot(e){return e.clear===!0}const Ot=(e,t)=>{if(e.fixed)throw new Error("Tried to update fixed cell");if(tt(t)){e.value=void 0,e.notes=[...t.notes];return}if(ot(t)){e.notes=[],e.value=void 0;return}e.notes=[],e.value=t.value},nt=e=>{const t=[];for(let o=0;o<9;o++){const l={},n={},s={},i=3*Math.floor(o/3),f=3*(o%3);for(let a=0;a<9;a++){if(e[o][a].value===void 0){const C=e[o][a].notes;for(const g of C)l[g]||(l[g]=[]),l[g].push({row:o,col:a})}if(e[a][o].value===void 0){const C=e[a][o].notes;for(const g of C)n[g]||(n[g]=[]),n[g].push({row:a,col:o})}const d=Math.floor(a/3),h=a%3,v=i+d,p=f+h;if(e[v][p].value===void 0){const C=e[v][p].notes;for(const g of C)s[g]||(s[g]=[]),s[g].push({row:v,col:p})}}for(const a of Object.keys(l)){const d=Number(a);if(l[d].length===1){const{row:h,col:v}=l[d][0];t.push({type:"hidden_single_row",cause:[{row:h,col:v,notes:[d]}],effect:[{row:h,col:v,notes:e[h][v].notes.filter(p=>p!==d)}]})}}for(const a of Object.keys(n)){const d=Number(a);if(n[d].length===1){const{row:h,col:v}=n[d][0];t.push({type:"hidden_single_col",cause:[{row:h,col:v,notes:[d]}],effect:[{row:h,col:v,notes:e[h][v].notes.filter(p=>p!==d)}]})}}for(const a of Object.keys(s)){const d=Number(a);if(s[d].length===1){const{row:h,col:v}=s[d][0];t.push({type:"hidden_single_square",cause:[{row:h,col:v,notes:[d]}],effect:[{row:h,col:v,notes:e[h][v].notes.filter(p=>p!==d)}]})}}}return t},lt=e=>{const t=[];for(let o=0;o<9;o++)for(let l=0;l<9;l++)e[o][l].value===void 0&&e[o][l].notes.length===1&&t.push({type:"lone_single",cause:[{row:o,col:l,notes:[e[o][l].notes[0]]}],effect:[]});return t},st=e=>{const t=[];for(let o=0;o<9;o++){const l={},n={},s={},i=3*Math.floor(o/3),f=3*(o%3);for(let a=0;a<9;a++){if(e[o][a].value===void 0&&e[o][a].notes.length===2){const C=e[o][a].notes.join(",");if(!l[C])l[C]={row:o,col:a};else{const g={row:o,col:a,notes:[...e[o][a].notes]},U={row:l[C].row,col:l[C].col,notes:[...e[o][a].notes]},N=[];for(let E=0;E<9;E++)e[o][E].value!==void 0||e[o][E].notes.join(",")===C||N.push({row:o,col:E,notes:[...e[o][a].notes]});t.push({type:"naked_pair",cause:[g,U],effect:N})}}if(e[a][o].value===void 0&&e[a][o].notes.length===2){const C=e[a][o].notes.join(",");if(!n[C])n[C]={row:a,col:o};else{const g={row:a,col:o,notes:[...e[a][o].notes]},U={row:n[C].row,col:n[C].col,notes:[...e[a][o].notes]},N=[];for(let E=0;E<9;E++)e[E][o].value!==void 0||e[E][o].notes.join(",")===C||N.push({row:E,col:o,notes:[...e[a][o].notes]});t.push({type:"naked_pair",cause:[g,U],effect:N})}}const d=Math.floor(a/3),h=a%3,v=i+d,p=f+h;if(e[v][p].value===void 0&&e[v][p].notes.length===2){const C=e[v][p].notes.join(",");if(!s[C])s[C]={row:v,col:p};else{const g={row:v,col:p,notes:[...e[v][p].notes]},U={row:s[C].row,col:s[C].col,notes:[...e[v][p].notes]},N=[];for(let E=0;E<9;E++){const k=Math.floor(E/3),m=E%3,r=i+k,u=f+m;e[r][u].value!==void 0||e[r][u].notes.join(",")===C||N.push({row:r,col:u,notes:[...e[v][p].notes]})}t.push({type:"naked_pair",cause:[g,U],effect:N})}}}}return t},rt=e=>[...lt(e),...nt(e),...st(e)],yt=e=>{const t=[],o=new Array(27).fill(0);for(let l=0;l<9;l++)for(let n=0;n<9;n++){if(e[l][n].value===void 0)continue;const s=e[l][n].value,i=1<<s-1,f=o[l],a=o[9+n],d=o[18+Math.floor(l/3)*3+Math.floor(n/3)];f&i&&t.push({type:"row",col:n,row:l,value:s}),a&i&&t.push({type:"column",col:n,row:l,value:s}),d&i&&t.push({type:"square",col:n,row:l,value:s}),o[l]^=i,o[9+n]^=i,o[18+Math.floor(l/3)*3+Math.floor(n/3)]^=i}return t},ce=e=>{const t=new Array(27).fill(0);for(let o=0;o<9;o++)for(let l=0;l<9;l++){if(e[o][l].value===void 0)continue;const s=1<<e[o][l].value-1,i=t[o],f=t[9+l],a=t[18+Math.floor(o/3)*3+Math.floor(l/3)];if(i&s||f&s||a&s)return!0;t[o]^=s,t[9+l]^=s,t[18+Math.floor(o/3)*3+Math.floor(l/3)]^=s}return!1},ae=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(!e[t][o].value)return!1;return!0},ke=e=>ae(e)&&!ce(e),le=e=>JSON.parse(JSON.stringify(e)),ge=(e,t,o,l)=>{if(!l||e[t][o].value)return!1;const n=e[t][o].notes.indexOf(l);return n===-1?!1:(e[t][o].notes.splice(n,1),!0)},Rt=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].notes=[]},it=(e,t)=>{const{row:o,col:l}=t;if(e[o][l].value){e[o][l].notes=[];return}e[o][l].notes=[1,2,3,4,5,6,7,8,9];const n=Math.floor(l/3),s=Math.floor(o/3);for(let i=0;i<9;i++){const f=e[i][l].value;ge(e,o,l,f);const a=e[o][i].value;ge(e,o,l,a);const d=Math.floor(i/3),h=i%3,v=e[3*s+d][3*n+h].value;ge(e,o,l,v)}return e[o][l].notes},Le=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)it(e,{row:t,col:o})},at=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].fixed||(e[t][o].value=void 0,e[t][o].notes=[])},jt=e=>{if(ae(e)||ce(e))return{grid:e,hint:null};const t=le(e);at(t);const o=ut(t);for(let h=0;h<9;h++)for(let v=0;v<9;v++)if(e[h][v].value!==void 0&&e[h][v].value!==o[h][v].value)return e[h][v].value=o[h][v].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:h,col:v,notes:[o[h][v].value]}]}};const l=le(e);Le(l);const s=rt(l).find(h=>["lone_single","hidden_single_col","hidden_single_row","hidden_single_square"].includes(h.type));if(s&&s.cause.length){const h=s.cause.pop(),{row:v,col:p}=h;return e[v][p].value=o[v][p].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:v,col:p,notes:[e[v][p].value]}]}}}const i=[];for(let h=0;h<9;h++)for(let v=0;v<9;v++)e[h][v].value===void 0&&i.push({x:v,y:h});if(!i.length)return{grid:e,hint:null};const f=Math.floor(Math.random()*i.length),a=i[f],d=o[a.y][a.x].value;return e[a.y][a.x].value=d,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:a.y,col:a.x,notes:[d]}]}}},Xe=(e,t,o)=>{const{col:l,row:n}=t;if(e[n][l].value!==void 0)return!1;const s=Math.floor(l/3),i=Math.floor(n/3);for(let f=0;f<9;f++){if(e[n][f].value===o||e[f][l].value===o)return!1;const a=Math.floor(f/3),d=f%3;if(e[3*i+a][3*s+d].value===o)return!1}return!0},ut=e=>{const t=le(e);return Ke(t),t},Ke=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(e[t][o].value===void 0){for(let l=1;l<=9;l++)if(Xe(e,{row:t,col:o},l)){if(e[t][o].value=l,Ke(e))return!0;e[t][o].value=void 0}return!1}return!0};let be=0;const We=1e4,ft=e=>{if(ae(e))return ke(e)?"unique":"none";const t=le(e);let o=0;for(let n=0;n<9;n++)for(let s=0;s<9;s++)e[n][s].value!==void 0&&o++;const l=[];return be=0,ze(t,l,o),be>=We?"unreachable":l.length===0?"none":l.length===1?"unique":"notUnique"},ze=(e,t,o)=>{if(!(be++>=We)){for(let l=0;l<9;l++)for(let n=0;n<9;n++)if(e[l][n].value===void 0){for(let s=1;s<=9;s++)if(Xe(e,{row:l,col:n},s)){if(e[l][n].value=s,ze(e,t,o+1)&&(o===80&&t.push(le(e)),t.length>=2))return!0;e[l][n].value=void 0}return!1}return!0}},Gt=(e,t)=>{if(ce(e)||ae(e))return e;const o=le(e);Le(o);const l=[o];for(;l.length;){const n=l.pop();if(t&&t.push(le(n)),ce(n))continue;if(ae(n)){if(ke(n))return n;continue}const s=dt(n);if(!s.length)continue;const i=Math.floor(Math.random()*s.length),f=s[i],a=le(n);a[f.row][f.col].notes=a[f.row][f.col].notes.filter(d=>d!==f.value),l.push(a),ht(n,f),Je(n),l.push(n)}return o},we=(e,t,o,l)=>{if(e[t][o].value)return!1;const n=e[t][o].notes.indexOf(l);return n===-1?!1:(e[t][o].notes.splice(n,1),e[t][o].notes.length===1?(e[t][o].value=e[t][o].notes.pop(),!0):!1)},Je=e=>{if(ae(e)||ce(e))return;let t=!1;for(let o=0;o<9;o++)for(let l=0;l<9;l++){const{value:n}=e[o][l];if(!n)continue;for(let f=0;f<9;f++)t=t||we(e,f,l,n),t=t||we(e,o,f,n);const s=Math.floor(l/3),i=Math.floor(o/3);for(let f=0;f<3;f++)for(let a=0;a<3;a++)t=t||we(e,3*i+f,3*s+a,n)}t&&Je(e)},ct=(e,t)=>{const{row:o,col:l,value:n}=t;return!(e[o][l].value||!e[o][l].notes.includes(n))},ht=(e,t)=>{if(!ct(e,t))return;const{row:o,col:l,value:n}=t;e[o][l].value=n,e[o][l].notes=[]},dt=e=>{let t=[],o=9;for(let l=0;l<9;l++)for(let n=0;n<9;n++){if(e[l][n].value!==void 0)continue;const{notes:s}=e[l][n];if(s.length<o&&(o=s.length,t=[]),s.length===o)for(const i of e[l][n].notes)t.push({row:l,col:n,value:i})}return t},Bt=()=>{const e=[];for(let t=0;t<9;t++){e.push([]);for(let o=0;o<9;o++){const l={value:void 0,fixed:!1,notes:[1,2,3,4,5,6,7,8,9]};e[e.length-1].push(l)}}return e};function Me(e,t,o){const l=e.slice();return l[23]=t[o],l}function Se(e,t,o){const l=e.slice();return l[23]=t[o],l}function Te(e){let t=e[2],o,l=Re(e);return{c(){l.c(),o=te()},l(n){l.l(n),o=te()},m(n,s){l.m(n,s),Q(n,o,s)},p(n,s){s&4&&se(t,t=n[2])?(l.d(1),l=Re(n),l.c(),l.m(o.parentNode,o)):l.p(n,s)},d(n){n&&M(o),l.d(n)}}}function De(e){let t,o,l,n;function s(){return e[17](e[23])}return{c(){t=j("button"),o=$(e[23]),this.h()},l(i){t=G(i,"BUTTON",{class:!0});var f=H(t);o=x(f,e[23]),f.forEach(M),this.h()},h(){P(t,"class","choice-btn svelte-1v5q25"),F(t,"selected",e[5]===e[23])},m(i,f){Q(i,t,f),w(t,o),l||(n=Z(t,"click",s),l=!0)},p(i,f){e=i,f&32&&F(t,"selected",e[5]===e[23])},d(i){i&&M(t),l=!1,n()}}}function Oe(e){let t,o,l,n;function s(){return e[18](e[23])}return{c(){t=j("button"),o=$(e[23]),this.h()},l(i){t=G(i,"BUTTON",{class:!0});var f=H(t);o=x(f,e[23]),f.forEach(M),this.h()},h(){P(t,"class","choice-btn svelte-1v5q25"),F(t,"selected",e[4][e[23]-1])},m(i,f){Q(i,t,f),w(t,o),l||(n=Z(t,"click",s),l=!0)},p(i,f){e=i,f&16&&F(t,"selected",e[4][e[23]-1])},d(i){i&&M(t),l=!1,n()}}}function ye(e){let t=e[4],o,l=Oe(e);return{c(){l.c(),o=te()},l(n){l.l(n),o=te()},m(n,s){l.m(n,s),Q(n,o,s)},p(n,s){s&16&&se(t,t=n[4])?(l.d(1),l=Oe(n),l.c(),l.m(o.parentNode,o)):l.p(n,s)},d(n){n&&M(o),l.d(n)}}}function Re(e){let t,o,l,n=e[6]?"Valeur":"Value",s,i,f,a="âœ–",d,h,v,p,C="Notes",g,U,N,E,k,m=e[6]?"Notes auto":"Auto notes",r,u,T,B=e[6]?"Tout supprimer":"Clear",A,c,S,R=fe([1,2,3,4,5,6,7,8,9]),V=[];for(let _=0;_<9;_+=1)V[_]=De(Se(e,R,_));let q=fe([1,2,3,4,5,6,7,8,9]),D=[];for(let _=0;_<9;_+=1)D[_]=ye(Me(e,q,_));return{c(){t=j("div"),o=j("div"),l=j("h3"),s=$(n),i=O(),f=j("button"),f.textContent=a,d=O(),h=j("div");for(let _=0;_<9;_+=1)V[_].c();v=O(),p=j("h3"),p.textContent=C,g=O(),U=j("div");for(let _=0;_<9;_+=1)D[_].c();N=O(),E=j("div"),k=j("button"),r=$(m),u=O(),T=j("button"),A=$(B),this.h()},l(_){t=G(_,"DIV",{role:!0,class:!0,style:!0});var Y=H(t);o=G(Y,"DIV",{class:!0});var b=H(o);l=G(b,"H3",{class:!0});var ee=H(l);s=x(ee,n),i=y(ee),f=G(ee,"BUTTON",{"data-svelte-h":!0}),ue(f)!=="svelte-15i1wwz"&&(f.textContent=a),ee.forEach(M),d=y(b),h=G(b,"DIV",{class:!0});var Ne=H(h);for(let re=0;re<9;re+=1)V[re].l(Ne);Ne.forEach(M),v=y(b),p=G(b,"H3",{class:!0,"data-svelte-h":!0}),ue(p)!=="svelte-2havtt"&&(p.textContent=C),g=y(b),U=G(b,"DIV",{class:!0});var Ee=H(U);for(let re=0;re<9;re+=1)D[re].l(Ee);Ee.forEach(M),N=y(b),E=G(b,"DIV",{class:!0});var _e=H(E);k=G(_e,"BUTTON",{});var Ve=H(k);r=x(Ve,m),Ve.forEach(M),u=y(_e),T=G(_e,"BUTTON",{});var qe=H(T);A=x(qe,B),qe.forEach(M),_e.forEach(M),b.forEach(M),Y.forEach(M),this.h()},h(){P(l,"class","title-bar svelte-1v5q25"),P(h,"class","grid svelte-1v5q25"),P(p,"class","svelte-1v5q25"),P(U,"class","grid svelte-1v5q25"),P(E,"class","cell-buttons svelte-1v5q25"),P(o,"class","contents svelte-1v5q25"),P(t,"role","dialog"),P(t,"class","modal svelte-1v5q25"),pe(t,"top",e[2]+"px"),pe(t,"left",e[3]+"px")},m(_,Y){Q(_,t,Y),w(t,o),w(o,l),w(l,s),w(l,i),w(l,f),w(o,d),w(o,h);for(let b=0;b<9;b+=1)V[b]&&V[b].m(h,null);w(o,v),w(o,p),w(o,g),w(o,U);for(let b=0;b<9;b+=1)D[b]&&D[b].m(U,null);w(o,N),w(o,E),w(E,k),w(k,r),w(E,u),w(E,T),w(T,A),c||(S=[Z(f,"click",Fe),Z(k,"click",function(){Qe(e[1])&&e[1].apply(this,arguments)}),Z(T,"click",e[9]),Z(t,"mousedown",e[11])],c=!0)},p(_,Y){if(e=_,Y&64&&n!==(n=e[6]?"Valeur":"Value")&&ve(s,n),Y&160){R=fe([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const ee=Se(e,R,b);V[b]?V[b].p(ee,Y):(V[b]=De(ee),V[b].c(),V[b].m(h,null))}for(;b<9;b+=1)V[b].d(1)}if(Y&144){q=fe([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const ee=Me(e,q,b);D[b]?D[b].p(ee,Y):(D[b]=ye(ee),D[b].c(),D[b].m(U,null))}for(;b<9;b+=1)D[b].d(1)}Y&64&&m!==(m=e[6]?"Notes auto":"Auto notes")&&ve(r,m),Y&64&&B!==(B=e[6]?"Tout supprimer":"Clear")&&ve(A,B),Y&4&&pe(t,"top",e[2]+"px"),Y&8&&pe(t,"left",e[3]+"px")},d(_){_&&M(t),Ce(V,_),Ce(D,_),c=!1,Pe(S)}}}function _t(e){let t,o,l,n=e[0]&&Te(e);return{c(){n&&n.c(),t=te()},l(s){n&&n.l(s),t=te()},m(s,i){n&&n.m(s,i),Q(s,t,i),o||(l=[Z(window,"keydown",e[8]),Z(window,"keyup",e[10]),Z(window,"mouseup",e[13]),Z(window,"mousemove",e[12])],o=!0)},p(s,[i]){s[0]?n?n.p(s,i):(n=Te(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ie,o:ie,d(s){s&&M(t),n&&n.d(s),o=!1,Pe(l)}}}function pt(e,t,o){let l;He(e,$e,c=>o(21,l=c));let{isOpen:n}=t,{onSelectionUpdated:s}=t,{onComputeCellNotes:i}=t,{initialState:f}=t,{cellBoundingRect:a}=t;const d=c=>{const S=document.body.getBoundingClientRect(),R=300,V=600;let q=c.top;q+V>S.height&&(q=S.height-V);let D=c.right;return D>S.width/2&&(D=c.left-R-c.width),{top:q,left:Math.max(0,D)}};let{top:h,left:v}=d(a);f.notes.length>0;let p=new Array(9).fill(!1).map((c,S)=>f.notes.includes(S+1)),C=f.value;const g=(c,S)=>{if(S==="notes"){o(4,p[c-1]=!p[c-1],p),o(4,p),o(5,C=void 0),s({notes:p.map((R,V)=>V+1).filter(R=>p[R-1])});return}if(C===c){s({clear:!0}),o(5,C=void 0),o(4,p=[]);return}o(5,C=c),o(4,p=[]),s({value:C}),Fe()},U=c=>{const S="!@#$%^&*(",R=c.getModifierState("Shift");let V;if(V=c.key,V==="Backspace"){N();return}S.includes(V)&&(V=S.indexOf(V)+1),!isNaN(Number(V))&&g(Number(V),R?"notes":"value")},N=()=>{s({clear:!0}),o(4,p=new Array(9).fill(!1).map((c,S)=>!1)),o(5,C=void 0)},E=c=>{};let k=!1;function m(){k=!0}function r(c){k&&(o(3,v+=c.movementX),o(2,h+=c.movementY))}function u(){k=!1}let T=!1;Ye(()=>{o(6,T=l.url.searchParams.has("fr"))});const B=c=>g(c,"value"),A=c=>g(c,"notes");return e.$$set=c=>{"isOpen"in c&&o(0,n=c.isOpen),"onSelectionUpdated"in c&&o(14,s=c.onSelectionUpdated),"onComputeCellNotes"in c&&o(1,i=c.onComputeCellNotes),"initialState"in c&&o(15,f=c.initialState),"cellBoundingRect"in c&&o(16,a=c.cellBoundingRect)},[n,i,h,v,p,C,T,g,U,N,E,m,r,u,s,f,a,B,A]}class vt extends he{constructor(t){super(),de(this,t,pt,_t,se,{isOpen:0,onSelectionUpdated:14,onComputeCellNotes:1,initialState:15,cellBoundingRect:16})}}const mt=xe();function je(e,t,o){const l=e.slice();return l[16]=t[o],l}function gt(e){let t,o,l,n,s=fe([1,2,3,4,5,6,7,8,9]),i=[];for(let f=0;f<9;f+=1)i[f]=Be(je(e,s,f));return{c(){t=j("button");for(let f=0;f<9;f+=1)i[f].c();this.h()},l(f){t=G(f,"BUTTON",{class:!0});var a=H(t);for(let d=0;d<9;d+=1)i[d].l(a);a.forEach(M),this.h()},h(){P(t,"class",o=me("cell notes "+e[2]+" "+e[7])+" svelte-12ewoli")},m(f,a){Q(f,t,a);for(let d=0;d<9;d+=1)i[d]&&i[d].m(t,null);e[12](t),l||(n=Z(t,"click",e[4]),l=!0)},p(f,a){if(a&105){s=fe([1,2,3,4,5,6,7,8,9]);let d;for(d=0;d<9;d+=1){const h=je(f,s,d);i[d]?i[d].p(h,a):(i[d]=Be(h),i[d].c(),i[d].m(t,null))}for(;d<9;d+=1)i[d].d(1)}a&4&&o!==(o=me("cell notes "+f[2]+" "+f[7])+" svelte-12ewoli")&&P(t,"class",o)},d(f){f&&M(t),Ce(i,f),e[12](null),l=!1,n()}}}function wt(e){let t,o=e[0].value+"",l,n,s,i,f;return{c(){t=j("button"),l=$(o),this.h()},l(a){t=G(a,"BUTTON",{class:!0});var d=H(t);l=x(d,o),d.forEach(M),this.h()},h(){P(t,"class",n=me("cell value "+(e[2]==="auto-hint"?e[2]:"")+" "+e[7])+" svelte-12ewoli"),t.disabled=s=e[0].fixed,F(t,"fixed",e[0].fixed),F(t,"highlight",e[3]!==void 0&&e[3]===e[0].value)},m(a,d){Q(a,t,d),w(t,l),e[11](t),i||(f=Z(t,"click",e[4]),i=!0)},p(a,d){d&1&&o!==(o=a[0].value+"")&&ve(l,o),d&4&&n!==(n=me("cell value "+(a[2]==="auto-hint"?a[2]:"")+" "+a[7])+" svelte-12ewoli")&&P(t,"class",n),d&1&&s!==(s=a[0].fixed)&&(t.disabled=s),d&5&&F(t,"fixed",a[0].fixed),d&13&&F(t,"highlight",a[3]!==void 0&&a[3]===a[0].value)},d(a){a&&M(t),e[11](null),i=!1,f()}}}function Ge(e){let t;return{c(){t=$(e[16])},l(o){t=x(o,e[16])},m(o,l){Q(o,t,l)},d(o){o&&M(t)}}}function Be(e){let t,o=e[0].notes.includes(e[16]),l,n=o&&Ge(e);return{c(){t=j("div"),n&&n.c(),l=O(),this.h()},l(s){t=G(s,"DIV",{class:!0});var i=H(t);n&&n.l(i),l=y(i),i.forEach(M),this.h()},h(){P(t,"class","note svelte-12ewoli"),F(t,"hinted-note",e[5].includes(e[16])),F(t,"hinted-remove-note",e[6].includes(e[16])),F(t,"highlight",e[3]!==void 0&&e[3]===e[16])},m(s,i){Q(s,t,i),n&&n.m(t,null),w(t,l)},p(s,i){i&1&&(o=s[0].notes.includes(s[16])),o?n||(n=Ge(s),n.c(),n.m(t,l)):n&&(n.d(1),n=null),i&8&&F(t,"highlight",s[3]!==void 0&&s[3]===s[16])},d(s){s&&M(t),n&&n.d()}}}function Ct(e){let t;function o(s,i){return s[0].value?wt:gt}let l=o(e),n=l(e);return{c(){n.c(),t=te()},l(s){n.l(s),t=te()},m(s,i){n.m(s,i),Q(s,t,i)},p(s,[i]){l===(l=o(s))&&n?n.p(s,i):(n.d(1),n=l(s),n&&(n.c(),n.m(t.parentNode,t)))},i:ie,o:ie,d(s){s&&M(t),n.d(s)}}}function bt(e,t,o){let l;He(e,mt,m=>o(3,l=m));let{cell:n}=t,{position:s}=t,{gridErrors:i}=t,{hints:f=[]}=t;const a=Ue(),d=Ue();let h;const v=()=>{Ze(vt,{initialState:n,onSelectionUpdated:u=>{a("cellUpdate",{cell:n,update:u})},onComputeCellNotes:()=>{d("computeCellNotes",{position:s})},cellBoundingRect:h.getBoundingClientRect()})};let p="";const C=[],g=[];for(const m of f){for(const r of m.cause)r.row===s.row&&r.col===s.col&&(m.type==="naked_pair"?p="naked-pair-hint":m.type==="last_auto_hint"?p="auto-hint":p="lone-hint",C.push(...r.notes));for(const r of m.effect)r.row===s.row&&r.col===s.col&&g.push(...r.notes)}const U=[];for(const m of i){const r=3*Math.floor(s.row/3)+Math.floor(s.col/3),u=3*Math.floor(m.row/3)+Math.floor(m.col/3);if(m.col===s.col&&m.row===s.row||m.type==="column"&&m.col===s.col&&m.value===n.value||m.type==="row"&&m.row===s.row&&m.value===n.value||m.type==="square"&&r===u&&m.value===n.value){U.push("is-error-cell");continue}m.type==="column"&&m.col===s.col&&U.push("is-error-col"),m.type==="row"&&m.row===s.row&&U.push("is-error-row"),m.type==="square"&&r===u&&U.push("is-error-square")}let N=U.join(" ");function E(m){Ie[m?"unshift":"push"](()=>{h=m,o(1,h)})}function k(m){Ie[m?"unshift":"push"](()=>{h=m,o(1,h)})}return e.$$set=m=>{"cell"in m&&o(0,n=m.cell),"position"in m&&o(8,s=m.position),"gridErrors"in m&&o(9,i=m.gridErrors),"hints"in m&&o(10,f=m.hints)},[n,h,p,l,v,C,g,N,s,i,f,E,k]}class oe extends he{constructor(t){super(),de(this,t,bt,Ct,se,{cell:0,position:8,gridErrors:9,hints:10})}}function kt(e){let t,o,l,n,s,i,f,a,d,h,v,p,C,g,U,N,E,k,m;return o=new oe({props:{cell:e[7][0],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]}}}),o.$on("cellUpdate",e[10]),o.$on("computeCellNotes",e[11]),n=new oe({props:{cell:e[7][1],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]+1}}}),n.$on("cellUpdate",e[12]),n.$on("computeCellNotes",e[13]),i=new oe({props:{cell:e[7][2],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]+2}}}),i.$on("cellUpdate",e[14]),i.$on("computeCellNotes",e[15]),a=new oe({props:{cell:e[7][3],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]}}}),a.$on("cellUpdate",e[16]),a.$on("computeCellNotes",e[17]),h=new oe({props:{cell:e[7][4],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]+1}}}),h.$on("cellUpdate",e[18]),h.$on("computeCellNotes",e[19]),p=new oe({props:{cell:e[7][5],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]+2}}}),p.$on("cellUpdate",e[20]),p.$on("computeCellNotes",e[21]),g=new oe({props:{cell:e[7][6],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]}}}),g.$on("cellUpdate",e[22]),g.$on("computeCellNotes",e[23]),N=new oe({props:{cell:e[7][7],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]+1}}}),N.$on("cellUpdate",e[24]),N.$on("computeCellNotes",e[25]),k=new oe({props:{cell:e[7][8],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]+2}}}),k.$on("cellUpdate",e[26]),k.$on("computeCellNotes",e[27]),{c(){t=j("div"),L(o.$$.fragment),l=O(),L(n.$$.fragment),s=O(),L(i.$$.fragment),f=O(),L(a.$$.fragment),d=O(),L(h.$$.fragment),v=O(),L(p.$$.fragment),C=O(),L(g.$$.fragment),U=O(),L(N.$$.fragment),E=O(),L(k.$$.fragment),this.h()},l(r){t=G(r,"DIV",{class:!0});var u=H(t);X(o.$$.fragment,u),l=y(u),X(n.$$.fragment,u),s=y(u),X(i.$$.fragment,u),f=y(u),X(a.$$.fragment,u),d=y(u),X(h.$$.fragment,u),v=y(u),X(p.$$.fragment,u),C=y(u),X(g.$$.fragment,u),U=y(u),X(N.$$.fragment,u),E=y(u),X(k.$$.fragment,u),u.forEach(M),this.h()},h(){P(t,"class","cell-grid svelte-xcvtsp"),F(t,"showValid",e[2]),F(t,"borderLeftRight",e[3]),F(t,"borderTopBottom",e[4])},m(r,u){Q(r,t,u),K(o,t,null),w(t,l),K(n,t,null),w(t,s),K(i,t,null),w(t,f),K(a,t,null),w(t,d),K(h,t,null),w(t,v),K(p,t,null),w(t,C),K(g,t,null),w(t,U),K(N,t,null),w(t,E),K(k,t,null),m=!0},p(r,[u]){const T={};u&2&&(T.hints=r[1]),u&1&&(T.gridErrors=r[0]),o.$set(T);const B={};u&2&&(B.hints=r[1]),u&1&&(B.gridErrors=r[0]),n.$set(B);const A={};u&2&&(A.hints=r[1]),u&1&&(A.gridErrors=r[0]),i.$set(A);const c={};u&2&&(c.hints=r[1]),u&1&&(c.gridErrors=r[0]),a.$set(c);const S={};u&2&&(S.hints=r[1]),u&1&&(S.gridErrors=r[0]),h.$set(S);const R={};u&2&&(R.hints=r[1]),u&1&&(R.gridErrors=r[0]),p.$set(R);const V={};u&2&&(V.hints=r[1]),u&1&&(V.gridErrors=r[0]),g.$set(V);const q={};u&2&&(q.hints=r[1]),u&1&&(q.gridErrors=r[0]),N.$set(q);const D={};u&2&&(D.hints=r[1]),u&1&&(D.gridErrors=r[0]),k.$set(D),(!m||u&4)&&F(t,"showValid",r[2])},i(r){m||(W(o.$$.fragment,r),W(n.$$.fragment,r),W(i.$$.fragment,r),W(a.$$.fragment,r),W(h.$$.fragment,r),W(p.$$.fragment,r),W(g.$$.fragment,r),W(N.$$.fragment,r),W(k.$$.fragment,r),m=!0)},o(r){z(o.$$.fragment,r),z(n.$$.fragment,r),z(i.$$.fragment,r),z(a.$$.fragment,r),z(h.$$.fragment,r),z(p.$$.fragment,r),z(g.$$.fragment,r),z(N.$$.fragment,r),z(k.$$.fragment,r),m=!1},d(r){r&&M(t),J(o),J(n),J(i),J(a),J(h),J(p),J(g),J(N),J(k)}}}function Nt(e,t,o){let{position:l}=t,{grid:n}=t,{gridErrors:s}=t,{hints:i=[]}=t,{gridIsValid:f=!1}=t;const a=[1,4,7].includes(l),d=[3,4,5].includes(l),h=3*Math.floor(l/3),v=3*(l%3),p=et(l,n);function C(_){I.call(this,e,_)}function g(_){I.call(this,e,_)}function U(_){I.call(this,e,_)}function N(_){I.call(this,e,_)}function E(_){I.call(this,e,_)}function k(_){I.call(this,e,_)}function m(_){I.call(this,e,_)}function r(_){I.call(this,e,_)}function u(_){I.call(this,e,_)}function T(_){I.call(this,e,_)}function B(_){I.call(this,e,_)}function A(_){I.call(this,e,_)}function c(_){I.call(this,e,_)}function S(_){I.call(this,e,_)}function R(_){I.call(this,e,_)}function V(_){I.call(this,e,_)}function q(_){I.call(this,e,_)}function D(_){I.call(this,e,_)}return e.$$set=_=>{"position"in _&&o(8,l=_.position),"grid"in _&&o(9,n=_.grid),"gridErrors"in _&&o(0,s=_.gridErrors),"hints"in _&&o(1,i=_.hints),"gridIsValid"in _&&o(2,f=_.gridIsValid)},[s,i,f,a,d,h,v,p,l,n,C,g,U,N,E,k,m,r,u,T,B,A,c,S,R,V,q,D]}class ne extends he{constructor(t){super(),de(this,t,Nt,kt,se,{position:8,grid:9,gridErrors:0,hints:1,gridIsValid:2})}}function Et(e){let t,o,l,n,s,i,f,a,d,h,v,p,C,g,U,N,E,k,m;return o=new ne({props:{position:0,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),o.$on("cellUpdate",e[4]),o.$on("computeCellNotes",e[5]),n=new ne({props:{position:1,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),n.$on("cellUpdate",e[6]),n.$on("computeCellNotes",e[7]),i=new ne({props:{position:2,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),i.$on("cellUpdate",e[8]),i.$on("computeCellNotes",e[9]),a=new ne({props:{position:3,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),a.$on("cellUpdate",e[10]),a.$on("computeCellNotes",e[11]),h=new ne({props:{position:4,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),h.$on("cellUpdate",e[12]),h.$on("computeCellNotes",e[13]),p=new ne({props:{position:5,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),p.$on("cellUpdate",e[14]),p.$on("computeCellNotes",e[15]),g=new ne({props:{position:6,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),g.$on("cellUpdate",e[16]),g.$on("computeCellNotes",e[17]),N=new ne({props:{position:7,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),N.$on("cellUpdate",e[18]),N.$on("computeCellNotes",e[19]),k=new ne({props:{position:8,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),k.$on("cellUpdate",e[20]),k.$on("computeCellNotes",e[21]),{c(){t=j("div"),L(o.$$.fragment),l=O(),L(n.$$.fragment),s=O(),L(i.$$.fragment),f=O(),L(a.$$.fragment),d=O(),L(h.$$.fragment),v=O(),L(p.$$.fragment),C=O(),L(g.$$.fragment),U=O(),L(N.$$.fragment),E=O(),L(k.$$.fragment),this.h()},l(r){t=G(r,"DIV",{class:!0});var u=H(t);X(o.$$.fragment,u),l=y(u),X(n.$$.fragment,u),s=y(u),X(i.$$.fragment,u),f=y(u),X(a.$$.fragment,u),d=y(u),X(h.$$.fragment,u),v=y(u),X(p.$$.fragment,u),C=y(u),X(g.$$.fragment,u),U=y(u),X(N.$$.fragment,u),E=y(u),X(k.$$.fragment,u),u.forEach(M),this.h()},h(){P(t,"class","main-grid svelte-vli9ua")},m(r,u){Q(r,t,u),K(o,t,null),w(t,l),K(n,t,null),w(t,s),K(i,t,null),w(t,f),K(a,t,null),w(t,d),K(h,t,null),w(t,v),K(p,t,null),w(t,C),K(g,t,null),w(t,U),K(N,t,null),w(t,E),K(k,t,null),m=!0},p(r,[u]){const T={};u&8&&(T.gridIsValid=r[3]),u&4&&(T.hints=r[2]),u&2&&(T.gridErrors=r[1]),u&1&&(T.grid=r[0]),o.$set(T);const B={};u&8&&(B.gridIsValid=r[3]),u&4&&(B.hints=r[2]),u&2&&(B.gridErrors=r[1]),u&1&&(B.grid=r[0]),n.$set(B);const A={};u&8&&(A.gridIsValid=r[3]),u&4&&(A.hints=r[2]),u&2&&(A.gridErrors=r[1]),u&1&&(A.grid=r[0]),i.$set(A);const c={};u&8&&(c.gridIsValid=r[3]),u&4&&(c.hints=r[2]),u&2&&(c.gridErrors=r[1]),u&1&&(c.grid=r[0]),a.$set(c);const S={};u&8&&(S.gridIsValid=r[3]),u&4&&(S.hints=r[2]),u&2&&(S.gridErrors=r[1]),u&1&&(S.grid=r[0]),h.$set(S);const R={};u&8&&(R.gridIsValid=r[3]),u&4&&(R.hints=r[2]),u&2&&(R.gridErrors=r[1]),u&1&&(R.grid=r[0]),p.$set(R);const V={};u&8&&(V.gridIsValid=r[3]),u&4&&(V.hints=r[2]),u&2&&(V.gridErrors=r[1]),u&1&&(V.grid=r[0]),g.$set(V);const q={};u&8&&(q.gridIsValid=r[3]),u&4&&(q.hints=r[2]),u&2&&(q.gridErrors=r[1]),u&1&&(q.grid=r[0]),N.$set(q);const D={};u&8&&(D.gridIsValid=r[3]),u&4&&(D.hints=r[2]),u&2&&(D.gridErrors=r[1]),u&1&&(D.grid=r[0]),k.$set(D)},i(r){m||(W(o.$$.fragment,r),W(n.$$.fragment,r),W(i.$$.fragment,r),W(a.$$.fragment,r),W(h.$$.fragment,r),W(p.$$.fragment,r),W(g.$$.fragment,r),W(N.$$.fragment,r),W(k.$$.fragment,r),m=!0)},o(r){z(o.$$.fragment,r),z(n.$$.fragment,r),z(i.$$.fragment,r),z(a.$$.fragment,r),z(h.$$.fragment,r),z(p.$$.fragment,r),z(g.$$.fragment,r),z(N.$$.fragment,r),z(k.$$.fragment,r),m=!1},d(r){r&&M(t),J(o),J(n),J(i),J(a),J(h),J(p),J(g),J(N),J(k)}}}function Vt(e,t,o){let{grid:l}=t,{gridErrors:n}=t,{hints:s=[]}=t,{gridIsValid:i=!1}=t;function f(c){I.call(this,e,c)}function a(c){I.call(this,e,c)}function d(c){I.call(this,e,c)}function h(c){I.call(this,e,c)}function v(c){I.call(this,e,c)}function p(c){I.call(this,e,c)}function C(c){I.call(this,e,c)}function g(c){I.call(this,e,c)}function U(c){I.call(this,e,c)}function N(c){I.call(this,e,c)}function E(c){I.call(this,e,c)}function k(c){I.call(this,e,c)}function m(c){I.call(this,e,c)}function r(c){I.call(this,e,c)}function u(c){I.call(this,e,c)}function T(c){I.call(this,e,c)}function B(c){I.call(this,e,c)}function A(c){I.call(this,e,c)}return e.$$set=c=>{"grid"in c&&o(0,l=c.grid),"gridErrors"in c&&o(1,n=c.gridErrors),"hints"in c&&o(2,s=c.hints),"gridIsValid"in c&&o(3,i=c.gridIsValid)},[l,n,s,i,f,a,d,h,v,p,C,g,U,N,E,k,m,r,u,T,B,A]}class At extends he{constructor(t){super(),de(this,t,Vt,Et,se,{grid:0,gridErrors:1,hints:2,gridIsValid:3})}}function Ae(e){let t,o,l="grid has errors",n,s,i="grid is filled",f,a,d="grid is valid",h,v,p="grid has solutions",C,g,U=e[1]?"Has errors":"No errors",N,E,k,m=e[2]?"Is filled":"Not filled",r,u,T,B=e[3]?"Is valid":"Not valid",A,c,S,R;return{c(){t=j("div"),o=j("div"),o.textContent=l,n=O(),s=j("div"),s.textContent=i,f=O(),a=j("div"),a.textContent=d,h=O(),v=j("div"),v.textContent=p,C=O(),g=j("div"),N=$(U),E=O(),k=j("div"),r=$(m),u=O(),T=j("div"),A=$(B),c=O(),S=j("div"),R=$(e[4]),this.h()},l(V){t=G(V,"DIV",{class:!0});var q=H(t);o=G(q,"DIV",{"data-svelte-h":!0}),ue(o)!=="svelte-1hlqbal"&&(o.textContent=l),n=y(q),s=G(q,"DIV",{"data-svelte-h":!0}),ue(s)!=="svelte-ekf37s"&&(s.textContent=i),f=y(q),a=G(q,"DIV",{"data-svelte-h":!0}),ue(a)!=="svelte-16e0vl8"&&(a.textContent=d),h=y(q),v=G(q,"DIV",{"data-svelte-h":!0}),ue(v)!=="svelte-1tjrozg"&&(v.textContent=p),C=y(q),g=G(q,"DIV",{class:!0});var D=H(g);N=x(D,U),D.forEach(M),E=y(q),k=G(q,"DIV",{class:!0});var _=H(k);r=x(_,m),_.forEach(M),u=y(q),T=G(q,"DIV",{class:!0});var Y=H(T);A=x(Y,B),Y.forEach(M),c=y(q),S=G(q,"DIV",{class:!0});var b=H(S);R=x(b,e[4]),b.forEach(M),q.forEach(M),this.h()},h(){P(g,"class","status svelte-1csoeu4"),F(g,"red",e[1]),P(k,"class","status svelte-1csoeu4"),F(k,"red",!e[2]),P(T,"class","status svelte-1csoeu4"),F(T,"red",!e[3]),P(S,"class","status svelte-1csoeu4"),F(S,"red",e[4]!=="unique"),P(t,"class","grid-status svelte-1csoeu4")},m(V,q){Q(V,t,q),w(t,o),w(t,n),w(t,s),w(t,f),w(t,a),w(t,h),w(t,v),w(t,C),w(t,g),w(g,N),w(t,E),w(t,k),w(k,r),w(t,u),w(t,T),w(T,A),w(t,c),w(t,S),w(S,R)},p:ie,d(V){V&&M(t)}}}function qt(e){let t=e[0],o,l=Ae(e);return{c(){l.c(),o=te()},l(n){l.l(n),o=te()},m(n,s){l.m(n,s),Q(n,o,s)},p(n,[s]){s&1&&se(t,t=n[0])?(l.d(1),l=Ae(n),l.c(),l.m(o.parentNode,o)):l.p(n,s)},i:ie,o:ie,d(n){n&&M(o),l.d(n)}}}function Ut(e,t,o){let{grid:l}=t,n=ce(l),s=ae(l),i=ke(l),f=ft(l);return e.$$set=a=>{"grid"in a&&o(0,l=a.grid)},[l,n,s,i,f]}class Pt extends he{constructor(t){super(),de(this,t,Ut,qt,se,{grid:0})}}export{Pt as G,At as S,ke as a,at as b,Rt as c,le as d,mt as e,Le as f,yt as g,rt as h,Bt as i,Gt as j,ft as k,jt as p,it as r,ut as s,Ot as u};
