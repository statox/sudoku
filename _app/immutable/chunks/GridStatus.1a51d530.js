import{s as ne,e as te,i as Q,y as Z,G as re,d as M,C as Be,D as Ae,o as Ke,f as j,l as $,a as O,g as R,h as P,m as x,c as y,H as ie,j as H,k as de,I as w,M as ze,n as _e,J as ge,L as F,N as Ve,p as qe,O as pe,P as I}from"./scheduler.b0d89b52.js";import{S as fe,i as ce,b as L,d as X,m as J,a as K,t as z,e as W}from"./index.a111de18.js";import{e as ae}from"./each.dfd0d326.js";import{a as He,o as We}from"./store.e4af0485.js";import{p as Ye}from"./stores.ca2b5670.js";import{w as Qe}from"./paths.2e639312.js";const Ze=(e,t)=>{if(e<0||e>8)throw new Error(`unexpected square position: ${e}`);const o=Math.floor(e/3),n=e%3,l=3*o,s=3*n;return[t[l][s],t[l][s+1],t[l][s+2],t[l+1][s],t[l+1][s+1],t[l+1][s+2],t[l+2][s],t[l+2][s+1],t[l+2][s+2]]};function $e(e){return e.notes!==void 0}function xe(e){return e.clear===!0}const Mt=(e,t)=>{if(e.fixed)throw new Error("Tried to update fixed cell");if($e(t)){e.value=void 0,e.notes=[...t.notes];return}if(xe(t)){e.notes=[],e.value=void 0;return}e.notes=[],e.value=t.value},et=e=>{const t=[];for(let o=0;o<9;o++){const n={},l={},s={},i=3*Math.floor(o/3),c=3*(o%3);for(let a=0;a<9;a++){if(e[o][a].value===void 0){const C=e[o][a].notes;for(const g of C)n[g]||(n[g]=[]),n[g].push({row:o,col:a})}if(e[a][o].value===void 0){const C=e[a][o].notes;for(const g of C)l[g]||(l[g]=[]),l[g].push({row:a,col:o})}const d=Math.floor(a/3),h=a%3,m=i+d,p=c+h;if(e[m][p].value===void 0){const C=e[m][p].notes;for(const g of C)s[g]||(s[g]=[]),s[g].push({row:m,col:p})}}for(const a of Object.keys(n)){const d=Number(a);if(n[d].length===1){const{row:h,col:m}=n[d][0];t.push({type:"hidden_single_row",cause:[{row:h,col:m,notes:[d]}],effect:[{row:h,col:m,notes:e[h][m].notes.filter(p=>p!==d)}]})}}for(const a of Object.keys(l)){const d=Number(a);if(l[d].length===1){const{row:h,col:m}=l[d][0];t.push({type:"hidden_single_col",cause:[{row:h,col:m,notes:[d]}],effect:[{row:h,col:m,notes:e[h][m].notes.filter(p=>p!==d)}]})}}for(const a of Object.keys(s)){const d=Number(a);if(s[d].length===1){const{row:h,col:m}=s[d][0];t.push({type:"hidden_single_square",cause:[{row:h,col:m,notes:[d]}],effect:[{row:h,col:m,notes:e[h][m].notes.filter(p=>p!==d)}]})}}}return t},tt=e=>{const t=[];for(let o=0;o<9;o++)for(let n=0;n<9;n++)e[o][n].value===void 0&&e[o][n].notes.length===1&&t.push({type:"lone_single",cause:[{row:o,col:n,notes:[e[o][n].notes[0]]}],effect:[]});return t},ot=e=>{const t=[];for(let o=0;o<9;o++){const n={},l={},s={},i=3*Math.floor(o/3),c=3*(o%3);for(let a=0;a<9;a++){if(e[o][a].value===void 0&&e[o][a].notes.length===2){const C=e[o][a].notes.join(",");if(!n[C])n[C]={row:o,col:a};else{const g={row:o,col:a,notes:[...e[o][a].notes]},U={row:n[C].row,col:n[C].col,notes:[...e[o][a].notes]},N=[];for(let E=0;E<9;E++)e[o][E].value!==void 0||e[o][E].notes.join(",")===C||N.push({row:o,col:E,notes:[...e[o][a].notes]});t.push({type:"naked_pair",cause:[g,U],effect:N})}}if(e[a][o].value===void 0&&e[a][o].notes.length===2){const C=e[a][o].notes.join(",");if(!l[C])l[C]={row:a,col:o};else{const g={row:a,col:o,notes:[...e[a][o].notes]},U={row:l[C].row,col:l[C].col,notes:[...e[a][o].notes]},N=[];for(let E=0;E<9;E++)e[E][o].value!==void 0||e[E][o].notes.join(",")===C||N.push({row:E,col:o,notes:[...e[a][o].notes]});t.push({type:"naked_pair",cause:[g,U],effect:N})}}const d=Math.floor(a/3),h=a%3,m=i+d,p=c+h;if(e[m][p].value===void 0&&e[m][p].notes.length===2){const C=e[m][p].notes.join(",");if(!s[C])s[C]={row:m,col:p};else{const g={row:m,col:p,notes:[...e[m][p].notes]},U={row:s[C].row,col:s[C].col,notes:[...e[m][p].notes]},N=[];for(let E=0;E<9;E++){const k=Math.floor(E/3),v=E%3,r=i+k,u=c+v;e[r][u].value!==void 0||e[r][u].notes.join(",")===C||N.push({row:r,col:u,notes:[...e[m][p].notes]})}t.push({type:"naked_pair",cause:[g,U],effect:N})}}}}return t},lt=e=>[...tt(e),...et(e),...ot(e)],St=e=>{const t=[],o=new Array(27).fill(0);for(let n=0;n<9;n++)for(let l=0;l<9;l++){if(e[n][l].value===void 0)continue;const s=e[n][l].value,i=1<<s-1,c=o[n],a=o[9+l],d=o[18+Math.floor(n/3)*3+Math.floor(l/3)];c&i&&t.push({type:"row",col:l,row:n,value:s}),a&i&&t.push({type:"column",col:l,row:n,value:s}),d&i&&t.push({type:"square",col:l,row:n,value:s}),o[n]^=i,o[9+l]^=i,o[18+Math.floor(n/3)*3+Math.floor(l/3)]^=i}return t},Ce=e=>{const t=new Array(27).fill(0);for(let o=0;o<9;o++)for(let n=0;n<9;n++){if(e[o][n].value===void 0)continue;const s=1<<e[o][n].value-1,i=t[o],c=t[9+n],a=t[18+Math.floor(o/3)*3+Math.floor(n/3)];if(i&s||c&s||a&s)return!0;t[o]^=s,t[9+n]^=s,t[18+Math.floor(o/3)*3+Math.floor(n/3)]^=s}return!1},me=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(!e[t][o].value)return!1;return!0},Pe=e=>me(e)&&!Ce(e),ue=e=>JSON.parse(JSON.stringify(e)),ve=(e,t,o,n)=>{if(!n||e[t][o].value)return!1;const l=e[t][o].notes.indexOf(n);return l===-1?!1:(e[t][o].notes.splice(l,1),!0)},Tt=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].notes=[]},nt=(e,t)=>{const{row:o,col:n}=t;if(e[o][n].value){e[o][n].notes=[];return}e[o][n].notes=[1,2,3,4,5,6,7,8,9];const l=Math.floor(n/3),s=Math.floor(o/3);for(let i=0;i<9;i++){const c=e[i][n].value;ve(e,o,n,c);const a=e[o][i].value;ve(e,o,n,a);const d=Math.floor(i/3),h=i%3,m=e[3*s+d][3*l+h].value;ve(e,o,n,m)}return e[o][n].notes},st=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)nt(e,{row:t,col:o})},rt=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].fixed||(e[t][o].value=void 0,e[t][o].notes=[])},Dt=e=>{if(me(e)||Ce(e))return{grid:e,hint:null};const t=ue(e);rt(t);const o=it(t);for(let h=0;h<9;h++)for(let m=0;m<9;m++)if(e[h][m].value!==void 0&&e[h][m].value!==o[h][m].value)return e[h][m].value=o[h][m].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:h,col:m,notes:[o[h][m].value]}]}};const n=ue(e);st(n);const s=lt(n).find(h=>["lone_single","hidden_single_col","hidden_single_row","hidden_single_square"].includes(h.type));if(s&&s.cause.length){const h=s.cause.pop(),{row:m,col:p}=h;return e[m][p].value=o[m][p].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:m,col:p,notes:[e[m][p].value]}]}}}const i=[];for(let h=0;h<9;h++)for(let m=0;m<9;m++)e[h][m].value===void 0&&i.push({x:m,y:h});if(!i.length)return{grid:e,hint:null};const c=Math.floor(Math.random()*i.length),a=i[c],d=o[a.y][a.x].value;return e[a.y][a.x].value=d,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:a.y,col:a.x,notes:[d]}]}}},Fe=(e,t,o)=>{const{col:n,row:l}=t;if(e[l][n].value!==void 0)return!1;const s=Math.floor(n/3),i=Math.floor(l/3);for(let c=0;c<9;c++){if(e[l][c].value===o||e[c][n].value===o)return!1;const a=Math.floor(c/3),d=c%3;if(e[3*i+a][3*s+d].value===o)return!1}return!0},it=e=>{const t=ue(e);return Le(t),t},Le=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(e[t][o].value===void 0){for(let n=1;n<=9;n++)if(Fe(e,{row:t,col:o},n)){if(e[t][o].value=n,Le(e))return!0;e[t][o].value=void 0}return!1}return!0};let we=0;const Xe=1e4,at=e=>{if(me(e))return Pe(e)?"unique":"none";const t=ue(e);let o=0;for(let l=0;l<9;l++)for(let s=0;s<9;s++)e[l][s].value!==void 0&&o++;const n=[];return we=0,Je(t,n,o),we>=Xe?"unreachable":n.length===0?"none":n.length===1?"unique":"notUnique"},Je=(e,t,o)=>{if(!(we++>=Xe)){for(let n=0;n<9;n++)for(let l=0;l<9;l++)if(e[n][l].value===void 0){for(let s=1;s<=9;s++)if(Fe(e,{row:n,col:l},s)){if(e[n][l].value=s,Je(e,t,o+1)&&(o===80&&t.push(ue(e)),t.length>=2))return!0;e[n][l].value=void 0}return!1}return!0}},Ot=()=>{const e=[];for(let t=0;t<9;t++){e.push([]);for(let o=0;o<9;o++){const n={value:void 0,fixed:!1,notes:[]};e[e.length-1].push(n)}}return e},yt=()=>{const e=[];for(let t=0;t<9;t++){e.push([]);for(let o=0;o<9;o++){const n={value:void 0,fixed:!1,notes:[1,2,3,4,5,6,7,8,9]};e[e.length-1].push(n)}}return e};function Ue(e,t,o){const n=e.slice();return n[23]=t[o],n}function Ie(e,t,o){const n=e.slice();return n[23]=t[o],n}function Me(e){let t=e[2],o,n=Oe(e);return{c(){n.c(),o=te()},l(l){n.l(l),o=te()},m(l,s){n.m(l,s),Q(l,o,s)},p(l,s){s&4&&ne(t,t=l[2])?(n.d(1),n=Oe(l),n.c(),n.m(o.parentNode,o)):n.p(l,s)},d(l){l&&M(o),n.d(l)}}}function Se(e){let t,o,n,l;function s(){return e[17](e[23])}return{c(){t=j("button"),o=$(e[23]),this.h()},l(i){t=R(i,"BUTTON",{class:!0});var c=P(t);o=x(c,e[23]),c.forEach(M),this.h()},h(){H(t,"class","choice-btn svelte-1v5q25"),F(t,"selected",e[5]===e[23])},m(i,c){Q(i,t,c),w(t,o),n||(l=Z(t,"click",s),n=!0)},p(i,c){e=i,c&32&&F(t,"selected",e[5]===e[23])},d(i){i&&M(t),n=!1,l()}}}function Te(e){let t,o,n,l;function s(){return e[18](e[23])}return{c(){t=j("button"),o=$(e[23]),this.h()},l(i){t=R(i,"BUTTON",{class:!0});var c=P(t);o=x(c,e[23]),c.forEach(M),this.h()},h(){H(t,"class","choice-btn svelte-1v5q25"),F(t,"selected",e[4][e[23]-1])},m(i,c){Q(i,t,c),w(t,o),n||(l=Z(t,"click",s),n=!0)},p(i,c){e=i,c&16&&F(t,"selected",e[4][e[23]-1])},d(i){i&&M(t),n=!1,l()}}}function De(e){let t=e[4],o,n=Te(e);return{c(){n.c(),o=te()},l(l){n.l(l),o=te()},m(l,s){n.m(l,s),Q(l,o,s)},p(l,s){s&16&&ne(t,t=l[4])?(n.d(1),n=Te(l),n.c(),n.m(o.parentNode,o)):n.p(l,s)},d(l){l&&M(o),n.d(l)}}}function Oe(e){let t,o,n,l=e[6]?"Valeur":"Value",s,i,c,a="âœ–",d,h,m,p,C="Notes",g,U,N,E,k,v=e[6]?"Notes auto":"Auto notes",r,u,T,B=e[6]?"Tout supprimer":"Clear",A,f,S,G=ae([1,2,3,4,5,6,7,8,9]),V=[];for(let _=0;_<9;_+=1)V[_]=Se(Ie(e,G,_));let q=ae([1,2,3,4,5,6,7,8,9]),D=[];for(let _=0;_<9;_+=1)D[_]=De(Ue(e,q,_));return{c(){t=j("div"),o=j("div"),n=j("h3"),s=$(l),i=O(),c=j("button"),c.textContent=a,d=O(),h=j("div");for(let _=0;_<9;_+=1)V[_].c();m=O(),p=j("h3"),p.textContent=C,g=O(),U=j("div");for(let _=0;_<9;_+=1)D[_].c();N=O(),E=j("div"),k=j("button"),r=$(v),u=O(),T=j("button"),A=$(B),this.h()},l(_){t=R(_,"DIV",{role:!0,class:!0,style:!0});var Y=P(t);o=R(Y,"DIV",{class:!0});var b=P(o);n=R(b,"H3",{class:!0});var ee=P(n);s=x(ee,l),i=y(ee),c=R(ee,"BUTTON",{"data-svelte-h":!0}),ie(c)!=="svelte-15i1wwz"&&(c.textContent=a),ee.forEach(M),d=y(b),h=R(b,"DIV",{class:!0});var be=P(h);for(let se=0;se<9;se+=1)V[se].l(be);be.forEach(M),m=y(b),p=R(b,"H3",{class:!0,"data-svelte-h":!0}),ie(p)!=="svelte-2havtt"&&(p.textContent=C),g=y(b),U=R(b,"DIV",{class:!0});var ke=P(U);for(let se=0;se<9;se+=1)D[se].l(ke);ke.forEach(M),N=y(b),E=R(b,"DIV",{class:!0});var he=P(E);k=R(he,"BUTTON",{});var Ne=P(k);r=x(Ne,v),Ne.forEach(M),u=y(he),T=R(he,"BUTTON",{});var Ee=P(T);A=x(Ee,B),Ee.forEach(M),he.forEach(M),b.forEach(M),Y.forEach(M),this.h()},h(){H(n,"class","title-bar svelte-1v5q25"),H(h,"class","grid svelte-1v5q25"),H(p,"class","svelte-1v5q25"),H(U,"class","grid svelte-1v5q25"),H(E,"class","cell-buttons svelte-1v5q25"),H(o,"class","contents svelte-1v5q25"),H(t,"role","dialog"),H(t,"class","modal svelte-1v5q25"),de(t,"top",e[2]+"px"),de(t,"left",e[3]+"px")},m(_,Y){Q(_,t,Y),w(t,o),w(o,n),w(n,s),w(n,i),w(n,c),w(o,d),w(o,h);for(let b=0;b<9;b+=1)V[b]&&V[b].m(h,null);w(o,m),w(o,p),w(o,g),w(o,U);for(let b=0;b<9;b+=1)D[b]&&D[b].m(U,null);w(o,N),w(o,E),w(E,k),w(k,r),w(E,u),w(E,T),w(T,A),f||(S=[Z(c,"click",He),Z(k,"click",function(){ze(e[1])&&e[1].apply(this,arguments)}),Z(T,"click",e[9]),Z(t,"mousedown",e[11])],f=!0)},p(_,Y){if(e=_,Y&64&&l!==(l=e[6]?"Valeur":"Value")&&_e(s,l),Y&160){G=ae([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const ee=Ie(e,G,b);V[b]?V[b].p(ee,Y):(V[b]=Se(ee),V[b].c(),V[b].m(h,null))}for(;b<9;b+=1)V[b].d(1)}if(Y&144){q=ae([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const ee=Ue(e,q,b);D[b]?D[b].p(ee,Y):(D[b]=De(ee),D[b].c(),D[b].m(U,null))}for(;b<9;b+=1)D[b].d(1)}Y&64&&v!==(v=e[6]?"Notes auto":"Auto notes")&&_e(r,v),Y&64&&B!==(B=e[6]?"Tout supprimer":"Clear")&&_e(A,B),Y&4&&de(t,"top",e[2]+"px"),Y&8&&de(t,"left",e[3]+"px")},d(_){_&&M(t),ge(V,_),ge(D,_),f=!1,Be(S)}}}function ut(e){let t,o,n,l=e[0]&&Me(e);return{c(){l&&l.c(),t=te()},l(s){l&&l.l(s),t=te()},m(s,i){l&&l.m(s,i),Q(s,t,i),o||(n=[Z(window,"keydown",e[8]),Z(window,"keyup",e[10]),Z(window,"mouseup",e[13]),Z(window,"mousemove",e[12])],o=!0)},p(s,[i]){s[0]?l?l.p(s,i):(l=Me(s),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:re,o:re,d(s){s&&M(t),l&&l.d(s),o=!1,Be(n)}}}function ft(e,t,o){let n;Ae(e,Ye,f=>o(21,n=f));let{isOpen:l}=t,{onSelectionUpdated:s}=t,{onComputeCellNotes:i}=t,{initialState:c}=t,{cellBoundingRect:a}=t;const d=f=>{const S=document.body.getBoundingClientRect(),G=300,V=600;let q=f.top;q+V>S.height&&(q=S.height-V);let D=f.right;return D>S.width/2&&(D=f.left-G-f.width),{top:q,left:Math.max(0,D)}};let{top:h,left:m}=d(a);c.notes.length>0;let p=new Array(9).fill(!1).map((f,S)=>c.notes.includes(S+1)),C=c.value;const g=(f,S)=>{if(S==="notes"){o(4,p[f-1]=!p[f-1],p),o(4,p),o(5,C=void 0),s({notes:p.map((G,V)=>V+1).filter(G=>p[G-1])});return}if(C===f){s({clear:!0}),o(5,C=void 0),o(4,p=[]);return}o(5,C=f),o(4,p=[]),s({value:C}),He()},U=f=>{const S="!@#$%^&*(",G=f.getModifierState("Shift");let V;if(V=f.key,V==="Backspace"){N();return}S.includes(V)&&(V=S.indexOf(V)+1),!isNaN(Number(V))&&g(Number(V),G?"notes":"value")},N=()=>{s({clear:!0}),o(4,p=new Array(9).fill(!1).map((f,S)=>!1)),o(5,C=void 0)},E=f=>{};let k=!1;function v(){k=!0}function r(f){k&&(o(3,m+=f.movementX),o(2,h+=f.movementY))}function u(){k=!1}let T=!1;Ke(()=>{o(6,T=n.url.searchParams.has("fr"))});const B=f=>g(f,"value"),A=f=>g(f,"notes");return e.$$set=f=>{"isOpen"in f&&o(0,l=f.isOpen),"onSelectionUpdated"in f&&o(14,s=f.onSelectionUpdated),"onComputeCellNotes"in f&&o(1,i=f.onComputeCellNotes),"initialState"in f&&o(15,c=f.initialState),"cellBoundingRect"in f&&o(16,a=f.cellBoundingRect)},[l,i,h,m,p,C,T,g,U,N,E,v,r,u,s,c,a,B,A]}class ct extends fe{constructor(t){super(),ce(this,t,ft,ut,ne,{isOpen:0,onSelectionUpdated:14,onComputeCellNotes:1,initialState:15,cellBoundingRect:16})}}const ht=Qe();function ye(e,t,o){const n=e.slice();return n[16]=t[o],n}function dt(e){let t,o,n,l,s=ae([1,2,3,4,5,6,7,8,9]),i=[];for(let c=0;c<9;c+=1)i[c]=je(ye(e,s,c));return{c(){t=j("button");for(let c=0;c<9;c+=1)i[c].c();this.h()},l(c){t=R(c,"BUTTON",{class:!0});var a=P(t);for(let d=0;d<9;d+=1)i[d].l(a);a.forEach(M),this.h()},h(){H(t,"class",o=pe("cell notes "+e[2]+" "+e[7])+" svelte-12ewoli")},m(c,a){Q(c,t,a);for(let d=0;d<9;d+=1)i[d]&&i[d].m(t,null);e[12](t),n||(l=Z(t,"click",e[4]),n=!0)},p(c,a){if(a&105){s=ae([1,2,3,4,5,6,7,8,9]);let d;for(d=0;d<9;d+=1){const h=ye(c,s,d);i[d]?i[d].p(h,a):(i[d]=je(h),i[d].c(),i[d].m(t,null))}for(;d<9;d+=1)i[d].d(1)}a&4&&o!==(o=pe("cell notes "+c[2]+" "+c[7])+" svelte-12ewoli")&&H(t,"class",o)},d(c){c&&M(t),ge(i,c),e[12](null),n=!1,l()}}}function _t(e){let t,o=e[0].value+"",n,l,s,i,c;return{c(){t=j("button"),n=$(o),this.h()},l(a){t=R(a,"BUTTON",{class:!0});var d=P(t);n=x(d,o),d.forEach(M),this.h()},h(){H(t,"class",l=pe("cell value "+(e[2]==="auto-hint"?e[2]:"")+" "+e[7])+" svelte-12ewoli"),t.disabled=s=e[0].fixed,F(t,"fixed",e[0].fixed),F(t,"highlight",e[3]!==void 0&&e[3]===e[0].value)},m(a,d){Q(a,t,d),w(t,n),e[11](t),i||(c=Z(t,"click",e[4]),i=!0)},p(a,d){d&1&&o!==(o=a[0].value+"")&&_e(n,o),d&4&&l!==(l=pe("cell value "+(a[2]==="auto-hint"?a[2]:"")+" "+a[7])+" svelte-12ewoli")&&H(t,"class",l),d&1&&s!==(s=a[0].fixed)&&(t.disabled=s),d&5&&F(t,"fixed",a[0].fixed),d&13&&F(t,"highlight",a[3]!==void 0&&a[3]===a[0].value)},d(a){a&&M(t),e[11](null),i=!1,c()}}}function Ge(e){let t;return{c(){t=$(e[16])},l(o){t=x(o,e[16])},m(o,n){Q(o,t,n)},d(o){o&&M(t)}}}function je(e){let t,o=e[0].notes.includes(e[16]),n,l=o&&Ge(e);return{c(){t=j("div"),l&&l.c(),n=O(),this.h()},l(s){t=R(s,"DIV",{class:!0});var i=P(t);l&&l.l(i),n=y(i),i.forEach(M),this.h()},h(){H(t,"class","note svelte-12ewoli"),F(t,"hinted-note",e[5].includes(e[16])),F(t,"hinted-remove-note",e[6].includes(e[16])),F(t,"highlight",e[3]!==void 0&&e[3]===e[16])},m(s,i){Q(s,t,i),l&&l.m(t,null),w(t,n)},p(s,i){i&1&&(o=s[0].notes.includes(s[16])),o?l||(l=Ge(s),l.c(),l.m(t,n)):l&&(l.d(1),l=null),i&8&&F(t,"highlight",s[3]!==void 0&&s[3]===s[16])},d(s){s&&M(t),l&&l.d()}}}function pt(e){let t;function o(s,i){return s[0].value?_t:dt}let n=o(e),l=n(e);return{c(){l.c(),t=te()},l(s){l.l(s),t=te()},m(s,i){l.m(s,i),Q(s,t,i)},p(s,[i]){n===(n=o(s))&&l?l.p(s,i):(l.d(1),l=n(s),l&&(l.c(),l.m(t.parentNode,t)))},i:re,o:re,d(s){s&&M(t),l.d(s)}}}function mt(e,t,o){let n;Ae(e,ht,v=>o(3,n=v));let{cell:l}=t,{position:s}=t,{gridErrors:i}=t,{hints:c=[]}=t;const a=Ve(),d=Ve();let h;const m=()=>{We(ct,{initialState:l,onSelectionUpdated:u=>{a("cellUpdate",{cell:l,update:u})},onComputeCellNotes:()=>{d("computeCellNotes",{position:s})},cellBoundingRect:h.getBoundingClientRect()})};let p="";const C=[],g=[];for(const v of c){for(const r of v.cause)r.row===s.row&&r.col===s.col&&(v.type==="naked_pair"?p="naked-pair-hint":v.type==="last_auto_hint"?p="auto-hint":p="lone-hint",C.push(...r.notes));for(const r of v.effect)r.row===s.row&&r.col===s.col&&g.push(...r.notes)}const U=[];for(const v of i){const r=3*Math.floor(s.row/3)+Math.floor(s.col/3),u=3*Math.floor(v.row/3)+Math.floor(v.col/3);if(v.col===s.col&&v.row===s.row||v.type==="column"&&v.col===s.col&&v.value===l.value||v.type==="row"&&v.row===s.row&&v.value===l.value||v.type==="square"&&r===u&&v.value===l.value){U.push("is-error-cell");continue}v.type==="column"&&v.col===s.col&&U.push("is-error-col"),v.type==="row"&&v.row===s.row&&U.push("is-error-row"),v.type==="square"&&r===u&&U.push("is-error-square")}let N=U.join(" ");function E(v){qe[v?"unshift":"push"](()=>{h=v,o(1,h)})}function k(v){qe[v?"unshift":"push"](()=>{h=v,o(1,h)})}return e.$$set=v=>{"cell"in v&&o(0,l=v.cell),"position"in v&&o(8,s=v.position),"gridErrors"in v&&o(9,i=v.gridErrors),"hints"in v&&o(10,c=v.hints)},[l,h,p,n,m,C,g,N,s,i,c,E,k]}class oe extends fe{constructor(t){super(),ce(this,t,mt,pt,ne,{cell:0,position:8,gridErrors:9,hints:10})}}function vt(e){let t,o,n,l,s,i,c,a,d,h,m,p,C,g,U,N,E,k,v;return o=new oe({props:{cell:e[7][0],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]}}}),o.$on("cellUpdate",e[10]),o.$on("computeCellNotes",e[11]),l=new oe({props:{cell:e[7][1],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]+1}}}),l.$on("cellUpdate",e[12]),l.$on("computeCellNotes",e[13]),i=new oe({props:{cell:e[7][2],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]+2}}}),i.$on("cellUpdate",e[14]),i.$on("computeCellNotes",e[15]),a=new oe({props:{cell:e[7][3],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]}}}),a.$on("cellUpdate",e[16]),a.$on("computeCellNotes",e[17]),h=new oe({props:{cell:e[7][4],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]+1}}}),h.$on("cellUpdate",e[18]),h.$on("computeCellNotes",e[19]),p=new oe({props:{cell:e[7][5],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]+2}}}),p.$on("cellUpdate",e[20]),p.$on("computeCellNotes",e[21]),g=new oe({props:{cell:e[7][6],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]}}}),g.$on("cellUpdate",e[22]),g.$on("computeCellNotes",e[23]),N=new oe({props:{cell:e[7][7],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]+1}}}),N.$on("cellUpdate",e[24]),N.$on("computeCellNotes",e[25]),k=new oe({props:{cell:e[7][8],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]+2}}}),k.$on("cellUpdate",e[26]),k.$on("computeCellNotes",e[27]),{c(){t=j("div"),L(o.$$.fragment),n=O(),L(l.$$.fragment),s=O(),L(i.$$.fragment),c=O(),L(a.$$.fragment),d=O(),L(h.$$.fragment),m=O(),L(p.$$.fragment),C=O(),L(g.$$.fragment),U=O(),L(N.$$.fragment),E=O(),L(k.$$.fragment),this.h()},l(r){t=R(r,"DIV",{class:!0});var u=P(t);X(o.$$.fragment,u),n=y(u),X(l.$$.fragment,u),s=y(u),X(i.$$.fragment,u),c=y(u),X(a.$$.fragment,u),d=y(u),X(h.$$.fragment,u),m=y(u),X(p.$$.fragment,u),C=y(u),X(g.$$.fragment,u),U=y(u),X(N.$$.fragment,u),E=y(u),X(k.$$.fragment,u),u.forEach(M),this.h()},h(){H(t,"class","cell-grid svelte-xcvtsp"),F(t,"showValid",e[2]),F(t,"borderLeftRight",e[3]),F(t,"borderTopBottom",e[4])},m(r,u){Q(r,t,u),J(o,t,null),w(t,n),J(l,t,null),w(t,s),J(i,t,null),w(t,c),J(a,t,null),w(t,d),J(h,t,null),w(t,m),J(p,t,null),w(t,C),J(g,t,null),w(t,U),J(N,t,null),w(t,E),J(k,t,null),v=!0},p(r,[u]){const T={};u&2&&(T.hints=r[1]),u&1&&(T.gridErrors=r[0]),o.$set(T);const B={};u&2&&(B.hints=r[1]),u&1&&(B.gridErrors=r[0]),l.$set(B);const A={};u&2&&(A.hints=r[1]),u&1&&(A.gridErrors=r[0]),i.$set(A);const f={};u&2&&(f.hints=r[1]),u&1&&(f.gridErrors=r[0]),a.$set(f);const S={};u&2&&(S.hints=r[1]),u&1&&(S.gridErrors=r[0]),h.$set(S);const G={};u&2&&(G.hints=r[1]),u&1&&(G.gridErrors=r[0]),p.$set(G);const V={};u&2&&(V.hints=r[1]),u&1&&(V.gridErrors=r[0]),g.$set(V);const q={};u&2&&(q.hints=r[1]),u&1&&(q.gridErrors=r[0]),N.$set(q);const D={};u&2&&(D.hints=r[1]),u&1&&(D.gridErrors=r[0]),k.$set(D),(!v||u&4)&&F(t,"showValid",r[2])},i(r){v||(K(o.$$.fragment,r),K(l.$$.fragment,r),K(i.$$.fragment,r),K(a.$$.fragment,r),K(h.$$.fragment,r),K(p.$$.fragment,r),K(g.$$.fragment,r),K(N.$$.fragment,r),K(k.$$.fragment,r),v=!0)},o(r){z(o.$$.fragment,r),z(l.$$.fragment,r),z(i.$$.fragment,r),z(a.$$.fragment,r),z(h.$$.fragment,r),z(p.$$.fragment,r),z(g.$$.fragment,r),z(N.$$.fragment,r),z(k.$$.fragment,r),v=!1},d(r){r&&M(t),W(o),W(l),W(i),W(a),W(h),W(p),W(g),W(N),W(k)}}}function gt(e,t,o){let{position:n}=t,{grid:l}=t,{gridErrors:s}=t,{hints:i=[]}=t,{gridIsValid:c=!1}=t;const a=[1,4,7].includes(n),d=[3,4,5].includes(n),h=3*Math.floor(n/3),m=3*(n%3),p=Ze(n,l);function C(_){I.call(this,e,_)}function g(_){I.call(this,e,_)}function U(_){I.call(this,e,_)}function N(_){I.call(this,e,_)}function E(_){I.call(this,e,_)}function k(_){I.call(this,e,_)}function v(_){I.call(this,e,_)}function r(_){I.call(this,e,_)}function u(_){I.call(this,e,_)}function T(_){I.call(this,e,_)}function B(_){I.call(this,e,_)}function A(_){I.call(this,e,_)}function f(_){I.call(this,e,_)}function S(_){I.call(this,e,_)}function G(_){I.call(this,e,_)}function V(_){I.call(this,e,_)}function q(_){I.call(this,e,_)}function D(_){I.call(this,e,_)}return e.$$set=_=>{"position"in _&&o(8,n=_.position),"grid"in _&&o(9,l=_.grid),"gridErrors"in _&&o(0,s=_.gridErrors),"hints"in _&&o(1,i=_.hints),"gridIsValid"in _&&o(2,c=_.gridIsValid)},[s,i,c,a,d,h,m,p,n,l,C,g,U,N,E,k,v,r,u,T,B,A,f,S,G,V,q,D]}class le extends fe{constructor(t){super(),ce(this,t,gt,vt,ne,{position:8,grid:9,gridErrors:0,hints:1,gridIsValid:2})}}function wt(e){let t,o,n,l,s,i,c,a,d,h,m,p,C,g,U,N,E,k,v;return o=new le({props:{position:0,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),o.$on("cellUpdate",e[4]),o.$on("computeCellNotes",e[5]),l=new le({props:{position:1,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),l.$on("cellUpdate",e[6]),l.$on("computeCellNotes",e[7]),i=new le({props:{position:2,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),i.$on("cellUpdate",e[8]),i.$on("computeCellNotes",e[9]),a=new le({props:{position:3,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),a.$on("cellUpdate",e[10]),a.$on("computeCellNotes",e[11]),h=new le({props:{position:4,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),h.$on("cellUpdate",e[12]),h.$on("computeCellNotes",e[13]),p=new le({props:{position:5,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),p.$on("cellUpdate",e[14]),p.$on("computeCellNotes",e[15]),g=new le({props:{position:6,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),g.$on("cellUpdate",e[16]),g.$on("computeCellNotes",e[17]),N=new le({props:{position:7,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),N.$on("cellUpdate",e[18]),N.$on("computeCellNotes",e[19]),k=new le({props:{position:8,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),k.$on("cellUpdate",e[20]),k.$on("computeCellNotes",e[21]),{c(){t=j("div"),L(o.$$.fragment),n=O(),L(l.$$.fragment),s=O(),L(i.$$.fragment),c=O(),L(a.$$.fragment),d=O(),L(h.$$.fragment),m=O(),L(p.$$.fragment),C=O(),L(g.$$.fragment),U=O(),L(N.$$.fragment),E=O(),L(k.$$.fragment),this.h()},l(r){t=R(r,"DIV",{class:!0});var u=P(t);X(o.$$.fragment,u),n=y(u),X(l.$$.fragment,u),s=y(u),X(i.$$.fragment,u),c=y(u),X(a.$$.fragment,u),d=y(u),X(h.$$.fragment,u),m=y(u),X(p.$$.fragment,u),C=y(u),X(g.$$.fragment,u),U=y(u),X(N.$$.fragment,u),E=y(u),X(k.$$.fragment,u),u.forEach(M),this.h()},h(){H(t,"class","main-grid svelte-vli9ua")},m(r,u){Q(r,t,u),J(o,t,null),w(t,n),J(l,t,null),w(t,s),J(i,t,null),w(t,c),J(a,t,null),w(t,d),J(h,t,null),w(t,m),J(p,t,null),w(t,C),J(g,t,null),w(t,U),J(N,t,null),w(t,E),J(k,t,null),v=!0},p(r,[u]){const T={};u&8&&(T.gridIsValid=r[3]),u&4&&(T.hints=r[2]),u&2&&(T.gridErrors=r[1]),u&1&&(T.grid=r[0]),o.$set(T);const B={};u&8&&(B.gridIsValid=r[3]),u&4&&(B.hints=r[2]),u&2&&(B.gridErrors=r[1]),u&1&&(B.grid=r[0]),l.$set(B);const A={};u&8&&(A.gridIsValid=r[3]),u&4&&(A.hints=r[2]),u&2&&(A.gridErrors=r[1]),u&1&&(A.grid=r[0]),i.$set(A);const f={};u&8&&(f.gridIsValid=r[3]),u&4&&(f.hints=r[2]),u&2&&(f.gridErrors=r[1]),u&1&&(f.grid=r[0]),a.$set(f);const S={};u&8&&(S.gridIsValid=r[3]),u&4&&(S.hints=r[2]),u&2&&(S.gridErrors=r[1]),u&1&&(S.grid=r[0]),h.$set(S);const G={};u&8&&(G.gridIsValid=r[3]),u&4&&(G.hints=r[2]),u&2&&(G.gridErrors=r[1]),u&1&&(G.grid=r[0]),p.$set(G);const V={};u&8&&(V.gridIsValid=r[3]),u&4&&(V.hints=r[2]),u&2&&(V.gridErrors=r[1]),u&1&&(V.grid=r[0]),g.$set(V);const q={};u&8&&(q.gridIsValid=r[3]),u&4&&(q.hints=r[2]),u&2&&(q.gridErrors=r[1]),u&1&&(q.grid=r[0]),N.$set(q);const D={};u&8&&(D.gridIsValid=r[3]),u&4&&(D.hints=r[2]),u&2&&(D.gridErrors=r[1]),u&1&&(D.grid=r[0]),k.$set(D)},i(r){v||(K(o.$$.fragment,r),K(l.$$.fragment,r),K(i.$$.fragment,r),K(a.$$.fragment,r),K(h.$$.fragment,r),K(p.$$.fragment,r),K(g.$$.fragment,r),K(N.$$.fragment,r),K(k.$$.fragment,r),v=!0)},o(r){z(o.$$.fragment,r),z(l.$$.fragment,r),z(i.$$.fragment,r),z(a.$$.fragment,r),z(h.$$.fragment,r),z(p.$$.fragment,r),z(g.$$.fragment,r),z(N.$$.fragment,r),z(k.$$.fragment,r),v=!1},d(r){r&&M(t),W(o),W(l),W(i),W(a),W(h),W(p),W(g),W(N),W(k)}}}function Ct(e,t,o){let{grid:n}=t,{gridErrors:l}=t,{hints:s=[]}=t,{gridIsValid:i=!1}=t;function c(f){I.call(this,e,f)}function a(f){I.call(this,e,f)}function d(f){I.call(this,e,f)}function h(f){I.call(this,e,f)}function m(f){I.call(this,e,f)}function p(f){I.call(this,e,f)}function C(f){I.call(this,e,f)}function g(f){I.call(this,e,f)}function U(f){I.call(this,e,f)}function N(f){I.call(this,e,f)}function E(f){I.call(this,e,f)}function k(f){I.call(this,e,f)}function v(f){I.call(this,e,f)}function r(f){I.call(this,e,f)}function u(f){I.call(this,e,f)}function T(f){I.call(this,e,f)}function B(f){I.call(this,e,f)}function A(f){I.call(this,e,f)}return e.$$set=f=>{"grid"in f&&o(0,n=f.grid),"gridErrors"in f&&o(1,l=f.gridErrors),"hints"in f&&o(2,s=f.hints),"gridIsValid"in f&&o(3,i=f.gridIsValid)},[n,l,s,i,c,a,d,h,m,p,C,g,U,N,E,k,v,r,u,T,B,A]}class Gt extends fe{constructor(t){super(),ce(this,t,Ct,wt,ne,{grid:0,gridErrors:1,hints:2,gridIsValid:3})}}function Re(e){let t,o,n="grid has errors",l,s,i="grid is filled",c,a,d="grid is valid",h,m,p="grid has solutions",C,g,U=e[1]?"Has errors":"No errors",N,E,k,v=e[2]?"Is filled":"Not filled",r,u,T,B=e[3]?"Is valid":"Not valid",A,f,S,G;return{c(){t=j("div"),o=j("div"),o.textContent=n,l=O(),s=j("div"),s.textContent=i,c=O(),a=j("div"),a.textContent=d,h=O(),m=j("div"),m.textContent=p,C=O(),g=j("div"),N=$(U),E=O(),k=j("div"),r=$(v),u=O(),T=j("div"),A=$(B),f=O(),S=j("div"),G=$(e[4]),this.h()},l(V){t=R(V,"DIV",{class:!0});var q=P(t);o=R(q,"DIV",{"data-svelte-h":!0}),ie(o)!=="svelte-1hlqbal"&&(o.textContent=n),l=y(q),s=R(q,"DIV",{"data-svelte-h":!0}),ie(s)!=="svelte-ekf37s"&&(s.textContent=i),c=y(q),a=R(q,"DIV",{"data-svelte-h":!0}),ie(a)!=="svelte-16e0vl8"&&(a.textContent=d),h=y(q),m=R(q,"DIV",{"data-svelte-h":!0}),ie(m)!=="svelte-1tjrozg"&&(m.textContent=p),C=y(q),g=R(q,"DIV",{class:!0});var D=P(g);N=x(D,U),D.forEach(M),E=y(q),k=R(q,"DIV",{class:!0});var _=P(k);r=x(_,v),_.forEach(M),u=y(q),T=R(q,"DIV",{class:!0});var Y=P(T);A=x(Y,B),Y.forEach(M),f=y(q),S=R(q,"DIV",{class:!0});var b=P(S);G=x(b,e[4]),b.forEach(M),q.forEach(M),this.h()},h(){H(g,"class","status svelte-1csoeu4"),F(g,"red",e[1]),H(k,"class","status svelte-1csoeu4"),F(k,"red",!e[2]),H(T,"class","status svelte-1csoeu4"),F(T,"red",!e[3]),H(S,"class","status svelte-1csoeu4"),F(S,"red",e[4]!=="unique"),H(t,"class","grid-status svelte-1csoeu4")},m(V,q){Q(V,t,q),w(t,o),w(t,l),w(t,s),w(t,c),w(t,a),w(t,h),w(t,m),w(t,C),w(t,g),w(g,N),w(t,E),w(t,k),w(k,r),w(t,u),w(t,T),w(T,A),w(t,f),w(t,S),w(S,G)},p:re,d(V){V&&M(t)}}}function bt(e){let t=e[0],o,n=Re(e);return{c(){n.c(),o=te()},l(l){n.l(l),o=te()},m(l,s){n.m(l,s),Q(l,o,s)},p(l,[s]){s&1&&ne(t,t=l[0])?(n.d(1),n=Re(l),n.c(),n.m(o.parentNode,o)):n.p(l,s)},i:re,o:re,d(l){l&&M(o),n.d(l)}}}function kt(e,t,o){let{grid:n}=t,l=Ce(n),s=me(n),i=Pe(n),c=at(n);return e.$$set=a=>{"grid"in a&&o(0,n=a.grid)},[n,l,s,i,c]}class jt extends fe{constructor(t){super(),ce(this,t,kt,bt,ne,{grid:0})}}export{jt as G,Gt as S,St as a,Ce as b,at as c,ue as d,Pe as e,nt as f,Ot as g,Tt as h,ht as i,st as j,lt as k,yt as l,me as m,Dt as p,rt as r,it as s,Mt as u};
