import{s as se,e as te,i as Y,y as Q,G as ie,d as y,C as Pe,D as He,o as Je,f as j,l as Z,a as O,g as G,h as H,m as x,c as R,H as ue,j as P,k as pe,I as w,M as Ye,n as ve,K as Ce,L as z,N as Me,p as Se,O as me,P as V}from"./scheduler.193db7c4.js";import{S as he,i as de,b as F,d as L,m as $,a as X,t as K,e as W}from"./index.9bea933b.js";import{a as fe,b as Fe,d as Qe}from"./store.8b4149bb.js";import{p as Ze}from"./stores.249eee2c.js";import{w as xe}from"./index.33e6b952.js";const et=(e,t)=>{if(e<0||e>8)throw new Error(`unexpected square position: ${e}`);const o=Math.floor(e/3),l=e%3,n=3*o,s=3*l;return[t[n][s],t[n][s+1],t[n][s+2],t[n+1][s],t[n+1][s+1],t[n+1][s+2],t[n+2][s],t[n+2][s+1],t[n+2][s+2]]};function tt(e){return e.notes!==void 0}function ot(e){return e.clear===!0}const Dt=(e,t)=>{if(e.fixed)throw new Error("Tried to update fixed cell");if(tt(t)){e.value=void 0,e.notes=[...t.notes];return}if(ot(t)){e.notes=[],e.value=void 0;return}e.notes=[],e.value=t.value},nt=e=>{const t=[];for(let o=0;o<9;o++){const l={},n={},s={},i=3*Math.floor(o/3),f=3*(o%3);for(let r=0;r<9;r++){if(e[o][r].value===void 0){const b=e[o][r].notes;for(const g of b)l[g]||(l[g]=[]),l[g].push({row:o,col:r})}if(e[r][o].value===void 0){const b=e[r][o].notes;for(const g of b)n[g]||(n[g]=[]),n[g].push({row:r,col:o})}const h=Math.floor(r/3),c=r%3,_=i+h,d=f+c;if(e[_][d].value===void 0){const b=e[_][d].notes;for(const g of b)s[g]||(s[g]=[]),s[g].push({row:_,col:d})}}for(const r of Object.keys(l)){const h=Number(r);if(l[h].length===1){const{row:c,col:_}=l[h][0];t.push({type:"hidden_single_row",cause:[{row:c,col:_,notes:[h]}],effect:[{row:c,col:_,notes:e[c][_].notes.filter(d=>d!==h)}]})}}for(const r of Object.keys(n)){const h=Number(r);if(n[h].length===1){const{row:c,col:_}=n[h][0];t.push({type:"hidden_single_col",cause:[{row:c,col:_,notes:[h]}],effect:[{row:c,col:_,notes:e[c][_].notes.filter(d=>d!==h)}]})}}for(const r of Object.keys(s)){const h=Number(r);if(s[h].length===1){const{row:c,col:_}=s[h][0];t.push({type:"hidden_single_square",cause:[{row:c,col:_,notes:[h]}],effect:[{row:c,col:_,notes:e[c][_].notes.filter(d=>d!==h)}]})}}}return t},lt=e=>{const t=[];for(let o=0;o<9;o++)for(let l=0;l<9;l++)e[o][l].value===void 0&&e[o][l].notes.length===1&&t.push({type:"lone_single",cause:[{row:o,col:l,notes:[e[o][l].notes[0]]}],effect:[]});return t},st=e=>{const t=[];for(let o=0;o<9;o++){const l={},n={},s={},i=3*Math.floor(o/3),f=3*(o%3);for(let r=0;r<9;r++){if(e[o][r].value===void 0&&e[o][r].notes.length===2){const b=e[o][r].notes.join(",");if(!l[b])l[b]={row:o,col:r};else{const g={row:o,col:r,notes:[...e[o][r].notes]},S={row:l[b].row,col:l[b].col,notes:[...e[o][r].notes]},E=[];for(let q=0;q<9;q++)e[o][q].value!==void 0||e[o][q].notes.join(",")===b||E.push({row:o,col:q,notes:[...e[o][r].notes]});t.push({type:"naked_pair",cause:[g,S],effect:E})}}if(e[r][o].value===void 0&&e[r][o].notes.length===2){const b=e[r][o].notes.join(",");if(!n[b])n[b]={row:r,col:o};else{const g={row:r,col:o,notes:[...e[r][o].notes]},S={row:n[b].row,col:n[b].col,notes:[...e[r][o].notes]},E=[];for(let q=0;q<9;q++)e[q][o].value!==void 0||e[q][o].notes.join(",")===b||E.push({row:q,col:o,notes:[...e[r][o].notes]});t.push({type:"naked_pair",cause:[g,S],effect:E})}}const h=Math.floor(r/3),c=r%3,_=i+h,d=f+c;if(e[_][d].value===void 0&&e[_][d].notes.length===2){const b=e[_][d].notes.join(",");if(!s[b])s[b]={row:_,col:d};else{const g={row:_,col:d,notes:[...e[_][d].notes]},S={row:s[b].row,col:s[b].col,notes:[...e[_][d].notes]},E=[];for(let q=0;q<9;q++){const N=Math.floor(q/3),v=q%3,a=i+N,u=f+v;e[a][u].value!==void 0||e[a][u].notes.join(",")===b||E.push({row:a,col:u,notes:[...e[_][d].notes]})}t.push({type:"naked_pair",cause:[g,S],effect:E})}}}}return t},rt=e=>[...lt(e),...nt(e),...st(e)],Ot=e=>{const t=[],o=new Array(27).fill(0);for(let l=0;l<9;l++)for(let n=0;n<9;n++){if(e[l][n].value===void 0)continue;const s=e[l][n].value,i=1<<s-1,f=o[l],r=o[9+n],h=o[18+Math.floor(l/3)*3+Math.floor(n/3)];f&i&&t.push({type:"row",col:n,row:l,value:s}),r&i&&t.push({type:"column",col:n,row:l,value:s}),h&i&&t.push({type:"square",col:n,row:l,value:s}),o[l]^=i,o[9+n]^=i,o[18+Math.floor(l/3)*3+Math.floor(n/3)]^=i}return t},ce=e=>{const t=new Array(27).fill(0);for(let o=0;o<9;o++)for(let l=0;l<9;l++){if(e[o][l].value===void 0)continue;const s=1<<e[o][l].value-1,i=t[o],f=t[9+l],r=t[18+Math.floor(o/3)*3+Math.floor(l/3)];if(i&s||f&s||r&s)return!0;t[o]^=s,t[9+l]^=s,t[18+Math.floor(o/3)*3+Math.floor(l/3)]^=s}return!1},ae=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(!e[t][o].value)return!1;return!0},ke=e=>ae(e)&&!ce(e),le=e=>JSON.parse(JSON.stringify(e)),ge=(e,t,o,l)=>{if(!l||e[t][o].value)return!1;const n=e[t][o].notes.indexOf(l);return n===-1?!1:(e[t][o].notes.splice(n,1),!0)},Rt=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].notes=[]},it=(e,t)=>{const{row:o,col:l}=t;if(e[o][l].value){e[o][l].notes=[];return}e[o][l].notes=[1,2,3,4,5,6,7,8,9];const n=Math.floor(l/3),s=Math.floor(o/3);for(let i=0;i<9;i++){const f=e[i][l].value;ge(e,o,l,f);const r=e[o][i].value;ge(e,o,l,r);const h=Math.floor(i/3),c=i%3,_=e[3*s+h][3*n+c].value;ge(e,o,l,_)}return e[o][l].notes},Le=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)it(e,{row:t,col:o})},at=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].fixed||(e[t][o].value=void 0,e[t][o].notes=[])},jt=e=>{if(ae(e)||ce(e))return{grid:e,hint:null};const t=le(e);at(t);const o=ut(t);for(let c=0;c<9;c++)for(let _=0;_<9;_++)if(e[c][_].value!==void 0&&e[c][_].value!==o[c][_].value)return e[c][_].value=o[c][_].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:c,col:_,notes:[o[c][_].value]}]}};const l=le(e);Le(l);const s=rt(l).find(c=>["lone_single","hidden_single_col","hidden_single_row","hidden_single_square"].includes(c.type));if(s&&s.cause.length){const c=s.cause.pop(),{row:_,col:d}=c;return e[_][d].value=o[_][d].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:_,col:d,notes:[e[_][d].value]}]}}}const i=[];for(let c=0;c<9;c++)for(let _=0;_<9;_++)e[c][_].value===void 0&&i.push({x:_,y:c});if(!i.length)return{grid:e,hint:null};const f=Math.floor(Math.random()*i.length),r=i[f],h=o[r.y][r.x].value;return e[r.y][r.x].value=h,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:r.y,col:r.x,notes:[h]}]}}},$e=(e,t,o)=>{const{col:l,row:n}=t;if(e[n][l].value!==void 0)return!1;const s=Math.floor(l/3),i=Math.floor(n/3);for(let f=0;f<9;f++){if(e[n][f].value===o||e[f][l].value===o)return!1;const r=Math.floor(f/3),h=f%3;if(e[3*i+r][3*s+h].value===o)return!1}return!0},ut=e=>{const t=le(e);return Xe(t),t},Xe=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(e[t][o].value===void 0){for(let l=1;l<=9;l++)if($e(e,{row:t,col:o},l)){if(e[t][o].value=l,Xe(e))return!0;e[t][o].value=void 0}return!1}return!0};let be=0;const Ke=1e4,ft=e=>{if(ae(e))return ke(e)?"unique":"none";const t=le(e);let o=0;for(let n=0;n<9;n++)for(let s=0;s<9;s++)e[n][s].value!==void 0&&o++;const l=[];return be=0,We(t,l,o),be>=Ke?"unreachable":l.length===0?"none":l.length===1?"unique":"notUnique"},We=(e,t,o)=>{if(!(be++>=Ke)){for(let l=0;l<9;l++)for(let n=0;n<9;n++)if(e[l][n].value===void 0){for(let s=1;s<=9;s++)if($e(e,{row:l,col:n},s)){if(e[l][n].value=s,We(e,t,o+1)&&(o===80&&t.push(le(e)),t.length>=2))return!0;e[l][n].value=void 0}return!1}return!0}},Gt=(e,t)=>{if(ce(e)||ae(e))return e;const o=le(e);Le(o);const l=[o];for(;l.length;){const n=l.pop();if(t&&t.push(le(n)),ce(n))continue;if(ae(n)){if(ke(n))return n;continue}const s=dt(n);if(!s.length)continue;const i=Math.floor(Math.random()*s.length),f=s[i],r=le(n);r[f.row][f.col].notes=r[f.row][f.col].notes.filter(h=>h!==f.value),l.push(r),ht(n,f),ze(n),l.push(n)}return o},we=(e,t,o,l)=>{if(e[t][o].value)return!1;const n=e[t][o].notes.indexOf(l);return n===-1?!1:(e[t][o].notes.splice(n,1),e[t][o].notes.length===1?(e[t][o].value=e[t][o].notes.pop(),!0):!1)},ze=e=>{if(ae(e)||ce(e))return;let t=!1;for(let o=0;o<9;o++)for(let l=0;l<9;l++){const{value:n}=e[o][l];if(!n)continue;for(let f=0;f<9;f++)t=t||we(e,f,l,n),t=t||we(e,o,f,n);const s=Math.floor(l/3),i=Math.floor(o/3);for(let f=0;f<3;f++)for(let r=0;r<3;r++)t=t||we(e,3*i+f,3*s+r,n)}t&&ze(e)},ct=(e,t)=>{const{row:o,col:l,value:n}=t;return!(e[o][l].value||!e[o][l].notes.includes(n))},ht=(e,t)=>{if(!ct(e,t))return;const{row:o,col:l,value:n}=t;e[o][l].value=n,e[o][l].notes=[]},dt=e=>{let t=[],o=9;for(let l=0;l<9;l++)for(let n=0;n<9;n++){if(e[l][n].value!==void 0)continue;const{notes:s}=e[l][n];if(s.length<o&&(o=s.length,t=[]),s.length===o)for(const i of e[l][n].notes)t.push({row:l,col:n,value:i})}return t},Bt=()=>{const e=[];for(let t=0;t<9;t++){e.push([]);for(let o=0;o<9;o++){const l={value:void 0,fixed:!1,notes:[1,2,3,4,5,6,7,8,9]};e[e.length-1].push(l)}}return e};function Ve(e,t,o){const l=e.slice();return l[23]=t[o],l}function ye(e,t,o){const l=e.slice();return l[23]=t[o],l}function Ie(e){let t=e[2],o,l=Re(e);return{c(){l.c(),o=te()},l(n){l.l(n),o=te()},m(n,s){l.m(n,s),Y(n,o,s)},p(n,s){s&4&&se(t,t=n[2])?(l.d(1),l=Re(n),l.c(),l.m(o.parentNode,o)):l.p(n,s)},d(n){n&&y(o),l.d(n)}}}function Te(e){let t,o,l,n;function s(){return e[17](e[23])}return{c(){t=j("button"),o=Z(e[23]),this.h()},l(i){t=G(i,"BUTTON",{class:!0});var f=H(t);o=x(f,e[23]),f.forEach(y),this.h()},h(){P(t,"class","choice-btn svelte-1v5q25"),z(t,"selected",e[5]===e[23])},m(i,f){Y(i,t,f),w(t,o),l||(n=Q(t,"click",s),l=!0)},p(i,f){e=i,f&32&&z(t,"selected",e[5]===e[23])},d(i){i&&y(t),l=!1,n()}}}function De(e){let t,o,l,n;function s(){return e[18](e[23])}return{c(){t=j("button"),o=Z(e[23]),this.h()},l(i){t=G(i,"BUTTON",{class:!0});var f=H(t);o=x(f,e[23]),f.forEach(y),this.h()},h(){P(t,"class","choice-btn svelte-1v5q25"),z(t,"selected",e[4][e[23]-1])},m(i,f){Y(i,t,f),w(t,o),l||(n=Q(t,"click",s),l=!0)},p(i,f){e=i,f&16&&z(t,"selected",e[4][e[23]-1])},d(i){i&&y(t),l=!1,n()}}}function Oe(e){let t=e[4],o,l=De(e);return{c(){l.c(),o=te()},l(n){l.l(n),o=te()},m(n,s){l.m(n,s),Y(n,o,s)},p(n,s){s&16&&se(t,t=n[4])?(l.d(1),l=De(n),l.c(),l.m(o.parentNode,o)):l.p(n,s)},d(n){n&&y(o),l.d(n)}}}function Re(e){let t,o,l,n=e[6]?"Valeur":"Value",s,i,f,r="âœ–",h,c,_,d,b="Notes",g,S,E,q,N,v=e[6]?"Notes auto":"Auto notes",a,u,T,A=e[6]?"Tout supprimer":"Clear",m,C,I,B=fe([1,2,3,4,5,6,7,8,9]),U=[];for(let D=0;D<9;D+=1)U[D]=Te(ye(e,B,D));let M=fe([1,2,3,4,5,6,7,8,9]),p=[];for(let D=0;D<9;D+=1)p[D]=Oe(Ve(e,M,D));return{c(){t=j("div"),o=j("div"),l=j("h3"),s=Z(n),i=O(),f=j("button"),f.textContent=r,h=O(),c=j("div");for(let D=0;D<9;D+=1)U[D].c();_=O(),d=j("h3"),d.textContent=b,g=O(),S=j("div");for(let D=0;D<9;D+=1)p[D].c();E=O(),q=j("div"),N=j("button"),a=Z(v),u=O(),T=j("button"),m=Z(A),this.h()},l(D){t=G(D,"DIV",{role:!0,class:!0,style:!0});var J=H(t);o=G(J,"DIV",{class:!0});var k=H(o);l=G(k,"H3",{class:!0});var ee=H(l);s=x(ee,n),i=R(ee),f=G(ee,"BUTTON",{"data-svelte-h":!0}),ue(f)!=="svelte-15i1wwz"&&(f.textContent=r),ee.forEach(y),h=R(k),c=G(k,"DIV",{class:!0});var Ne=H(c);for(let re=0;re<9;re+=1)U[re].l(Ne);Ne.forEach(y),_=R(k),d=G(k,"H3",{class:!0,"data-svelte-h":!0}),ue(d)!=="svelte-2havtt"&&(d.textContent=b),g=R(k),S=G(k,"DIV",{class:!0});var Ee=H(S);for(let re=0;re<9;re+=1)p[re].l(Ee);Ee.forEach(y),E=R(k),q=G(k,"DIV",{class:!0});var _e=H(q);N=G(_e,"BUTTON",{});var qe=H(N);a=x(qe,v),qe.forEach(y),u=R(_e),T=G(_e,"BUTTON",{});var Ue=H(T);m=x(Ue,A),Ue.forEach(y),_e.forEach(y),k.forEach(y),J.forEach(y),this.h()},h(){P(l,"class","title-bar svelte-1v5q25"),P(c,"class","grid svelte-1v5q25"),P(d,"class","svelte-1v5q25"),P(S,"class","grid svelte-1v5q25"),P(q,"class","cell-buttons svelte-1v5q25"),P(o,"class","contents svelte-1v5q25"),P(t,"role","dialog"),P(t,"class","modal svelte-1v5q25"),pe(t,"top",e[2]+"px"),pe(t,"left",e[3]+"px")},m(D,J){Y(D,t,J),w(t,o),w(o,l),w(l,s),w(l,i),w(l,f),w(o,h),w(o,c);for(let k=0;k<9;k+=1)U[k]&&U[k].m(c,null);w(o,_),w(o,d),w(o,g),w(o,S);for(let k=0;k<9;k+=1)p[k]&&p[k].m(S,null);w(o,E),w(o,q),w(q,N),w(N,a),w(q,u),w(q,T),w(T,m),C||(I=[Q(f,"click",Fe),Q(N,"click",function(){Ye(e[1])&&e[1].apply(this,arguments)}),Q(T,"click",e[9]),Q(t,"mousedown",e[11])],C=!0)},p(D,J){if(e=D,J&64&&n!==(n=e[6]?"Valeur":"Value")&&ve(s,n),J&160){B=fe([1,2,3,4,5,6,7,8,9]);let k;for(k=0;k<9;k+=1){const ee=ye(e,B,k);U[k]?U[k].p(ee,J):(U[k]=Te(ee),U[k].c(),U[k].m(c,null))}for(;k<9;k+=1)U[k].d(1)}if(J&144){M=fe([1,2,3,4,5,6,7,8,9]);let k;for(k=0;k<9;k+=1){const ee=Ve(e,M,k);p[k]?p[k].p(ee,J):(p[k]=Oe(ee),p[k].c(),p[k].m(S,null))}for(;k<9;k+=1)p[k].d(1)}J&64&&v!==(v=e[6]?"Notes auto":"Auto notes")&&ve(a,v),J&64&&A!==(A=e[6]?"Tout supprimer":"Clear")&&ve(m,A),J&4&&pe(t,"top",e[2]+"px"),J&8&&pe(t,"left",e[3]+"px")},d(D){D&&y(t),Ce(U,D),Ce(p,D),C=!1,Pe(I)}}}function _t(e){let t,o,l,n=e[0]&&Ie(e);return{c(){n&&n.c(),t=te()},l(s){n&&n.l(s),t=te()},m(s,i){n&&n.m(s,i),Y(s,t,i),o||(l=[Q(window,"keydown",e[8]),Q(window,"keyup",e[10]),Q(window,"mouseup",e[13]),Q(window,"mousemove",e[12])],o=!0)},p(s,[i]){s[0]?n?n.p(s,i):(n=Ie(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ie,o:ie,d(s){s&&y(t),n&&n.d(s),o=!1,Pe(l)}}}function pt(e,t,o){let l;He(e,Ze,C=>o(21,l=C));let{isOpen:n}=t,{onSelectionUpdated:s}=t,{onComputeCellNotes:i}=t,{initialState:f}=t,{cellBoundingRect:r}=t;const h=C=>{const I=document.body.getBoundingClientRect(),B=300,U=600;let M=C.top;M+U>I.height&&(M=I.height-U);let p=C.right;return p>I.width/2&&(p=C.left-B-C.width),{top:M,left:Math.max(0,p)}};let{top:c,left:_}=h(r);f.notes.length>0;let d=new Array(9).fill(!1).map((C,I)=>f.notes.includes(I+1)),b=f.value;const g=(C,I)=>{if(I==="notes"){o(4,d[C-1]=!d[C-1],d),o(4,d),o(5,b=void 0),s({notes:d.map((B,U)=>U+1).filter(B=>d[B-1])});return}if(b===C){s({clear:!0}),o(5,b=void 0),o(4,d=[]);return}o(5,b=C),o(4,d=[]),s({value:b}),Fe()},S=C=>{const I="!@#$%^&*(",B=C.getModifierState("Shift");let U;if(U=C.key,U==="Backspace"){E();return}I.includes(U)&&(U=I.indexOf(U)+1),!isNaN(Number(U))&&g(Number(U),B?"notes":"value")},E=()=>{s({clear:!0}),o(4,d=new Array(9).fill(!1).map((C,I)=>!1)),o(5,b=void 0)},q=C=>{};let N=!1;function v(){N=!0}function a(C){N&&(o(3,_+=C.movementX),o(2,c+=C.movementY))}function u(){N=!1}let T=!1;Je(()=>{o(6,T=l.url.searchParams.has("fr"))});const A=C=>g(C,"value"),m=C=>g(C,"notes");return e.$$set=C=>{"isOpen"in C&&o(0,n=C.isOpen),"onSelectionUpdated"in C&&o(14,s=C.onSelectionUpdated),"onComputeCellNotes"in C&&o(1,i=C.onComputeCellNotes),"initialState"in C&&o(15,f=C.initialState),"cellBoundingRect"in C&&o(16,r=C.cellBoundingRect)},[n,i,c,_,d,b,T,g,S,E,q,v,a,u,s,f,r,A,m]}class vt extends he{constructor(t){super(),de(this,t,pt,_t,se,{isOpen:0,onSelectionUpdated:14,onComputeCellNotes:1,initialState:15,cellBoundingRect:16})}}const mt=xe();function je(e,t,o){const l=e.slice();return l[16]=t[o],l}function gt(e){let t,o,l,n,s=fe([1,2,3,4,5,6,7,8,9]),i=[];for(let f=0;f<9;f+=1)i[f]=Be(je(e,s,f));return{c(){t=j("button");for(let f=0;f<9;f+=1)i[f].c();this.h()},l(f){t=G(f,"BUTTON",{class:!0});var r=H(t);for(let h=0;h<9;h+=1)i[h].l(r);r.forEach(y),this.h()},h(){P(t,"class",o=me("cell notes "+e[2]+" "+e[7])+" svelte-12ewoli")},m(f,r){Y(f,t,r);for(let h=0;h<9;h+=1)i[h]&&i[h].m(t,null);e[12](t),l||(n=Q(t,"click",e[4]),l=!0)},p(f,r){if(r&105){s=fe([1,2,3,4,5,6,7,8,9]);let h;for(h=0;h<9;h+=1){const c=je(f,s,h);i[h]?i[h].p(c,r):(i[h]=Be(c),i[h].c(),i[h].m(t,null))}for(;h<9;h+=1)i[h].d(1)}r&4&&o!==(o=me("cell notes "+f[2]+" "+f[7])+" svelte-12ewoli")&&P(t,"class",o)},d(f){f&&y(t),Ce(i,f),e[12](null),l=!1,n()}}}function wt(e){let t,o=e[0].value+"",l,n,s,i,f;return{c(){t=j("button"),l=Z(o),this.h()},l(r){t=G(r,"BUTTON",{class:!0});var h=H(t);l=x(h,o),h.forEach(y),this.h()},h(){P(t,"class",n=me("cell value "+(e[2]==="auto-hint"?e[2]:"")+" "+e[7])+" svelte-12ewoli"),t.disabled=s=e[0].fixed,z(t,"fixed",e[0].fixed),z(t,"highlight",e[3]!==void 0&&e[3]===e[0].value)},m(r,h){Y(r,t,h),w(t,l),e[11](t),i||(f=Q(t,"click",e[4]),i=!0)},p(r,h){h&1&&o!==(o=r[0].value+"")&&ve(l,o),h&4&&n!==(n=me("cell value "+(r[2]==="auto-hint"?r[2]:"")+" "+r[7])+" svelte-12ewoli")&&P(t,"class",n),h&1&&s!==(s=r[0].fixed)&&(t.disabled=s),h&5&&z(t,"fixed",r[0].fixed),h&13&&z(t,"highlight",r[3]!==void 0&&r[3]===r[0].value)},d(r){r&&y(t),e[11](null),i=!1,f()}}}function Ge(e){let t;return{c(){t=Z(e[16])},l(o){t=x(o,e[16])},m(o,l){Y(o,t,l)},d(o){o&&y(t)}}}function Be(e){let t,o=e[0].notes.includes(e[16]),l,n=o&&Ge(e);return{c(){t=j("div"),n&&n.c(),l=O(),this.h()},l(s){t=G(s,"DIV",{class:!0});var i=H(t);n&&n.l(i),l=R(i),i.forEach(y),this.h()},h(){P(t,"class","note svelte-12ewoli"),z(t,"hinted-note",e[5].includes(e[16])),z(t,"hinted-remove-note",e[6].includes(e[16])),z(t,"highlight",e[3]!==void 0&&e[3]===e[16])},m(s,i){Y(s,t,i),n&&n.m(t,null),w(t,l)},p(s,i){i&1&&(o=s[0].notes.includes(s[16])),o?n||(n=Ge(s),n.c(),n.m(t,l)):n&&(n.d(1),n=null),i&8&&z(t,"highlight",s[3]!==void 0&&s[3]===s[16])},d(s){s&&y(t),n&&n.d()}}}function Ct(e){let t;function o(s,i){return s[0].value?wt:gt}let l=o(e),n=l(e);return{c(){n.c(),t=te()},l(s){n.l(s),t=te()},m(s,i){n.m(s,i),Y(s,t,i)},p(s,[i]){l===(l=o(s))&&n?n.p(s,i):(n.d(1),n=l(s),n&&(n.c(),n.m(t.parentNode,t)))},i:ie,o:ie,d(s){s&&y(t),n.d(s)}}}function bt(e,t,o){let l;He(e,mt,v=>o(3,l=v));let{cell:n}=t,{position:s}=t,{gridErrors:i}=t,{hints:f=[]}=t;const r=Me(),h=Me();let c;const _=()=>{Qe(vt,{initialState:n,onSelectionUpdated:u=>{r("cellUpdate",{cell:n,update:u})},onComputeCellNotes:()=>{h("computeCellNotes",{position:s})},cellBoundingRect:c.getBoundingClientRect()})};let d="";const b=[],g=[];for(const v of f){for(const a of v.cause)a.row===s.row&&a.col===s.col&&(v.type==="naked_pair"?d="naked-pair-hint":v.type==="last_auto_hint"?d="auto-hint":d="lone-hint",b.push(...a.notes));for(const a of v.effect)a.row===s.row&&a.col===s.col&&g.push(...a.notes)}const S=[];for(const v of i){const a=3*Math.floor(s.row/3)+Math.floor(s.col/3),u=3*Math.floor(v.row/3)+Math.floor(v.col/3);if(v.col===s.col&&v.row===s.row||v.type==="column"&&v.col===s.col&&v.value===n.value||v.type==="row"&&v.row===s.row&&v.value===n.value||v.type==="square"&&a===u&&v.value===n.value){S.push("is-error-cell");continue}v.type==="column"&&v.col===s.col&&S.push("is-error-col"),v.type==="row"&&v.row===s.row&&S.push("is-error-row"),v.type==="square"&&a===u&&S.push("is-error-square")}let E=S.join(" ");function q(v){Se[v?"unshift":"push"](()=>{c=v,o(1,c)})}function N(v){Se[v?"unshift":"push"](()=>{c=v,o(1,c)})}return e.$$set=v=>{"cell"in v&&o(0,n=v.cell),"position"in v&&o(8,s=v.position),"gridErrors"in v&&o(9,i=v.gridErrors),"hints"in v&&o(10,f=v.hints)},[n,c,d,l,_,b,g,E,s,i,f,q,N]}class oe extends he{constructor(t){super(),de(this,t,bt,Ct,se,{cell:0,position:8,gridErrors:9,hints:10})}}function kt(e){let t,o,l,n,s,i,f,r,h,c,_,d,b,g,S,E,q,N,v;return o=new oe({props:{cell:e[6][0],hints:e[1],gridErrors:e[0],position:{row:e[4],col:e[5]}}}),o.$on("cellUpdate",e[9]),o.$on("computeCellNotes",e[10]),n=new oe({props:{cell:e[6][1],hints:e[1],gridErrors:e[0],position:{row:e[4],col:e[5]+1}}}),n.$on("cellUpdate",e[11]),n.$on("computeCellNotes",e[12]),i=new oe({props:{cell:e[6][2],hints:e[1],gridErrors:e[0],position:{row:e[4],col:e[5]+2}}}),i.$on("cellUpdate",e[13]),i.$on("computeCellNotes",e[14]),r=new oe({props:{cell:e[6][3],hints:e[1],gridErrors:e[0],position:{row:e[4]+1,col:e[5]}}}),r.$on("cellUpdate",e[15]),r.$on("computeCellNotes",e[16]),c=new oe({props:{cell:e[6][4],hints:e[1],gridErrors:e[0],position:{row:e[4]+1,col:e[5]+1}}}),c.$on("cellUpdate",e[17]),c.$on("computeCellNotes",e[18]),d=new oe({props:{cell:e[6][5],hints:e[1],gridErrors:e[0],position:{row:e[4]+1,col:e[5]+2}}}),d.$on("cellUpdate",e[19]),d.$on("computeCellNotes",e[20]),g=new oe({props:{cell:e[6][6],hints:e[1],gridErrors:e[0],position:{row:e[4]+2,col:e[5]}}}),g.$on("cellUpdate",e[21]),g.$on("computeCellNotes",e[22]),E=new oe({props:{cell:e[6][7],hints:e[1],gridErrors:e[0],position:{row:e[4]+2,col:e[5]+1}}}),E.$on("cellUpdate",e[23]),E.$on("computeCellNotes",e[24]),N=new oe({props:{cell:e[6][8],hints:e[1],gridErrors:e[0],position:{row:e[4]+2,col:e[5]+2}}}),N.$on("cellUpdate",e[25]),N.$on("computeCellNotes",e[26]),{c(){t=j("div"),F(o.$$.fragment),l=O(),F(n.$$.fragment),s=O(),F(i.$$.fragment),f=O(),F(r.$$.fragment),h=O(),F(c.$$.fragment),_=O(),F(d.$$.fragment),b=O(),F(g.$$.fragment),S=O(),F(E.$$.fragment),q=O(),F(N.$$.fragment),this.h()},l(a){t=G(a,"DIV",{class:!0});var u=H(t);L(o.$$.fragment,u),l=R(u),L(n.$$.fragment,u),s=R(u),L(i.$$.fragment,u),f=R(u),L(r.$$.fragment,u),h=R(u),L(c.$$.fragment,u),_=R(u),L(d.$$.fragment,u),b=R(u),L(g.$$.fragment,u),S=R(u),L(E.$$.fragment,u),q=R(u),L(N.$$.fragment,u),u.forEach(y),this.h()},h(){P(t,"class","cell-grid svelte-1nq1cl9"),z(t,"borderLeftRight",e[2]),z(t,"borderTopBottom",e[3])},m(a,u){Y(a,t,u),$(o,t,null),w(t,l),$(n,t,null),w(t,s),$(i,t,null),w(t,f),$(r,t,null),w(t,h),$(c,t,null),w(t,_),$(d,t,null),w(t,b),$(g,t,null),w(t,S),$(E,t,null),w(t,q),$(N,t,null),v=!0},p(a,[u]){const T={};u&2&&(T.hints=a[1]),u&1&&(T.gridErrors=a[0]),o.$set(T);const A={};u&2&&(A.hints=a[1]),u&1&&(A.gridErrors=a[0]),n.$set(A);const m={};u&2&&(m.hints=a[1]),u&1&&(m.gridErrors=a[0]),i.$set(m);const C={};u&2&&(C.hints=a[1]),u&1&&(C.gridErrors=a[0]),r.$set(C);const I={};u&2&&(I.hints=a[1]),u&1&&(I.gridErrors=a[0]),c.$set(I);const B={};u&2&&(B.hints=a[1]),u&1&&(B.gridErrors=a[0]),d.$set(B);const U={};u&2&&(U.hints=a[1]),u&1&&(U.gridErrors=a[0]),g.$set(U);const M={};u&2&&(M.hints=a[1]),u&1&&(M.gridErrors=a[0]),E.$set(M);const p={};u&2&&(p.hints=a[1]),u&1&&(p.gridErrors=a[0]),N.$set(p)},i(a){v||(X(o.$$.fragment,a),X(n.$$.fragment,a),X(i.$$.fragment,a),X(r.$$.fragment,a),X(c.$$.fragment,a),X(d.$$.fragment,a),X(g.$$.fragment,a),X(E.$$.fragment,a),X(N.$$.fragment,a),v=!0)},o(a){K(o.$$.fragment,a),K(n.$$.fragment,a),K(i.$$.fragment,a),K(r.$$.fragment,a),K(c.$$.fragment,a),K(d.$$.fragment,a),K(g.$$.fragment,a),K(E.$$.fragment,a),K(N.$$.fragment,a),v=!1},d(a){a&&y(t),W(o),W(n),W(i),W(r),W(c),W(d),W(g),W(E),W(N)}}}function Nt(e,t,o){let{position:l}=t,{grid:n}=t,{gridErrors:s}=t,{hints:i=[]}=t;const f=[1,4,7].includes(l),r=[3,4,5].includes(l),h=3*Math.floor(l/3),c=3*(l%3),_=et(l,n);function d(p){V.call(this,e,p)}function b(p){V.call(this,e,p)}function g(p){V.call(this,e,p)}function S(p){V.call(this,e,p)}function E(p){V.call(this,e,p)}function q(p){V.call(this,e,p)}function N(p){V.call(this,e,p)}function v(p){V.call(this,e,p)}function a(p){V.call(this,e,p)}function u(p){V.call(this,e,p)}function T(p){V.call(this,e,p)}function A(p){V.call(this,e,p)}function m(p){V.call(this,e,p)}function C(p){V.call(this,e,p)}function I(p){V.call(this,e,p)}function B(p){V.call(this,e,p)}function U(p){V.call(this,e,p)}function M(p){V.call(this,e,p)}return e.$$set=p=>{"position"in p&&o(7,l=p.position),"grid"in p&&o(8,n=p.grid),"gridErrors"in p&&o(0,s=p.gridErrors),"hints"in p&&o(1,i=p.hints)},[s,i,f,r,h,c,_,l,n,d,b,g,S,E,q,N,v,a,u,T,A,m,C,I,B,U,M]}class ne extends he{constructor(t){super(),de(this,t,Nt,kt,se,{position:7,grid:8,gridErrors:0,hints:1})}}function Et(e){let t,o,l,n,s,i,f,r,h,c,_,d,b,g,S,E,q,N,v;return o=new ne({props:{position:0,hints:e[2],gridErrors:e[1],grid:e[0]}}),o.$on("cellUpdate",e[3]),o.$on("computeCellNotes",e[4]),n=new ne({props:{position:1,hints:e[2],gridErrors:e[1],grid:e[0]}}),n.$on("cellUpdate",e[5]),n.$on("computeCellNotes",e[6]),i=new ne({props:{position:2,hints:e[2],gridErrors:e[1],grid:e[0]}}),i.$on("cellUpdate",e[7]),i.$on("computeCellNotes",e[8]),r=new ne({props:{position:3,hints:e[2],gridErrors:e[1],grid:e[0]}}),r.$on("cellUpdate",e[9]),r.$on("computeCellNotes",e[10]),c=new ne({props:{position:4,hints:e[2],gridErrors:e[1],grid:e[0]}}),c.$on("cellUpdate",e[11]),c.$on("computeCellNotes",e[12]),d=new ne({props:{position:5,hints:e[2],gridErrors:e[1],grid:e[0]}}),d.$on("cellUpdate",e[13]),d.$on("computeCellNotes",e[14]),g=new ne({props:{position:6,hints:e[2],gridErrors:e[1],grid:e[0]}}),g.$on("cellUpdate",e[15]),g.$on("computeCellNotes",e[16]),E=new ne({props:{position:7,hints:e[2],gridErrors:e[1],grid:e[0]}}),E.$on("cellUpdate",e[17]),E.$on("computeCellNotes",e[18]),N=new ne({props:{position:8,hints:e[2],gridErrors:e[1],grid:e[0]}}),N.$on("cellUpdate",e[19]),N.$on("computeCellNotes",e[20]),{c(){t=j("div"),F(o.$$.fragment),l=O(),F(n.$$.fragment),s=O(),F(i.$$.fragment),f=O(),F(r.$$.fragment),h=O(),F(c.$$.fragment),_=O(),F(d.$$.fragment),b=O(),F(g.$$.fragment),S=O(),F(E.$$.fragment),q=O(),F(N.$$.fragment),this.h()},l(a){t=G(a,"DIV",{class:!0});var u=H(t);L(o.$$.fragment,u),l=R(u),L(n.$$.fragment,u),s=R(u),L(i.$$.fragment,u),f=R(u),L(r.$$.fragment,u),h=R(u),L(c.$$.fragment,u),_=R(u),L(d.$$.fragment,u),b=R(u),L(g.$$.fragment,u),S=R(u),L(E.$$.fragment,u),q=R(u),L(N.$$.fragment,u),u.forEach(y),this.h()},h(){P(t,"class","main-grid svelte-vli9ua")},m(a,u){Y(a,t,u),$(o,t,null),w(t,l),$(n,t,null),w(t,s),$(i,t,null),w(t,f),$(r,t,null),w(t,h),$(c,t,null),w(t,_),$(d,t,null),w(t,b),$(g,t,null),w(t,S),$(E,t,null),w(t,q),$(N,t,null),v=!0},p(a,[u]){const T={};u&4&&(T.hints=a[2]),u&2&&(T.gridErrors=a[1]),u&1&&(T.grid=a[0]),o.$set(T);const A={};u&4&&(A.hints=a[2]),u&2&&(A.gridErrors=a[1]),u&1&&(A.grid=a[0]),n.$set(A);const m={};u&4&&(m.hints=a[2]),u&2&&(m.gridErrors=a[1]),u&1&&(m.grid=a[0]),i.$set(m);const C={};u&4&&(C.hints=a[2]),u&2&&(C.gridErrors=a[1]),u&1&&(C.grid=a[0]),r.$set(C);const I={};u&4&&(I.hints=a[2]),u&2&&(I.gridErrors=a[1]),u&1&&(I.grid=a[0]),c.$set(I);const B={};u&4&&(B.hints=a[2]),u&2&&(B.gridErrors=a[1]),u&1&&(B.grid=a[0]),d.$set(B);const U={};u&4&&(U.hints=a[2]),u&2&&(U.gridErrors=a[1]),u&1&&(U.grid=a[0]),g.$set(U);const M={};u&4&&(M.hints=a[2]),u&2&&(M.gridErrors=a[1]),u&1&&(M.grid=a[0]),E.$set(M);const p={};u&4&&(p.hints=a[2]),u&2&&(p.gridErrors=a[1]),u&1&&(p.grid=a[0]),N.$set(p)},i(a){v||(X(o.$$.fragment,a),X(n.$$.fragment,a),X(i.$$.fragment,a),X(r.$$.fragment,a),X(c.$$.fragment,a),X(d.$$.fragment,a),X(g.$$.fragment,a),X(E.$$.fragment,a),X(N.$$.fragment,a),v=!0)},o(a){K(o.$$.fragment,a),K(n.$$.fragment,a),K(i.$$.fragment,a),K(r.$$.fragment,a),K(c.$$.fragment,a),K(d.$$.fragment,a),K(g.$$.fragment,a),K(E.$$.fragment,a),K(N.$$.fragment,a),v=!1},d(a){a&&y(t),W(o),W(n),W(i),W(r),W(c),W(d),W(g),W(E),W(N)}}}function qt(e,t,o){let{grid:l}=t,{gridErrors:n}=t,{hints:s=[]}=t;function i(m){V.call(this,e,m)}function f(m){V.call(this,e,m)}function r(m){V.call(this,e,m)}function h(m){V.call(this,e,m)}function c(m){V.call(this,e,m)}function _(m){V.call(this,e,m)}function d(m){V.call(this,e,m)}function b(m){V.call(this,e,m)}function g(m){V.call(this,e,m)}function S(m){V.call(this,e,m)}function E(m){V.call(this,e,m)}function q(m){V.call(this,e,m)}function N(m){V.call(this,e,m)}function v(m){V.call(this,e,m)}function a(m){V.call(this,e,m)}function u(m){V.call(this,e,m)}function T(m){V.call(this,e,m)}function A(m){V.call(this,e,m)}return e.$$set=m=>{"grid"in m&&o(0,l=m.grid),"gridErrors"in m&&o(1,n=m.gridErrors),"hints"in m&&o(2,s=m.hints)},[l,n,s,i,f,r,h,c,_,d,b,g,S,E,q,N,v,a,u,T,A]}class At extends he{constructor(t){super(),de(this,t,qt,Et,se,{grid:0,gridErrors:1,hints:2})}}function Ae(e){let t,o,l="grid has errors",n,s,i="grid is filled",f,r,h="grid is valid",c,_,d="grid has solutions",b,g,S=e[1]?"Has errors":"No errors",E,q,N,v=e[2]?"Is filled":"Not filled",a,u,T,A=e[3]?"Is valid":"Not valid",m,C,I,B;return{c(){t=j("div"),o=j("div"),o.textContent=l,n=O(),s=j("div"),s.textContent=i,f=O(),r=j("div"),r.textContent=h,c=O(),_=j("div"),_.textContent=d,b=O(),g=j("div"),E=Z(S),q=O(),N=j("div"),a=Z(v),u=O(),T=j("div"),m=Z(A),C=O(),I=j("div"),B=Z(e[4]),this.h()},l(U){t=G(U,"DIV",{class:!0});var M=H(t);o=G(M,"DIV",{"data-svelte-h":!0}),ue(o)!=="svelte-1hlqbal"&&(o.textContent=l),n=R(M),s=G(M,"DIV",{"data-svelte-h":!0}),ue(s)!=="svelte-ekf37s"&&(s.textContent=i),f=R(M),r=G(M,"DIV",{"data-svelte-h":!0}),ue(r)!=="svelte-16e0vl8"&&(r.textContent=h),c=R(M),_=G(M,"DIV",{"data-svelte-h":!0}),ue(_)!=="svelte-1tjrozg"&&(_.textContent=d),b=R(M),g=G(M,"DIV",{class:!0});var p=H(g);E=x(p,S),p.forEach(y),q=R(M),N=G(M,"DIV",{class:!0});var D=H(N);a=x(D,v),D.forEach(y),u=R(M),T=G(M,"DIV",{class:!0});var J=H(T);m=x(J,A),J.forEach(y),C=R(M),I=G(M,"DIV",{class:!0});var k=H(I);B=x(k,e[4]),k.forEach(y),M.forEach(y),this.h()},h(){P(g,"class","status svelte-1csoeu4"),z(g,"red",e[1]),P(N,"class","status svelte-1csoeu4"),z(N,"red",!e[2]),P(T,"class","status svelte-1csoeu4"),z(T,"red",!e[3]),P(I,"class","status svelte-1csoeu4"),z(I,"red",e[4]!=="unique"),P(t,"class","grid-status svelte-1csoeu4")},m(U,M){Y(U,t,M),w(t,o),w(t,n),w(t,s),w(t,f),w(t,r),w(t,c),w(t,_),w(t,b),w(t,g),w(g,E),w(t,q),w(t,N),w(N,a),w(t,u),w(t,T),w(T,m),w(t,C),w(t,I),w(I,B)},p:ie,d(U){U&&y(t)}}}function Ut(e){let t=e[0],o,l=Ae(e);return{c(){l.c(),o=te()},l(n){l.l(n),o=te()},m(n,s){l.m(n,s),Y(n,o,s)},p(n,[s]){s&1&&se(t,t=n[0])?(l.d(1),l=Ae(n),l.c(),l.m(o.parentNode,o)):l.p(n,s)},i:ie,o:ie,d(n){n&&y(o),l.d(n)}}}function Mt(e,t,o){let{grid:l}=t,n=ce(l),s=ae(l),i=ke(l),f=ft(l);return e.$$set=r=>{"grid"in r&&o(0,l=r.grid)},[l,n,s,i,f]}class Pt extends he{constructor(t){super(),de(this,t,Mt,Ut,se,{grid:0})}}export{Pt as G,At as S,at as a,Rt as b,mt as c,le as d,Le as e,rt as f,Ot as g,Bt as h,Gt as i,ft as j,jt as p,it as r,ut as s,Dt as u};
