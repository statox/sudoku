import{s as ue,e as re,i as A,y as te,G as fe,d as N,C as Ae,D as He,o as Ke,f as T,l as oe,a as M,g as D,h as L,m as le,c as S,H as se,j as B,k as pe,I as w,M as We,n as ge,J as ke,L as X,N as Ie,p as qe,O as we,P as U}from"./scheduler.23345331.js";import{S as me,i as ve,b as K,d as W,m as Y,a as Q,t as Z,e as $}from"./index.9853a5a4.js";import{e as ce}from"./each.1adf8f5c.js";import{a as Pe,o as Ye}from"./store.0f3853ed.js";import{p as Qe}from"./stores.4bcec536.js";import{w as Ze}from"./singletons.94f7ba96.js";const $e=(e,t)=>{if(e<0||e>8)throw new Error(`unexpected square position: ${e}`);const o=Math.floor(e/3),n=e%3,l=3*o,s=3*n;return[t[l][s],t[l][s+1],t[l][s+2],t[l+1][s],t[l+1][s+1],t[l+1][s+2],t[l+2][s],t[l+2][s+1],t[l+2][s+2]]};function xe(e){return e.notes!==void 0}function et(e){return e.clear===!0}const Tt=(e,t)=>{if(e.fixed)throw new Error("Tried to update fixed cell");if(xe(t)){e.value=void 0,e.notes=[...t.notes];return}if(et(t)){e.notes=[],e.value=void 0;return}e.notes=[],e.value=t.value},tt=e=>{const t=[];for(let o=0;o<9;o++){const n={},l={},s={},r=3*Math.floor(o/3),f=3*(o%3);for(let u=0;u<9;u++){if(e[o][u].value===void 0){const C=e[o][u].notes;for(const g of C)n[g]||(n[g]=[]),n[g].push({row:o,col:u})}if(e[u][o].value===void 0){const C=e[u][o].notes;for(const g of C)l[g]||(l[g]=[]),l[g].push({row:u,col:o})}const d=Math.floor(u/3),h=u%3,p=r+d,m=f+h;if(e[p][m].value===void 0){const C=e[p][m].notes;for(const g of C)s[g]||(s[g]=[]),s[g].push({row:p,col:m})}}for(const u of Object.keys(n)){const d=Number(u);if(n[d].length===1){const{row:h,col:p}=n[d][0];t.push({type:"hidden_single_row",cause:[{row:h,col:p,notes:[d]}],effect:[{row:h,col:p,notes:e[h][p].notes.filter(m=>m!==d)}]})}}for(const u of Object.keys(l)){const d=Number(u);if(l[d].length===1){const{row:h,col:p}=l[d][0];t.push({type:"hidden_single_col",cause:[{row:h,col:p,notes:[d]}],effect:[{row:h,col:p,notes:e[h][p].notes.filter(m=>m!==d)}]})}}for(const u of Object.keys(s)){const d=Number(u);if(s[d].length===1){const{row:h,col:p}=s[d][0];t.push({type:"hidden_single_square",cause:[{row:h,col:p,notes:[d]}],effect:[{row:h,col:p,notes:e[h][p].notes.filter(m=>m!==d)}]})}}}return t},ot=e=>{const t=[];for(let o=0;o<9;o++)for(let n=0;n<9;n++)e[o][n].value===void 0&&e[o][n].notes.length===1&&t.push({type:"lone_single",cause:[{row:o,col:n,notes:[e[o][n].notes[0]]}],effect:[]});return t},lt=e=>{const t=[];for(let o=0;o<9;o++){const n={},l={},s={},r=3*Math.floor(o/3),f=3*(o%3);for(let u=0;u<9;u++){if(e[o][u].value===void 0&&e[o][u].notes.length===2){const C=e[o][u].notes.join(",");if(!n[C])n[C]={row:o,col:u};else{const g={row:o,col:u,notes:[...e[o][u].notes]},q={row:n[C].row,col:n[C].col,notes:[...e[o][u].notes]},k=[];for(let E=0;E<9;E++)e[o][E].value!==void 0||e[o][E].notes.join(",")===C||k.push({row:o,col:E,notes:[...e[o][u].notes]});t.push({type:"naked_pair",cause:[g,q],effect:k})}}if(e[u][o].value===void 0&&e[u][o].notes.length===2){const C=e[u][o].notes.join(",");if(!l[C])l[C]={row:u,col:o};else{const g={row:u,col:o,notes:[...e[u][o].notes]},q={row:l[C].row,col:l[C].col,notes:[...e[u][o].notes]},k=[];for(let E=0;E<9;E++)e[E][o].value!==void 0||e[E][o].notes.join(",")===C||k.push({row:E,col:o,notes:[...e[u][o].notes]});t.push({type:"naked_pair",cause:[g,q],effect:k})}}const d=Math.floor(u/3),h=u%3,p=r+d,m=f+h;if(e[p][m].value===void 0&&e[p][m].notes.length===2){const C=e[p][m].notes.join(",");if(!s[C])s[C]={row:p,col:m};else{const g={row:p,col:m,notes:[...e[p][m].notes]},q={row:s[C].row,col:s[C].col,notes:[...e[p][m].notes]},k=[];for(let E=0;E<9;E++){const V=Math.floor(E/3),v=E%3,i=r+V,a=f+v;e[i][a].value!==void 0||e[i][a].notes.join(",")===C||k.push({row:i,col:a,notes:[...e[p][m].notes]})}t.push({type:"naked_pair",cause:[g,q],effect:k})}}}}return t},nt=e=>[...ot(e),...tt(e),...lt(e)],Dt=e=>{const t=[],o=new Array(27).fill(0);for(let n=0;n<9;n++)for(let l=0;l<9;l++){if(e[n][l].value===void 0)continue;const s=e[n][l].value,r=1<<s-1,f=o[n],u=o[9+l],d=o[18+Math.floor(n/3)*3+Math.floor(l/3)];f&r&&t.push({type:"row",col:l,row:n,value:s}),u&r&&t.push({type:"column",col:l,row:n,value:s}),d&r&&t.push({type:"square",col:l,row:n,value:s}),o[n]^=r,o[9+l]^=r,o[18+Math.floor(n/3)*3+Math.floor(l/3)]^=r}return t},Ee=e=>{const t=new Array(27).fill(0);for(let o=0;o<9;o++)for(let n=0;n<9;n++){if(e[o][n].value===void 0)continue;const s=1<<e[o][n].value-1,r=t[o],f=t[9+n],u=t[18+Math.floor(o/3)*3+Math.floor(n/3)];if(r&s||f&s||u&s)return!0;t[o]^=s,t[9+n]^=s,t[18+Math.floor(o/3)*3+Math.floor(n/3)]^=s}return!1},Ce=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(!e[t][o].value)return!1;return!0},Fe=e=>Ce(e)&&!Ee(e),_e=e=>JSON.parse(JSON.stringify(e)),be=(e,t,o,n)=>{if(!n||e[t][o].value)return!1;const l=e[t][o].notes.indexOf(n);return l===-1?!1:(e[t][o].notes.splice(l,1),!0)},yt=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].notes=[]},st=(e,t)=>{const{row:o,col:n}=t;if(e[o][n].value){e[o][n].notes=[];return}e[o][n].notes=[1,2,3,4,5,6,7,8,9];const l=Math.floor(n/3),s=Math.floor(o/3);for(let r=0;r<9;r++){const f=e[r][n].value;be(e,o,n,f);const u=e[o][r].value;be(e,o,n,u);const d=Math.floor(r/3),h=r%3,p=e[3*s+d][3*l+h].value;be(e,o,n,p)}return e[o][n].notes},rt=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)st(e,{row:t,col:o})},it=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)e[t][o].fixed||(e[t][o].value=void 0,e[t][o].notes=[])},Ot=e=>{if(Ce(e)||Ee(e))return{grid:e,hint:null};const t=_e(e);it(t);const o=at(t);for(let h=0;h<9;h++)for(let p=0;p<9;p++)if(e[h][p].value!==void 0&&e[h][p].value!==o[h][p].value)return e[h][p].value=o[h][p].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:h,col:p,notes:[o[h][p].value]}]}};const n=_e(e);rt(n);const s=nt(n).find(h=>["lone_single","hidden_single_col","hidden_single_row","hidden_single_square"].includes(h.type));if(s&&s.cause.length){const h=s.cause.pop(),{row:p,col:m}=h;return e[p][m].value=o[p][m].value,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:p,col:m,notes:[e[p][m].value]}]}}}const r=[];for(let h=0;h<9;h++)for(let p=0;p<9;p++)e[h][p].value===void 0&&r.push({x:p,y:h});if(!r.length)return{grid:e,hint:null};const f=Math.floor(Math.random()*r.length),u=r[f],d=o[u.y][u.x].value;return e[u.y][u.x].value=d,{grid:e,hint:{type:"last_auto_hint",effect:[],cause:[{row:u.y,col:u.x,notes:[d]}]}}},Le=(e,t,o)=>{const{col:n,row:l}=t;if(e[l][n].value!==void 0)return!1;const s=Math.floor(n/3),r=Math.floor(l/3);for(let f=0;f<9;f++){if(e[l][f].value===o||e[f][n].value===o)return!1;const u=Math.floor(f/3),d=f%3;if(e[3*r+u][3*s+d].value===o)return!1}return!0},at=e=>{const t=_e(e);return Xe(t),t},Xe=e=>{for(let t=0;t<9;t++)for(let o=0;o<9;o++)if(e[t][o].value===void 0){for(let n=1;n<=9;n++)if(Le(e,{row:t,col:o},n)){if(e[t][o].value=n,Xe(e))return!0;e[t][o].value=void 0}return!1}return!0};let Ne=0;const ze=1e4,ut=e=>{if(Ce(e))return Fe(e)?"unique":"none";const t=_e(e);let o=0;for(let l=0;l<9;l++)for(let s=0;s<9;s++)e[l][s].value!==void 0&&o++;const n=[];return Ne=0,Je(t,n,o),Ne>=ze?"unreachable":n.length===0?"none":n.length===1?"unique":"notUnique"},Je=(e,t,o)=>{if(!(Ne++>=ze)){for(let n=0;n<9;n++)for(let l=0;l<9;l++)if(e[n][l].value===void 0){for(let s=1;s<=9;s++)if(Le(e,{row:n,col:l},s)){if(e[n][l].value=s,Je(e,t,o+1)&&(o===80&&t.push(_e(e)),t.length>=2))return!0;e[n][l].value=void 0}return!1}return!0}},Gt=()=>{const e=[];for(let t=0;t<9;t++){e.push([]);for(let o=0;o<9;o++){const n={value:void 0,fixed:!1,notes:[]};e[e.length-1].push(n)}}return e},Rt=()=>{const e=[];for(let t=0;t<9;t++){e.push([]);for(let o=0;o<9;o++){const n={value:void 0,fixed:!1,notes:[1,2,3,4,5,6,7,8,9]};e[e.length-1].push(n)}}return e};function Ue(e,t,o){const n=e.slice();return n[23]=t[o],n}function Me(e,t,o){const n=e.slice();return n[23]=t[o],n}function Se(e){let t=e[2],o,n=ye(e);return{c(){n.c(),o=re()},l(l){n.l(l),o=re()},m(l,s){n.m(l,s),A(l,o,s)},p(l,s){s&4&&ue(t,t=l[2])?(n.d(1),n=ye(l),n.c(),n.m(o.parentNode,o)):n.p(l,s)},d(l){l&&N(o),n.d(l)}}}function je(e){let t,o,n,l;function s(){return e[17](e[23])}return{c(){t=T("button"),o=oe(e[23]),this.h()},l(r){t=D(r,"BUTTON",{class:!0});var f=L(t);o=le(f,e[23]),f.forEach(N),this.h()},h(){B(t,"class","choice-btn svelte-1v5q25"),X(t,"selected",e[5]===e[23])},m(r,f){A(r,t,f),w(t,o),n||(l=te(t,"click",s),n=!0)},p(r,f){e=r,f&32&&X(t,"selected",e[5]===e[23])},d(r){r&&N(t),n=!1,l()}}}function Te(e){let t,o,n,l;function s(){return e[18](e[23])}return{c(){t=T("button"),o=oe(e[23]),this.h()},l(r){t=D(r,"BUTTON",{class:!0});var f=L(t);o=le(f,e[23]),f.forEach(N),this.h()},h(){B(t,"class","choice-btn svelte-1v5q25"),X(t,"selected",e[4][e[23]-1])},m(r,f){A(r,t,f),w(t,o),n||(l=te(t,"click",s),n=!0)},p(r,f){e=r,f&16&&X(t,"selected",e[4][e[23]-1])},d(r){r&&N(t),n=!1,l()}}}function De(e){let t=e[4],o,n=Te(e);return{c(){n.c(),o=re()},l(l){n.l(l),o=re()},m(l,s){n.m(l,s),A(l,o,s)},p(l,s){s&16&&ue(t,t=l[4])?(n.d(1),n=Te(l),n.c(),n.m(o.parentNode,o)):n.p(l,s)},d(l){l&&N(o),n.d(l)}}}function ye(e){let t,o,n,l=e[6]?"Valeur":"Value",s,r,f,u="✖",d,h,p,m,C="Notes",g,q,k,E,V,v=e[6]?"Notes auto":"Auto notes",i,a,R,G=e[6]?"Tout supprimer":"Clear",H,c,y,O=ce([1,2,3,4,5,6,7,8,9]),I=[];for(let _=0;_<9;_+=1)I[_]=je(Me(e,O,_));let P=ce([1,2,3,4,5,6,7,8,9]),j=[];for(let _=0;_<9;_+=1)j[_]=De(Ue(e,P,_));return{c(){t=T("div"),o=T("div"),n=T("h3"),s=oe(l),r=M(),f=T("button"),f.textContent=u,d=M(),h=T("div");for(let _=0;_<9;_+=1)I[_].c();p=M(),m=T("h3"),m.textContent=C,g=M(),q=T("div");for(let _=0;_<9;_+=1)j[_].c();k=M(),E=T("div"),V=T("button"),i=oe(v),a=M(),R=T("button"),H=oe(G),this.h()},l(_){t=D(_,"DIV",{role:!0,class:!0,style:!0});var J=L(t);o=D(J,"DIV",{class:!0});var b=L(o);n=D(b,"H3",{class:!0});var z=L(n);s=le(z,l),r=S(z),f=D(z,"BUTTON",{"data-svelte-h":!0}),se(f)!=="svelte-15i1wwz"&&(f.textContent=u),z.forEach(N),d=S(b),h=D(b,"DIV",{class:!0});var x=L(h);for(let ne=0;ne<9;ne+=1)I[ne].l(x);x.forEach(N),p=S(b),m=D(b,"H3",{class:!0,"data-svelte-h":!0}),se(m)!=="svelte-2havtt"&&(m.textContent=C),g=S(b),q=D(b,"DIV",{class:!0});var ee=L(q);for(let ne=0;ne<9;ne+=1)j[ne].l(ee);ee.forEach(N),k=S(b),E=D(b,"DIV",{class:!0});var F=L(E);V=D(F,"BUTTON",{});var he=L(V);i=le(he,v),he.forEach(N),a=S(F),R=D(F,"BUTTON",{});var de=L(R);H=le(de,G),de.forEach(N),F.forEach(N),b.forEach(N),J.forEach(N),this.h()},h(){B(n,"class","title-bar svelte-1v5q25"),B(h,"class","grid svelte-1v5q25"),B(m,"class","svelte-1v5q25"),B(q,"class","grid svelte-1v5q25"),B(E,"class","cell-buttons svelte-1v5q25"),B(o,"class","contents svelte-1v5q25"),B(t,"role","dialog"),B(t,"class","modal svelte-1v5q25"),pe(t,"top",e[2]+"px"),pe(t,"left",e[3]+"px")},m(_,J){A(_,t,J),w(t,o),w(o,n),w(n,s),w(n,r),w(n,f),w(o,d),w(o,h);for(let b=0;b<9;b+=1)I[b]&&I[b].m(h,null);w(o,p),w(o,m),w(o,g),w(o,q);for(let b=0;b<9;b+=1)j[b]&&j[b].m(q,null);w(o,k),w(o,E),w(E,V),w(V,i),w(E,a),w(E,R),w(R,H),c||(y=[te(f,"click",Pe),te(V,"click",function(){We(e[1])&&e[1].apply(this,arguments)}),te(R,"click",e[9]),te(t,"mousedown",e[11])],c=!0)},p(_,J){if(e=_,J&64&&l!==(l=e[6]?"Valeur":"Value")&&ge(s,l),J&160){O=ce([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const z=Me(e,O,b);I[b]?I[b].p(z,J):(I[b]=je(z),I[b].c(),I[b].m(h,null))}for(;b<9;b+=1)I[b].d(1)}if(J&144){P=ce([1,2,3,4,5,6,7,8,9]);let b;for(b=0;b<9;b+=1){const z=Ue(e,P,b);j[b]?j[b].p(z,J):(j[b]=De(z),j[b].c(),j[b].m(q,null))}for(;b<9;b+=1)j[b].d(1)}J&64&&v!==(v=e[6]?"Notes auto":"Auto notes")&&ge(i,v),J&64&&G!==(G=e[6]?"Tout supprimer":"Clear")&&ge(H,G),J&4&&pe(t,"top",e[2]+"px"),J&8&&pe(t,"left",e[3]+"px")},d(_){_&&N(t),ke(I,_),ke(j,_),c=!1,Ae(y)}}}function ft(e){let t,o,n,l=e[0]&&Se(e);return{c(){l&&l.c(),t=re()},l(s){l&&l.l(s),t=re()},m(s,r){l&&l.m(s,r),A(s,t,r),o||(n=[te(window,"keydown",e[8]),te(window,"keyup",e[10]),te(window,"mouseup",e[13]),te(window,"mousemove",e[12])],o=!0)},p(s,[r]){s[0]?l?l.p(s,r):(l=Se(s),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:fe,o:fe,d(s){s&&N(t),l&&l.d(s),o=!1,Ae(n)}}}function ct(e,t,o){let n;He(e,Qe,c=>o(21,n=c));let{isOpen:l}=t,{onSelectionUpdated:s}=t,{onComputeCellNotes:r}=t,{initialState:f}=t,{cellBoundingRect:u}=t;const d=c=>{const y=document.body.getBoundingClientRect(),O=300,I=600;let P=c.top;P+I>y.height&&(P=y.height-I);let j=c.right;return j>y.width/2&&(j=c.left-O-c.width),{top:P,left:Math.max(0,j)}};let{top:h,left:p}=d(u);f.notes.length>0;let m=new Array(9).fill(!1).map((c,y)=>f.notes.includes(y+1)),C=f.value;const g=(c,y)=>{if(y==="notes"){o(4,m[c-1]=!m[c-1],m),o(4,m),o(5,C=void 0),s({notes:m.map((O,I)=>I+1).filter(O=>m[O-1])});return}if(C===c){s({clear:!0}),o(5,C=void 0),o(4,m=[]);return}o(5,C=c),o(4,m=[]),s({value:C}),Pe()},q=c=>{const y="!@#$%^&*(",O=c.getModifierState("Shift");let I;if(I=c.key,I==="Backspace"){k();return}y.includes(I)&&(I=y.indexOf(I)+1),!isNaN(Number(I))&&g(Number(I),O?"notes":"value")},k=()=>{s({clear:!0}),o(4,m=new Array(9).fill(!1).map((c,y)=>!1)),o(5,C=void 0)},E=c=>{};let V=!1;function v(){V=!0}function i(c){V&&(o(3,p+=c.movementX),o(2,h+=c.movementY))}function a(){V=!1}let R=!1;Ke(()=>{o(6,R=n.url.searchParams.has("fr"))});const G=c=>g(c,"value"),H=c=>g(c,"notes");return e.$$set=c=>{"isOpen"in c&&o(0,l=c.isOpen),"onSelectionUpdated"in c&&o(14,s=c.onSelectionUpdated),"onComputeCellNotes"in c&&o(1,r=c.onComputeCellNotes),"initialState"in c&&o(15,f=c.initialState),"cellBoundingRect"in c&&o(16,u=c.cellBoundingRect)},[l,r,h,p,m,C,R,g,q,k,E,v,i,a,s,f,u,G,H]}class ht extends me{constructor(t){super(),ve(this,t,ct,ft,ue,{isOpen:0,onSelectionUpdated:14,onComputeCellNotes:1,initialState:15,cellBoundingRect:16})}}const dt=Ze();function Oe(e,t,o){const n=e.slice();return n[16]=t[o],n}function _t(e){let t,o,n,l,s=ce([1,2,3,4,5,6,7,8,9]),r=[];for(let f=0;f<9;f+=1)r[f]=Re(Oe(e,s,f));return{c(){t=T("button");for(let f=0;f<9;f+=1)r[f].c();this.h()},l(f){t=D(f,"BUTTON",{class:!0});var u=L(t);for(let d=0;d<9;d+=1)r[d].l(u);u.forEach(N),this.h()},h(){B(t,"class",o=we("cell notes "+e[2]+" "+e[7])+" svelte-5w6im7")},m(f,u){A(f,t,u);for(let d=0;d<9;d+=1)r[d]&&r[d].m(t,null);e[12](t),n||(l=te(t,"click",e[4]),n=!0)},p(f,u){if(u&105){s=ce([1,2,3,4,5,6,7,8,9]);let d;for(d=0;d<9;d+=1){const h=Oe(f,s,d);r[d]?r[d].p(h,u):(r[d]=Re(h),r[d].c(),r[d].m(t,null))}for(;d<9;d+=1)r[d].d(1)}u&4&&o!==(o=we("cell notes "+f[2]+" "+f[7])+" svelte-5w6im7")&&B(t,"class",o)},d(f){f&&N(t),ke(r,f),e[12](null),n=!1,l()}}}function mt(e){let t,o=e[0].value+"",n,l,s,r,f;return{c(){t=T("button"),n=oe(o),this.h()},l(u){t=D(u,"BUTTON",{class:!0});var d=L(t);n=le(d,o),d.forEach(N),this.h()},h(){B(t,"class",l=we("cell value "+(e[2]==="auto-hint"?e[2]:"")+" "+e[7])+" svelte-5w6im7"),t.disabled=s=e[0].fixed,X(t,"fixed",e[0].fixed),X(t,"highlight",e[3]!==void 0&&e[3]===e[0].value)},m(u,d){A(u,t,d),w(t,n),e[11](t),r||(f=te(t,"click",e[4]),r=!0)},p(u,d){d&1&&o!==(o=u[0].value+"")&&ge(n,o),d&4&&l!==(l=we("cell value "+(u[2]==="auto-hint"?u[2]:"")+" "+u[7])+" svelte-5w6im7")&&B(t,"class",l),d&1&&s!==(s=u[0].fixed)&&(t.disabled=s),d&5&&X(t,"fixed",u[0].fixed),d&13&&X(t,"highlight",u[3]!==void 0&&u[3]===u[0].value)},d(u){u&&N(t),e[11](null),r=!1,f()}}}function Ge(e){let t;return{c(){t=oe(e[16])},l(o){t=le(o,e[16])},m(o,n){A(o,t,n)},d(o){o&&N(t)}}}function Re(e){let t,o=e[0].notes.includes(e[16]),n,l=o&&Ge(e);return{c(){t=T("div"),l&&l.c(),n=M(),this.h()},l(s){t=D(s,"DIV",{class:!0});var r=L(t);l&&l.l(r),n=S(r),r.forEach(N),this.h()},h(){B(t,"class","note svelte-5w6im7"),X(t,"hinted-note",e[5].includes(e[16])),X(t,"hinted-remove-note",e[6].includes(e[16])),X(t,"highlight",e[3]!==void 0&&e[3]===e[16])},m(s,r){A(s,t,r),l&&l.m(t,null),w(t,n)},p(s,r){r&1&&(o=s[0].notes.includes(s[16])),o?l||(l=Ge(s),l.c(),l.m(t,n)):l&&(l.d(1),l=null),r&8&&X(t,"highlight",s[3]!==void 0&&s[3]===s[16])},d(s){s&&N(t),l&&l.d()}}}function vt(e){let t;function o(s,r){return s[0].value?mt:_t}let n=o(e),l=n(e);return{c(){l.c(),t=re()},l(s){l.l(s),t=re()},m(s,r){l.m(s,r),A(s,t,r)},p(s,[r]){n===(n=o(s))&&l?l.p(s,r):(l.d(1),l=n(s),l&&(l.c(),l.m(t.parentNode,t)))},i:fe,o:fe,d(s){s&&N(t),l.d(s)}}}function pt(e,t,o){let n;He(e,dt,v=>o(3,n=v));let{cell:l}=t,{position:s}=t,{gridErrors:r}=t,{hints:f=[]}=t;const u=Ie(),d=Ie();let h;const p=()=>{Ye(ht,{initialState:l,onSelectionUpdated:a=>{u("cellUpdate",{cell:l,update:a})},onComputeCellNotes:()=>{d("computeCellNotes",{position:s})},cellBoundingRect:h.getBoundingClientRect()})};let m="";const C=[],g=[];for(const v of f){for(const i of v.cause)i.row===s.row&&i.col===s.col&&(v.type==="naked_pair"?m="naked-pair-hint":v.type==="last_auto_hint"?m="auto-hint":m="lone-hint",C.push(...i.notes));for(const i of v.effect)i.row===s.row&&i.col===s.col&&g.push(...i.notes)}const q=[];for(const v of r){const i=3*Math.floor(s.row/3)+Math.floor(s.col/3),a=3*Math.floor(v.row/3)+Math.floor(v.col/3);if(v.col===s.col&&v.row===s.row||v.type==="column"&&v.col===s.col&&v.value===l.value||v.type==="row"&&v.row===s.row&&v.value===l.value||v.type==="square"&&i===a&&v.value===l.value){q.push("is-error-cell");continue}v.type==="column"&&v.col===s.col&&q.push("is-error-col"),v.type==="row"&&v.row===s.row&&q.push("is-error-row"),v.type==="square"&&i===a&&q.push("is-error-square")}let k=q.join(" ");function E(v){qe[v?"unshift":"push"](()=>{h=v,o(1,h)})}function V(v){qe[v?"unshift":"push"](()=>{h=v,o(1,h)})}return e.$$set=v=>{"cell"in v&&o(0,l=v.cell),"position"in v&&o(8,s=v.position),"gridErrors"in v&&o(9,r=v.gridErrors),"hints"in v&&o(10,f=v.hints)},[l,h,m,n,p,C,g,k,s,r,f,E,V]}class ie extends me{constructor(t){super(),ve(this,t,pt,vt,ue,{cell:0,position:8,gridErrors:9,hints:10})}}function gt(e){let t,o,n,l,s,r,f,u,d,h,p,m,C,g,q,k,E,V,v;return o=new ie({props:{cell:e[7][0],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]}}}),o.$on("cellUpdate",e[10]),o.$on("computeCellNotes",e[11]),l=new ie({props:{cell:e[7][1],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]+1}}}),l.$on("cellUpdate",e[12]),l.$on("computeCellNotes",e[13]),r=new ie({props:{cell:e[7][2],hints:e[1],gridErrors:e[0],position:{row:e[5],col:e[6]+2}}}),r.$on("cellUpdate",e[14]),r.$on("computeCellNotes",e[15]),u=new ie({props:{cell:e[7][3],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]}}}),u.$on("cellUpdate",e[16]),u.$on("computeCellNotes",e[17]),h=new ie({props:{cell:e[7][4],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]+1}}}),h.$on("cellUpdate",e[18]),h.$on("computeCellNotes",e[19]),m=new ie({props:{cell:e[7][5],hints:e[1],gridErrors:e[0],position:{row:e[5]+1,col:e[6]+2}}}),m.$on("cellUpdate",e[20]),m.$on("computeCellNotes",e[21]),g=new ie({props:{cell:e[7][6],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]}}}),g.$on("cellUpdate",e[22]),g.$on("computeCellNotes",e[23]),k=new ie({props:{cell:e[7][7],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]+1}}}),k.$on("cellUpdate",e[24]),k.$on("computeCellNotes",e[25]),V=new ie({props:{cell:e[7][8],hints:e[1],gridErrors:e[0],position:{row:e[5]+2,col:e[6]+2}}}),V.$on("cellUpdate",e[26]),V.$on("computeCellNotes",e[27]),{c(){t=T("div"),K(o.$$.fragment),n=M(),K(l.$$.fragment),s=M(),K(r.$$.fragment),f=M(),K(u.$$.fragment),d=M(),K(h.$$.fragment),p=M(),K(m.$$.fragment),C=M(),K(g.$$.fragment),q=M(),K(k.$$.fragment),E=M(),K(V.$$.fragment),this.h()},l(i){t=D(i,"DIV",{class:!0});var a=L(t);W(o.$$.fragment,a),n=S(a),W(l.$$.fragment,a),s=S(a),W(r.$$.fragment,a),f=S(a),W(u.$$.fragment,a),d=S(a),W(h.$$.fragment,a),p=S(a),W(m.$$.fragment,a),C=S(a),W(g.$$.fragment,a),q=S(a),W(k.$$.fragment,a),E=S(a),W(V.$$.fragment,a),a.forEach(N),this.h()},h(){B(t,"class","cell-grid svelte-xcvtsp"),X(t,"showValid",e[2]),X(t,"borderLeftRight",e[3]),X(t,"borderTopBottom",e[4])},m(i,a){A(i,t,a),Y(o,t,null),w(t,n),Y(l,t,null),w(t,s),Y(r,t,null),w(t,f),Y(u,t,null),w(t,d),Y(h,t,null),w(t,p),Y(m,t,null),w(t,C),Y(g,t,null),w(t,q),Y(k,t,null),w(t,E),Y(V,t,null),v=!0},p(i,[a]){const R={};a&2&&(R.hints=i[1]),a&1&&(R.gridErrors=i[0]),o.$set(R);const G={};a&2&&(G.hints=i[1]),a&1&&(G.gridErrors=i[0]),l.$set(G);const H={};a&2&&(H.hints=i[1]),a&1&&(H.gridErrors=i[0]),r.$set(H);const c={};a&2&&(c.hints=i[1]),a&1&&(c.gridErrors=i[0]),u.$set(c);const y={};a&2&&(y.hints=i[1]),a&1&&(y.gridErrors=i[0]),h.$set(y);const O={};a&2&&(O.hints=i[1]),a&1&&(O.gridErrors=i[0]),m.$set(O);const I={};a&2&&(I.hints=i[1]),a&1&&(I.gridErrors=i[0]),g.$set(I);const P={};a&2&&(P.hints=i[1]),a&1&&(P.gridErrors=i[0]),k.$set(P);const j={};a&2&&(j.hints=i[1]),a&1&&(j.gridErrors=i[0]),V.$set(j),(!v||a&4)&&X(t,"showValid",i[2])},i(i){v||(Q(o.$$.fragment,i),Q(l.$$.fragment,i),Q(r.$$.fragment,i),Q(u.$$.fragment,i),Q(h.$$.fragment,i),Q(m.$$.fragment,i),Q(g.$$.fragment,i),Q(k.$$.fragment,i),Q(V.$$.fragment,i),v=!0)},o(i){Z(o.$$.fragment,i),Z(l.$$.fragment,i),Z(r.$$.fragment,i),Z(u.$$.fragment,i),Z(h.$$.fragment,i),Z(m.$$.fragment,i),Z(g.$$.fragment,i),Z(k.$$.fragment,i),Z(V.$$.fragment,i),v=!1},d(i){i&&N(t),$(o),$(l),$(r),$(u),$(h),$(m),$(g),$(k),$(V)}}}function wt(e,t,o){let{position:n}=t,{grid:l}=t,{gridErrors:s}=t,{hints:r=[]}=t,{gridIsValid:f=!1}=t;const u=[1,4,7].includes(n),d=[3,4,5].includes(n),h=3*Math.floor(n/3),p=3*(n%3),m=$e(n,l);function C(_){U.call(this,e,_)}function g(_){U.call(this,e,_)}function q(_){U.call(this,e,_)}function k(_){U.call(this,e,_)}function E(_){U.call(this,e,_)}function V(_){U.call(this,e,_)}function v(_){U.call(this,e,_)}function i(_){U.call(this,e,_)}function a(_){U.call(this,e,_)}function R(_){U.call(this,e,_)}function G(_){U.call(this,e,_)}function H(_){U.call(this,e,_)}function c(_){U.call(this,e,_)}function y(_){U.call(this,e,_)}function O(_){U.call(this,e,_)}function I(_){U.call(this,e,_)}function P(_){U.call(this,e,_)}function j(_){U.call(this,e,_)}return e.$$set=_=>{"position"in _&&o(8,n=_.position),"grid"in _&&o(9,l=_.grid),"gridErrors"in _&&o(0,s=_.gridErrors),"hints"in _&&o(1,r=_.hints),"gridIsValid"in _&&o(2,f=_.gridIsValid)},[s,r,f,u,d,h,p,m,n,l,C,g,q,k,E,V,v,i,a,R,G,H,c,y,O,I,P,j]}class ae extends me{constructor(t){super(),ve(this,t,wt,gt,ue,{position:8,grid:9,gridErrors:0,hints:1,gridIsValid:2})}}function Ct(e){let t,o,n,l,s,r,f,u,d,h,p,m,C,g,q,k,E,V,v;return o=new ae({props:{position:0,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),o.$on("cellUpdate",e[4]),o.$on("computeCellNotes",e[5]),l=new ae({props:{position:1,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),l.$on("cellUpdate",e[6]),l.$on("computeCellNotes",e[7]),r=new ae({props:{position:2,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),r.$on("cellUpdate",e[8]),r.$on("computeCellNotes",e[9]),u=new ae({props:{position:3,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),u.$on("cellUpdate",e[10]),u.$on("computeCellNotes",e[11]),h=new ae({props:{position:4,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),h.$on("cellUpdate",e[12]),h.$on("computeCellNotes",e[13]),m=new ae({props:{position:5,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),m.$on("cellUpdate",e[14]),m.$on("computeCellNotes",e[15]),g=new ae({props:{position:6,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),g.$on("cellUpdate",e[16]),g.$on("computeCellNotes",e[17]),k=new ae({props:{position:7,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),k.$on("cellUpdate",e[18]),k.$on("computeCellNotes",e[19]),V=new ae({props:{position:8,gridIsValid:e[3],hints:e[2],gridErrors:e[1],grid:e[0]}}),V.$on("cellUpdate",e[20]),V.$on("computeCellNotes",e[21]),{c(){t=T("div"),K(o.$$.fragment),n=M(),K(l.$$.fragment),s=M(),K(r.$$.fragment),f=M(),K(u.$$.fragment),d=M(),K(h.$$.fragment),p=M(),K(m.$$.fragment),C=M(),K(g.$$.fragment),q=M(),K(k.$$.fragment),E=M(),K(V.$$.fragment),this.h()},l(i){t=D(i,"DIV",{class:!0});var a=L(t);W(o.$$.fragment,a),n=S(a),W(l.$$.fragment,a),s=S(a),W(r.$$.fragment,a),f=S(a),W(u.$$.fragment,a),d=S(a),W(h.$$.fragment,a),p=S(a),W(m.$$.fragment,a),C=S(a),W(g.$$.fragment,a),q=S(a),W(k.$$.fragment,a),E=S(a),W(V.$$.fragment,a),a.forEach(N),this.h()},h(){B(t,"class","main-grid svelte-byhg4j")},m(i,a){A(i,t,a),Y(o,t,null),w(t,n),Y(l,t,null),w(t,s),Y(r,t,null),w(t,f),Y(u,t,null),w(t,d),Y(h,t,null),w(t,p),Y(m,t,null),w(t,C),Y(g,t,null),w(t,q),Y(k,t,null),w(t,E),Y(V,t,null),v=!0},p(i,[a]){const R={};a&8&&(R.gridIsValid=i[3]),a&4&&(R.hints=i[2]),a&2&&(R.gridErrors=i[1]),a&1&&(R.grid=i[0]),o.$set(R);const G={};a&8&&(G.gridIsValid=i[3]),a&4&&(G.hints=i[2]),a&2&&(G.gridErrors=i[1]),a&1&&(G.grid=i[0]),l.$set(G);const H={};a&8&&(H.gridIsValid=i[3]),a&4&&(H.hints=i[2]),a&2&&(H.gridErrors=i[1]),a&1&&(H.grid=i[0]),r.$set(H);const c={};a&8&&(c.gridIsValid=i[3]),a&4&&(c.hints=i[2]),a&2&&(c.gridErrors=i[1]),a&1&&(c.grid=i[0]),u.$set(c);const y={};a&8&&(y.gridIsValid=i[3]),a&4&&(y.hints=i[2]),a&2&&(y.gridErrors=i[1]),a&1&&(y.grid=i[0]),h.$set(y);const O={};a&8&&(O.gridIsValid=i[3]),a&4&&(O.hints=i[2]),a&2&&(O.gridErrors=i[1]),a&1&&(O.grid=i[0]),m.$set(O);const I={};a&8&&(I.gridIsValid=i[3]),a&4&&(I.hints=i[2]),a&2&&(I.gridErrors=i[1]),a&1&&(I.grid=i[0]),g.$set(I);const P={};a&8&&(P.gridIsValid=i[3]),a&4&&(P.hints=i[2]),a&2&&(P.gridErrors=i[1]),a&1&&(P.grid=i[0]),k.$set(P);const j={};a&8&&(j.gridIsValid=i[3]),a&4&&(j.hints=i[2]),a&2&&(j.gridErrors=i[1]),a&1&&(j.grid=i[0]),V.$set(j)},i(i){v||(Q(o.$$.fragment,i),Q(l.$$.fragment,i),Q(r.$$.fragment,i),Q(u.$$.fragment,i),Q(h.$$.fragment,i),Q(m.$$.fragment,i),Q(g.$$.fragment,i),Q(k.$$.fragment,i),Q(V.$$.fragment,i),v=!0)},o(i){Z(o.$$.fragment,i),Z(l.$$.fragment,i),Z(r.$$.fragment,i),Z(u.$$.fragment,i),Z(h.$$.fragment,i),Z(m.$$.fragment,i),Z(g.$$.fragment,i),Z(k.$$.fragment,i),Z(V.$$.fragment,i),v=!1},d(i){i&&N(t),$(o),$(l),$(r),$(u),$(h),$(m),$(g),$(k),$(V)}}}function bt(e,t,o){let{grid:n}=t,{gridErrors:l}=t,{hints:s=[]}=t,{gridIsValid:r=!1}=t;function f(c){U.call(this,e,c)}function u(c){U.call(this,e,c)}function d(c){U.call(this,e,c)}function h(c){U.call(this,e,c)}function p(c){U.call(this,e,c)}function m(c){U.call(this,e,c)}function C(c){U.call(this,e,c)}function g(c){U.call(this,e,c)}function q(c){U.call(this,e,c)}function k(c){U.call(this,e,c)}function E(c){U.call(this,e,c)}function V(c){U.call(this,e,c)}function v(c){U.call(this,e,c)}function i(c){U.call(this,e,c)}function a(c){U.call(this,e,c)}function R(c){U.call(this,e,c)}function G(c){U.call(this,e,c)}function H(c){U.call(this,e,c)}return e.$$set=c=>{"grid"in c&&o(0,n=c.grid),"gridErrors"in c&&o(1,l=c.gridErrors),"hints"in c&&o(2,s=c.hints),"gridIsValid"in c&&o(3,r=c.gridIsValid)},[n,l,s,r,f,u,d,h,p,m,C,g,q,k,E,V,v,i,a,R,G,H]}class Bt extends me{constructor(t){super(),ve(this,t,bt,Ct,ue,{grid:0,gridErrors:1,hints:2,gridIsValid:3})}}function kt(e){let t,o="⚠️ The grid has no solutions",n,l,s="The current configuration can't be solved you probably want to revert your last move";return{c(){t=T("div"),t.textContent=o,n=M(),l=T("div"),l.textContent=s,this.h()},l(r){t=D(r,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-s0bb1z"&&(t.textContent=o),n=S(r),l=D(r,"DIV",{class:!0,"data-svelte-h":!0}),se(l)!=="svelte-4j5vhd"&&(l.textContent=s),this.h()},h(){B(t,"class","message svelte-1jht74m"),B(l,"class","sub-message svelte-1jht74m")},m(r,f){A(r,t,f),A(r,n,f),A(r,l,f)},d(r){r&&(N(t),N(n),N(l))}}}function Nt(e){let t,o="⚠️ The grid is invalid",n,l,s="The current configuration violates some rules";return{c(){t=T("div"),t.textContent=o,n=M(),l=T("div"),l.textContent=s,this.h()},l(r){t=D(r,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1h94ja7"&&(t.textContent=o),n=S(r),l=D(r,"DIV",{class:!0,"data-svelte-h":!0}),se(l)!=="svelte-1ruglqd"&&(l.textContent=s),this.h()},h(){B(t,"class","message svelte-1jht74m"),B(l,"class","sub-message svelte-1jht74m")},m(r,f){A(r,t,f),A(r,n,f),A(r,l,f)},d(r){r&&(N(t),N(n),N(l))}}}function Be(e){let t,o,n,l,s,r,f,u="grid has errors",d,h,p="grid is filled",m,C,g="grid is valid",q,k,E="grid has solutions",V,v,i=e[1]?"Has errors":"No errors",a,R,G,H=e[2]?"Is filled":"Not filled",c,y,O,I=e[3]?"Is valid":"Not valid",P,j,_,J,b=e[4]!=="unique"&&kt(),z=(e[1]||e[2]&&!e[3])&&Nt();return{c(){t=T("div"),b&&b.c(),o=M(),z&&z.c(),n=M(),l=T("br"),s=M(),r=T("div"),f=T("div"),f.textContent=u,d=M(),h=T("div"),h.textContent=p,m=M(),C=T("div"),C.textContent=g,q=M(),k=T("div"),k.textContent=E,V=M(),v=T("div"),a=oe(i),R=M(),G=T("div"),c=oe(H),y=M(),O=T("div"),P=oe(I),j=M(),_=T("div"),J=oe(e[4]),this.h()},l(x){t=D(x,"DIV",{class:!0});var ee=L(t);b&&b.l(ee),o=S(ee),z&&z.l(ee),ee.forEach(N),n=S(x),l=D(x,"BR",{}),s=S(x),r=D(x,"DIV",{class:!0});var F=L(r);f=D(F,"DIV",{"data-svelte-h":!0}),se(f)!=="svelte-1hlqbal"&&(f.textContent=u),d=S(F),h=D(F,"DIV",{"data-svelte-h":!0}),se(h)!=="svelte-ekf37s"&&(h.textContent=p),m=S(F),C=D(F,"DIV",{"data-svelte-h":!0}),se(C)!=="svelte-16e0vl8"&&(C.textContent=g),q=S(F),k=D(F,"DIV",{"data-svelte-h":!0}),se(k)!=="svelte-1tjrozg"&&(k.textContent=E),V=S(F),v=D(F,"DIV",{class:!0});var he=L(v);a=le(he,i),he.forEach(N),R=S(F),G=D(F,"DIV",{class:!0});var de=L(G);c=le(de,H),de.forEach(N),y=S(F),O=D(F,"DIV",{class:!0});var ne=L(O);P=le(ne,I),ne.forEach(N),j=S(F),_=D(F,"DIV",{class:!0});var Ve=L(_);J=le(Ve,e[4]),Ve.forEach(N),F.forEach(N),this.h()},h(){B(t,"class","messages-container svelte-1jht74m"),B(v,"class","status svelte-1jht74m"),X(v,"red",e[1]),B(G,"class","status svelte-1jht74m"),X(G,"red",!e[2]),B(O,"class","status svelte-1jht74m"),X(O,"red",!e[3]),B(_,"class","status svelte-1jht74m"),X(_,"red",e[4]!=="unique"),B(r,"class","grid-status svelte-1jht74m")},m(x,ee){A(x,t,ee),b&&b.m(t,null),w(t,o),z&&z.m(t,null),A(x,n,ee),A(x,l,ee),A(x,s,ee),A(x,r,ee),w(r,f),w(r,d),w(r,h),w(r,m),w(r,C),w(r,q),w(r,k),w(r,V),w(r,v),w(v,a),w(r,R),w(r,G),w(G,c),w(r,y),w(r,O),w(O,P),w(r,j),w(r,_),w(_,J)},p:fe,d(x){x&&(N(t),N(n),N(l),N(s),N(r)),b&&b.d(),z&&z.d()}}}function Et(e){let t=e[0],o,n=Be(e);return{c(){n.c(),o=re()},l(l){n.l(l),o=re()},m(l,s){n.m(l,s),A(l,o,s)},p(l,[s]){s&1&&ue(t,t=l[0])?(n.d(1),n=Be(l),n.c(),n.m(o.parentNode,o)):n.p(l,s)},i:fe,o:fe,d(l){l&&N(o),n.d(l)}}}function Vt(e,t,o){let{grid:n}=t,l=Ee(n),s=Ce(n),r=Fe(n),f=ut(n);return e.$$set=u=>{"grid"in u&&o(0,n=u.grid)},[n,l,s,r,f]}class At extends me{constructor(t){super(),ve(this,t,Vt,Et,ue,{grid:0})}}export{At as G,Bt as S,Dt as a,Ee as b,ut as c,_e as d,Fe as e,st as f,Gt as g,dt as h,yt as i,rt as j,nt as k,Rt as l,Ce as m,Ot as p,it as r,at as s,Tt as u};
